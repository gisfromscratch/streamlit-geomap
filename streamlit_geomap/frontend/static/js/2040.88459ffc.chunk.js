"use strict";(self.webpackChunkstreamlit_geomap_frontend=self.webpackChunkstreamlit_geomap_frontend||[]).push([[2040],{32040:(e,o,l)=>{l.d(o,{getRampStops:()=>W});var i,n=l(69539),t=l(59784),r=l(24921),u=l(53084),s=(l(89465),l(28808));function a(e){switch(e){case"circle":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case"square":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case"diamond":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case"hexagon-pointy":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case"hexagon-flat":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function d(e){var o;return"CIMVectorMarker"===(null===e||void 0===e?void 0:e.type)?null===(o=e.markerGraphics)||void 0===o?void 0:o[0]:void 0}function c(e){var o,l;return"CIMPolygonSymbol"===(null===e||void 0===e||null===(o=e.symbol)||void 0===o?void 0:o.type)?null===(l=e.symbol.symbolLayers)||void 0===l?void 0:l[0]:void 0}function v(e,o){"CIMVectorMarker"===(null===e||void 0===e?void 0:e.type)&&null!=o&&(e.size=o)}function f(e,o){const l=d(e);l&&null!=o&&(l.geometry=a(o))}function y(e,o){const l=c(d(e));l&&null!=o&&(l.color=o.toArray())}function m(e,o,l){const i=c(d(e));i&&null!=o&&l&&(i.colorLocked=o)}function p(e,o){var l;const{outerRingSize:n,innerDotSize:t,type:r,color:s,colorLocked:a,primitiveOverrides:d}=o,c="CIMPolygonSymbol"===(null===(l=e.data.symbol)||void 0===l?void 0:l.type)?e.data.symbol.symbolLayers:null;if(2===(null===c||void 0===c?void 0:c.length))for(const u of c){const e=u.primitiveName===i.OuterRing;v(u,e?n:t),f(u,r),y(u,s),m(u,a,e)}return null!=n&&null!=t&&(e.data.primitiveOverrides=null),void 0!==d&&(e.data.primitiveOverrides=(0,u.o8)(d)),e}!function(e){e.OuterRing="reference-size-outer-ring",e.InnerDot="reference-size-inner-dot"}(i||(i={}));var h=l(76931);const b="spike-height-override";(0,h.PN)(8),(0,h.PN)(20);function g(e){const o=[S(e)],l=function(e){const{color:o,symbolStyle:l}=e,i=null===l||void 0===l?void 0:l.includes("solid-fill"),n=null===l||void 0===l?void 0:l.includes("gradient-fill");if(!i&&!n||!o)return;if(i)return{type:"CIMSolidFill",enable:!0,colorLocked:!1,color:null===o||void 0===o?void 0:o.toArray()};const t=o.clone();return t.a=0,{type:"CIMGradientFill",enable:!0,angle:90,colorRamp:{type:"CIMMultipartColorRamp",colorRamps:[{type:"CIMLinearContinuousColorRamp",fromColor:o.toArray(),toColor:t.toArray()}],weights:[1]},gradientMethod:"Linear",gradientSize:70,gradientSizeUnits:"Relative",gradientType:"Continuous"}}(e);return l&&o.push(l),o}function S(e){var o;const{strokeColor:l,strokeWidth:i,symbolStyle:n}=e,t=(null===n||void 0===n?void 0:n.includes("solid-fill"))||(null===n||void 0===n?void 0:n.includes("gradient-fill"));let r=null===l||void 0===l?void 0:l.toArray(),u=!1;return null!==n&&void 0!==n&&n.includes("outline")&&t?u=!0:r=null===(o=e.color)||void 0===o?void 0:o.toArray(),{type:"CIMSolidStroke",effects:C(n),enable:!0,colorLocked:u,capStyle:s.uT.Round,joinStyle:s.wd.Round,lineStyle3D:s.h5.Strip,miterLimit:4,width:null!==i&&void 0!==i?i:(0,h.PN)(1),color:r}}function C(e){if(null===e||void 0===e||!e.includes("closed"))return[{type:"CIMGeometricEffectAddControlPoints",angleTolerance:90,primitiveName:"spike-control-points"},{type:"CIMGeometricEffectSuppress",suppress:!0,invert:!0,primitiveName:"spike-stroke-suppress"}]}function k(e,o){var l,i,t;const{defaultHeight:r,baseWidth:s,color:a,strokeColor:d,primitiveOverrides:c,symbolStyle:v,strokeWidth:f}=o,y="CIMPointSymbol"===(null===(l=e.data.symbol)||void 0===l?void 0:l.type)?e.data.symbol:null;if(!y)return e;const m=y.effects,p=null===m||void 0===m?void 0:m.find(e=>"CIMGeometricEffectTaperedPolygon"===e.type),h=null===m||void 0===m?void 0:m.find(e=>"CIMGeometricEffectRadial"===e.type&&e.primitiveName===b);null!=s&&p&&(p.fromWidth=s),null!=r&&h&&(h.length=r);const S=y.symbolLayers,C=null===S||void 0===S?void 0:S.find(e=>"CIMSolidStroke"===e.type),k=null===S||void 0===S?void 0:S.find(e=>"CIMSolidFill"===e.type),w=null===S||void 0===S?void 0:S.find(e=>"CIMGradientFill"===e.type),z="CIMMultipartColorRamp"===(null===w||void 0===w||null===(i=w.colorRamp)||void 0===i?void 0:i.type)&&"CIMLinearContinuousColorRamp"===(null===(t=w.colorRamp.colorRamps[0])||void 0===t?void 0:t.type)?w.colorRamp.colorRamps[0]:null;if(v){var I,M,L;const e=null!==(I=null!==(M=null===k||void 0===k?void 0:k.color)&&void 0!==M?M:null===z||void 0===z?void 0:z.fromColor)&&void 0!==I?I:null===C||void 0===C?void 0:C.color,o=null!==(L=null===C||void 0===C?void 0:C.color)&&void 0!==L?L:e;y.symbolLayers=g({color:null!==a&&void 0!==a?a:e?new n.A(e):void 0,strokeColor:null!==d&&void 0!==d?d:o?new n.A(o):void 0,strokeWidth:null!==f&&void 0!==f?f:null===C||void 0===C?void 0:C.width,symbolStyle:v})}else if(C&&d&&(C.color=d.toArray()),k&&a&&(k.color=a.toArray()),z&&a){const e=a.clone();e.a=0,z.fromColor=a.toArray(),z.toColor=e.toArray()}return void 0!==c&&(e.data.primitiveOverrides=(0,u.o8)(c)),e}var w=l(7246),z=l(76940),I=l(29632),M=l(28675),L=l(94725),R=l(94439),A=l(60823),P=(l(15187),l(12440));const x=30,D=12,O=24,V=[255,255,255],T=[200,200,200],E=[128,128,128],G=20,N=5;async function W(e,o,i,n,t,u,s){var a,d;const c=o.legendOptions,v=null===c||void 0===c?void 0:c.customValues,f=s||await _(e,i),y=o.stops,m=!!f,p=!!v,h=null!=o.minSize&&null!=o.maxSize,b=y&&y.length>1,g=!!o.target;if(!m||!p&&!(h||b&&!g))return;const S=(0,R.$d)(f);let C=!1,k=null,w=null;k=S&&!b?(0,r.LI)([o.minDataValue,o.maxDataValue]):null!==v&&void 0!==v?v:await async function(e,o,i,n){const t=(await Promise.resolve().then(l.bind(l,15492))).getSizeRangeAtScale(e,i,n),u=t&&B(t);if(!t||!u)return;let s=u.map(o=>function(e,o,l){const i=l.minSize,n=l.maxSize,t=o.minDataValue,r=o.maxDataValue;let u;u=e<=i?t:e>=n?r:(e-i)/(n-i)*(r-t)+t;return u}(o,e,t));s=(0,r.LI)(s);for(let l=1;l<s.length-1;l++){const t=await $(e,o,s[l],s[l-1],i,n);t&&(s[l]=t[0],u[l]=t[1])}return s}(o,f,n,null===t||void 0===t?void 0:t.type);const z=null===e||void 0===e?void 0:e.authoringInfo,I="univariate-color-size"===(null===z||void 0===z?void 0:z.type),L=I&&"above-and-below"===(null===z||void 0===z?void 0:z.univariateTheme),P=!!(0,A.iz)(e,"reference-size"),x=!!(0,A.iz)(e,"spike");if(!k&&b&&(k=y.map(e=>e.value),C=y.some(e=>!!e.label),"flow"===e.type&&(k=(0,r.LI)(k)),C&&(w=y.map(e=>e.label))),S&&null!=k&&(null===(a=k)||void 0===a?void 0:a.length)>2&&!L&&(k=[k[0],k[k.length-1]]),!k)return null;I&&5!==(null===(d=k)||void 0===d?void 0:d.length)&&(k=B({minSize:k[0],maxSize:k[k.length-1]}));const D=S?F(e,k):null,V=(0,R.k_)(f),T=C?null:function(e,o){const l=e.length-1;return e.map((e,i)=>(0,A.Dd)(e,i,l,o))}(k,u),E=await Promise.all(k.map(async(l,i)=>{let r=S?D[i]:await j(o,f,l,n,null===t||void 0===t?void 0:t.type),u=r;P&&(r*=O/o.maxSize||1,u=O);const s=U(f,r,e,i);return x&&"cim"===s.type&&(u=await(0,M.D)(s)),{value:l,symbol:s,label:C?w[i]:T[i],size:u,outlineSize:V}}));return E.reverse()}function F(e,o){const l=null===e||void 0===e?void 0:e.authoringInfo,i="univariate-color-size"===(null===l||void 0===l?void 0:l.type);let n=[D,x];if(i){const e=o[0],l=o[o.length-1],i=D,t=x;n=o.map(o=>i+(o-e)/(l-e)*(t-i))}return i&&"below"===(null===l||void 0===l?void 0:l.univariateTheme)&&n.reverse(),n}async function _(e,o){var l;if("flow"===e.type)return(0,A.Zo)(e,o);if("pie-chart"===e.type)return new z.A({color:null,outline:null!==(l=e.outline)&&void 0!==l&&l.width?e.outline:new w.A});let i=null,r=null;if("simple"===e.type)i=e.symbol;else if("class-breaks"===e.type){const o=e.classBreakInfos;i=o&&o[0]&&o[0].symbol,r=o.length>1}else if("unique-value"===e.type){var u;const o=e.uniqueValueInfos;i=null===o||void 0===o||null===(u=o[0])||void 0===u?void 0:u.symbol,r=null!=o&&o.length>1}if(!i||function(e){var o,l,i;return(0,L.wk)(e)?null!==(o=null===(l=e.symbolLayers)||void 0===l?void 0:l.some(e=>"fill"===(null===e||void 0===e?void 0:e.type)))&&void 0!==o&&o:null!==(i=null===e||void 0===e?void 0:e.type.includes("fill"))&&void 0!==i&&i}(i))return null;if(i=i.clone(),o||r)if(i.type.includes("3d"))q(i);else if((0,A.iz)(e,"reference-size")&&"cim"===i.type)p(i,{color:null!==o&&void 0!==o?o:"class-breaks"!==e.type?new n.A(T):null});else if((0,A.iz)(e,"spike")&&"cim"===i.type){var s,a;const e=new n.A(T),l=new n.A(E),r="CIMPointSymbol"===(null===(s=i.data.symbol)||void 0===s?void 0:s.type)?i.data.symbol:null,u=!(null===r||void 0===r||null===(a=r.symbolLayers)||void 0===a||null===(a=a.find(e=>{let{type:o}=e;return"CIMSolidStroke"===o}))||void 0===a||!a.colorLocked);let d,c=null!==o&&void 0!==o?o:void 0;if(c){const o=(0,t.Ws)(c),i=(0,P.ud)();(!i&&o>225||i&&o<25)&&(c=e,d=u?l:e)}else c=e,d=u?l:e;k(i,{color:c,strokeColor:d})}else H(i);return i}function q(e){"line-3d"===e.type?e.symbolLayers.forEach(e=>{e.material={color:E}}):e.symbolLayers.forEach(e=>{var o;"icon"!==e.type||null!==(o=e.resource)&&void 0!==o&&o.href?e.material={color:T}:(e.material={color:V},e.outline={color:E,size:1.5})})}function H(e){const o=(0,P.ud)();if("cim"===e.type)(0,I.Fe)(e,new n.A(T));else if(e.type.includes("line"))e.color=E;else if(e.color=o?E:V,"simple-marker"===e.type)if(e.outline){var l;"#ffffff"===(null===(l=e.outline)||void 0===l||null===(l=l.color)||void 0===l?void 0:l.toHex())&&(e.outline.color=E)}else e.outline={color:E,width:1.5}}function B(e){const o=e.minSize,l=e.maxSize,i=N,n=(l-o)/(i-1),t=[];for(let r=0;r<i;r++)t.push(o+n*r);return t}async function $(e,o,l,i,n,t){const u=await j(e,o,l,n,t),s=await j(e,o,i,n,t),a=(0,r.lc)(l),d=a.fractional,c=G;let v=a.integer,f=null,y=null;l>0&&l<1&&(f=10**d,v=(0,r.lc)(l*=f).integer);for(let m=v-1;m>=0;m--){const i=10**m;let a=Math.floor(l/i)*i,d=Math.ceil(l/i)*i;null!=f&&(a/=f,d/=f);let v=(a+d)/2;[,v]=(0,r.LI)([a,v,d],{indexes:[1]});const p=await j(e,o,a,n,t),h=await j(e,o,d,n,t),b=await j(e,o,v,n,t),g=(0,r.u5)(u,p,s,null),S=(0,r.u5)(u,h,s,null),C=(0,r.u5)(u,b,s,null);let k=g.previous<=c,w=S.previous<=c;if(k&&w&&(g.previous<=S.previous?(k=!0,w=!1):(w=!0,k=!1)),k?y=[a,p]:w?y=[d,h]:C.previous<=c&&(y=[v,b]),y)break}return y}async function j(e,o,i,n,t){const{getSize:r}=await Promise.resolve().then(l.bind(l,15492));return r(e,i,{scale:n,view:t,shape:"simple-marker"===o.type?o.style:null})}function U(e,o,l,i){var n,t;"univariate-color-size"===(null===l||void 0===l||null===(n=l.authoringInfo)||void 0===n?void 0:n.type)&&"above-and-below"===(null===l||void 0===l||null===(t=l.authoringInfo)||void 0===t?void 0:t.univariateTheme)&&"class-breaks"===l.type&&(e=function(e,o){var l;const i=e.classBreakInfos,n=i.length,t=n<2||!(o>=2)?i[0].symbol.clone():i[n-1].symbol.clone(),r=null===(l=e.visualVariables)||void 0===l?void 0:l.some(e=>"color"===e.type);return r&&(t.type.includes("3d")?q(t):H(t)),t}(l,i));const r=e.clone();if((0,L.wk)(r))(0,R.$d)(r)||r.symbolLayers.forEach(e=>{"fill"!==e.type&&(e.size=o)});else if(function(e){return"esri.symbols.SimpleMarkerSymbol"===e.declaredClass}(r))r.size=o;else if(function(e){return"esri.symbols.PictureMarkerSymbol"===e.declaredClass}(r)){const e=r.width,l=r.height;r.height=o,r.width=o*(e/l)}else!function(e){return"esri.symbols.SimpleLineSymbol"===e.declaredClass}(r)?function(e){return"esri.symbols.TextSymbol"===e.declaredClass}(r)?r.font&&(r.font.size=o):"cim"===r.type&&(0,A.iz)(l,"reference-size")?p(r,{innerDotSize:o,outerRingSize:O}):"cim"===r.type&&(0,A.iz)(l,"spike")&&k(r,{defaultHeight:o,primitiveOverrides:null}):r.width=o;return r}}}]);
//# sourceMappingURL=2040.88459ffc.chunk.js.map