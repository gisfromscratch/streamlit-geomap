{"version":3,"file":"static/js/6840.1917794a.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js","../node_modules/@arcgis/core/symbols/cim/CIMResourceManager.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{isPolyline as e,isPolygon as t}from\"../../geometry/support/jsonUtils.js\";import i from\"./CIMResourceManager.js\";import{Transformation as r,CanvasDrawHelper as h}from\"./CIMSymbolDrawHelper.js\";import{CIMSymbolHelper as s}from\"./CIMSymbolHelper.js\";import{OverrideHelper as n}from\"./OverrideHelper.js\";import{scale as a,translate as o}from\"./rasterizingUtils.js\";import{mapCIMSymbolToGeometryType as l}from\"./utils.js\";const m=96/72;class g{constructor(e){this._spatialReference=e,this._imageDataCanvas=null,this._cimResourceManager=new i}get _canvas(){return this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\")),this._imageDataCanvas}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(i,r,h,o,m,g,c,d,w,u){if(!i)return null;const{data:p}=i;if(!p||\"CIMSymbolReference\"!==p.type||!p.symbol)return null;const{symbol:f}=p;g||(g=l(f));const x=await n.resolveSymbolOverrides(p,r,this._spatialReference,m,g,c,d),b=this._cimResourceManager,M=[];s.fetchResources(x,b,M),s.fetchFonts(x,b,M),M.length>0&&await Promise.all(M);const{width:C,height:R}=h;let v=y(g,C,R,o,u);const I=s.getEnvelope(x,v,b);if(!I)return null;I.x===1/0&&(I.x=C+2),I.y===1/0&&(I.y=-R/2),I.width===-1/0&&(I.width=C),I.height===-1/0&&(I.height=R);let S=1,_=0,P=0;switch(f.type){case\"CIMPointSymbol\":case\"CIMTextSymbol\":{let e=1;I.width>C&&(e=C/I.width);let t=1;I.height>R&&(t=R/I.height),\"preview\"===o&&(I.width<C&&(e=C/I.width),I.height<R&&(t=R/I.height)),S=Math.min(e,t),_=I.x+I.width/2,P=I.y+I.height/2}break;case\"CIMLineSymbol\":if(u){P=I.y+I.height/2,_=I.x+I.width/2;const e=I.width-C,t=I.height-R;v={paths:a(v.paths,{xmin:-1*I.width/2+e,xmax:I.width/2-e,ymin:-1*I.height/2+t,ymax:I.height/2-t,width:I.width-2*e,height:I.height-2*t})}}else{(w||I.height>R)&&(S=R/I.height),P=I.y+I.height/2;const i=I.x*S+C/2,r=(I.x+I.width)*S+C/2,h=e(v)?v.paths:t(v)?v.rings:null;if(null===h)throw new Error(\"Bad geometry, can't rasterise symbol!\");h[0][0][0]-=i/S,h[0][2][0]-=(r-C)/S}break;case\"CIMPolygonSymbol\":if(u){P=I.y+I.height/2,_=I.x+I.width/2;const e=I.width-C,t=I.height-R;v={paths:a(v.rings,{xmin:-1*I.width/2+e,xmax:I.width/2-e,ymin:-1*I.height/2+t,ymax:I.height/2-t,width:I.width-2*e,height:I.height-2*t})}}else{_=I.x+I.width/2,P=I.y+I.height/2;const e=I.x*S+C/2,t=(I.x+I.width)*S+C/2,i=I.y*S+R/2,r=(I.y+I.height)*S+R/2,{rings:h}=v;e<0&&(h[0][0][0]-=e,h[0][3][0]-=e,h[0][4][0]-=e),i<0&&(h[0][0][1]+=i,h[0][1][1]+=i,h[0][4][1]+=i),t>C&&(h[0][1][0]-=t-C,h[0][2][0]-=t-C),r>R&&(h[0][2][1]+=r-R,h[0][3][1]+=r-R)}}const j={type:\"cim\",data:{type:\"CIMSymbolReference\",symbol:x}};return this.rasterize(j,C,R,_,P,S,g,1,v)}rasterize(e,t,i,s,n,a,o,g=0,c=null,d=window.devicePixelRatio||1){const{data:w}=e;if(!w||\"CIMSymbolReference\"!==w.type||!w.symbol)return null;const{symbol:u}=w,p=this._canvas,f=d*m;p.width=t*f,p.height=i*f,o||(o=l(u)),c||(c=y(o,t,i,\"legend\")),p.width+=2*g,p.height+=2*g;const x=p.getContext(\"2d\",{willReadFrequently:!0}),b=r.createIdentity();b.translate(-s,-n),b.scale(a*f,-a*f),b.translate(t*f/2+g,i*f/2+g),x.clearRect(0,0,p.width,p.height);return new h(x,this._cimResourceManager,b,!0).drawSymbol(u,c),x.getImageData(0,0,p.width,p.height)}}function c(e,t,i,r){if(\"esriGeometryPolygon\"===t){return{rings:o(a(e.rings,{xmin:0,ymin:0,width:i,height:r}),-1*i/2,-1*r/2)}}if(\"esriGeometryPolyline\"===t){return{paths:o(a(e.paths,{xmin:0,ymin:0,width:i,height:r}),-1*i/2,-1*r/2)}}return null}function y(e,t,i,r,h){const s=1,n=-t/2+s,a=t/2-s,o=i/2-s,l=-i/2+s;if(h&&(\"esriGeometryPolygon\"===e||\"esriGeometryPolyline\"===e)){const r=c(h,e,t,i);if(r)return r}switch(e){case\"esriGeometryPoint\":return{x:0,y:0};case\"esriGeometryPolyline\":return{paths:[[[n,0],[0,0],[a,0]]]};default:return\"legend\"===r?{rings:[[[n,o],[a,0],[a,l],[n,l],[n,o]]]}:{rings:[[[n,o],[a,o],[a,l],[n,l],[n,o]]]}}}export{g as CIMSymbolRasterizer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{loadFont as e}from\"../../core/fontUtils.js\";import{getImageData as t}from\"../../core/imageUtils.js\";class i{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){return this._resourceMap.get(e)??null}async fetchResource(e,i){const h=this._resourceMap.get(e);if(h)return{width:h.width,height:h.height};let r=this._inFlightResourceMap.get(e);return r?r.then((e=>({width:e.width,height:e.height}))):(r=t(e,i),this._inFlightResourceMap.set(e,r),r.then((t=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,t),{width:t.width,height:t.height})),(()=>({width:0,height:0}))))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}loadFont(t){return e(t)}}export{i as default};\n"],"names":["m","g","constructor","e","this","_spatialReference","_imageDataCanvas","_cimResourceManager","i","_canvas","document","createElement","resourceManager","rasterizeCIMSymbolAsync","r","h","o","c","d","w","u","data","p","type","symbol","f","l","x","n","resolveSymbolOverrides","b","M","s","fetchResources","fetchFonts","length","Promise","all","width","C","height","R","v","y","I","getEnvelope","S","_","P","t","Math","min","paths","a","xmin","xmax","ymin","ymax","rings","Error","j","rasterize","arguments","undefined","window","devicePixelRatio","getContext","willReadFrequently","createIdentity","translate","scale","clearRect","drawSymbol","getImageData","_resourceMap","Map","_inFlightResourceMap","geometryEngine","geometryEnginePromise","destroy","clear","getResource","_this$_resourceMap$ge","get","fetchResource","then","set","delete","deleteResource","loadFont"],"sourceRoot":""}