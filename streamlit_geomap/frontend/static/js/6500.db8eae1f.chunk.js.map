{"version":3,"file":"static/js/6500.db8eae1f.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/core/mapCollectionUtils.js","../node_modules/@arcgis/core/views/interactive/snapping/FeatureSnappingSourceInfo.js","../node_modules/@arcgis/core/views/interactive/snapping/FeatureSnappingEngine.js","../node_modules/@arcgis/core/layers/support/floorFilterUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{createTask as e}from\"./asyncUtils.js\";import t from\"./Collection.js\";import{destroyHandle as o,removeIfHandle as s}from\"./handleUtils.js\";import{ignoreAbortErrors as r,isAborted as n,createAbortError as i}from\"./promiseUtils.js\";import{on as a}from\"./reactiveUtils.js\";function c(e,o,s){const r=s?.createCollection?.()??new t,n=!!s?.recycleItems?new d:null,i=(e,t=0)=>{if(!e?.length)return;const o=r.splice(t,e.length);n?n.processRemoved(e):o.forEach(m)},c=(e,t=0)=>{if(!e?.length)return;const s=[];for(const r of e){const e=n?.use(r);if(e)s.push(e);else{const e=o(r);n?.register(r,e),s.push(e)}}r.addMany(s,t)},l=a(e,\"after-splice\",(({added:e,start:t,removed:o})=>{i(o,t),c(e,t)}),{sync:!0,onListenerRemove:e=>i(e.items),onListenerAdd:e=>c(e.items)});return r.addHandles(l),r}class d{constructor(){this._originalToMapped=new Map,this._removedItemCandidates=new Set,this._garbageCollectionQueued=!1}processRemoved(e){if(!e?.length)return;const{_removedItemCandidates:t}=this;for(const o of e)this._getItem(o)?.markRemoved()&&(t.add(o),this._queueGarbageCollection())}use(e){const t=this._getItem(e);return t&&(t.removed=!1),t?.item}register(e,t){this._originalToMapped.set(e,new l(t))}_getItem(e){return this._originalToMapped.get(e)}_queueGarbageCollection(){this._garbageCollectionQueued||(this._garbageCollectionQueued=!0,queueMicrotask((()=>this._garbageCollectCandidates())))}_garbageCollectCandidates(){this._garbageCollectionQueued=!1;const{_removedItemCandidates:e}=this,t=Array.from(e);e.clear(),t.forEach((e=>this._garbageCollectIfRemoved(e)))}_garbageCollectIfRemoved(e){const{_originalToMapped:t}=this,o=this._getItem(e);o?.removed&&(m(o.item),t.delete(e))}}class l{constructor(e){this.item=e,this.removed=!1}markRemoved(){return this.removed=!0,!0}}function m(e){\"object\"==typeof e&&e&&(\"destroy\"in e&&\"function\"==typeof e.destroy?e.destroy():s(e))}function u(s,a,d){const l=new t,u=c(s,(t=>e((async e=>{const o=await a(t,e);if(n(e))throw m(o),i();return o}))),d),f=()=>null,g=async e=>{const t=await e.promise,o=u.indexOf(e);o<0||l.splice(o,1,t)};l.addMany(u.items.map(f));for(const e of u)r(g(e));const h=u.on(\"after-splice\",(({added:e,start:t,deleteCount:o})=>{const s=l.splice(t,o);for(const r of s)m(r);if(e?.length){l.addMany(e.map(f),t);for(const t of e)r(g(t))}}));return l.addHandles([o(u),h]),l}export{c as mapCollection,u as mapCollectionAsync};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import has from\"../../../core/has.js\";import r from\"../../../core/Logger.js\";import{watch as i,syncAndInitial as l}from\"../../../core/reactiveUtils.js\";import{sqlAnd as s}from\"../../../core/sql.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/RandomLCG.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import n from\"../../../layers/support/FeatureFilter.js\";import{getFloorFilterClause as u}from\"../../../layers/support/floorFilterUtils.js\";import{isSubtypeGroupLayer as p,isFeatureLayer as d}from\"../../../layers/support/layerUtils.js\";import{isUtilityNetworkWebMap as c}from\"./snappingUtils.js\";import{scaleBoundsPredicate as y}from\"../../support/layerViewUtils.js\";let f=class extends t{set attributeRulesEnabled(e){this._set(\"attributeRulesEnabled\",e),e&&this.loadRules()}get layerView(){return this.view?.allLayerViews?.find((e=>e.layer===this.layer))}get valid(){const{_valid:e,snappingSource:t,layer:r}=this;return!(!t||!r)&&e}get subtypeFilter(){const{layer:e,snappingSource:t}=this;if(!p(e)||!e.subtypes?.length||!t)return{mode:\"not-in-use\",filter:null};const r=t.layerSource.sublayerSources.filter((e=>e.enabled&&e.layer.visible&&y(this.view?.scale,e.layer.effectiveScaleRange.minScale,e.layer.effectiveScaleRange.maxScale))).map((e=>e.layer.subtypeCode));if(!r.length)return{mode:\"none-visible\",filter:null};if(r.length===e.subtypes.length)return{mode:\"all-visible\",filter:null};const i=e.fieldsIndex.get(e.subtypeField)?.name??e.subtypeField;return 1===r.length?{mode:\"in-use\",filter:`${i} = ${r.getItemAt(0)}`}:{mode:\"in-use\",filter:`${i} IN (${r.join(\", \")})`}}get floorFilter(){const{view:e,layer:t}=this;return e&&t?u({view:e,layer:t}):null}constructor(e){super(e),this.layer=null,this.snappingSource=null,this.rulesTable=null,this._valid=null}initialize(){if(!this.snappingSource||!this.layer)return void(this._valid=!1);const{layer:e,snappingSource:t}=this;if(\"refresh\"in e){const r=e;this.addHandles(r.on(\"refresh\",(()=>t.refresh())))}this.loadRules(),this.addHandles([i((()=>t.updating),(e=>t.layerSource.updating=e),l),i((()=>t.availability),(e=>t.layerSource.availability=e),l)])}getFetchCandidatesParameters(e,t,r){if(!this.valid)return[];const{layer:i,layerView:l,floorFilter:o,rulesTable:a,subtypeFilter:u}=this,y={distance:r,mode:this.view?.type??\"2d\",point:e,coordinateHelper:t.coordinateHelper,...h(),filter:l&&\"filter\"in l?l.filter:null};if(o&&(y.filter=m(y.filter,o)),\"not-in-use\"!==u.mode&&\"all-visible\"!==u.mode){if(\"none-visible\"===u.mode)return[];y.filter?y.filter.where=s(y.filter.where,u.mode):y.filter=new n({where:u.filter})}if(!this.attributeRulesEnabled)return[y];const f=t.feature,v=\"subtype-sublayer\"===f?.sourceLayer?.type?f.sourceLayer.parent:f?.sourceLayer;if(a&&f&&c(this.view?.map)&&(d(i)||p(i))&&(d(v)||p(v))&&this.view.map.utilityNetworks?.find((e=>e.isUtilityLayer(v)))){if(\"loaded\"!==a.loadStatus)return[];const e=[],t=i.layerId,r=a.getFeatureSQL(v,f)?.[t];if(!r)return[];const l=r.anyVertex;let s=r.endVertex;return s&&l&&s===l&&(s=\"\"),s&&e.push({...y,returnEdge:!1,vertexMode:\"ends\",filter:m(y.filter,s)}),l&&e.push({...y,returnEdge:has(\"snapping-include-edges-when-applying-any-vertex-rule\")??!1,vertexMode:\"all\",filter:m(y.filter,l)}),e}return[y]}async loadRules(){this._valid=null;const{layer:e,view:t,attributeRulesEnabled:i}=this;if(i&&e&&t&&c(t?.map)&&(d(e)||p(e)))try{await Promise.allSettled(t.map.utilityNetworks?.map((e=>e.load()))??[]);const r=t.map.utilityNetworks?.find((t=>t.isUtilityLayer(e)));r&&(this.rulesTable=await r.getRulesTable(),await(this.rulesTable?.load()))}catch(l){return this._valid=!1,void r.getLogger(\"esri.views.interactive.snapping.FeatureSnappingSourceInfo\").error(\"Failed to load rules table for snapping source\",e.title)}this._valid=!0}remove(){this.destroy()}destroy(){this.snappingSource?.destroy()}};function h(){return{returnEdge:!0,vertexMode:\"all\"}}function m(e,t){return null==e?new n({where:t}):e.where?new n({where:s(e.where,t)}):new n({where:t})}e([o({constructOnly:!0})],f.prototype,\"layer\",void 0),e([o({constructOnly:!0})],f.prototype,\"snappingSource\",void 0),e([o({constructOnly:!0})],f.prototype,\"view\",void 0),e([o({value:!1})],f.prototype,\"attributeRulesEnabled\",null),e([o()],f.prototype,\"layerView\",null),e([o()],f.prototype,\"rulesTable\",void 0),e([o()],f.prototype,\"valid\",null),e([o()],f.prototype,\"subtypeFilter\",null),e([o()],f.prototype,\"floorFilter\",null),e([o()],f.prototype,\"_valid\",void 0),f=e([a(\"esri.views.interactive.snapping.FeatureSnappingSourceInfo\")],f);export{f as FeatureSnappingSourceInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import{isSome as r}from\"../../../core/arrayUtils.js\";import{destroyHandle as a}from\"../../../core/handleUtils.js\";import\"../../../core/has.js\";import{mapCollectionAsync as n}from\"../../../core/mapCollectionUtils.js\";import{allSettledValues as s,throwIfAborted as o}from\"../../../core/promiseUtils.js\";import{watch as i,sync as c}from\"../../../core/reactiveUtils.js\";import{getMetersPerUnitForSR as u,getMetersPerVerticalUnitForSR as l}from\"../../../core/unitUtils.js\";import{property as p}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/Logger.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import{squaredDistance as m}from\"../../../core/libs/gl-matrix-2/math/vec2.js\";import{c as g,s as h}from\"../../../chunks/vec32.js\";import{create as S}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{getEpsilon as f}from\"../../../core/libs/gl-matrix-2/math/common.js\";import{UpdatingHandles as y}from\"../../../core/support/UpdatingHandles.js\";import{absoluteHeightElevationInfo as _}from\"../../../support/elevationInfoUtils.js\";import{VerticalHalfPlaneConstraint as v}from\"../sketch/constraints.js\";import{fromAnyMapPoint as w,asVec2 as j,markAsTarget as F}from\"../sketch/normalizedPoint.js\";import{FeatureSnappingSourceInfo as b}from\"./FeatureSnappingSourceInfo.js\";import{SnappingDomain as x}from\"./SnappingDomain.js\";import{sortCandidatesInPlace as C,screenDistance as R}from\"./snappingUtils.js\";import{DrapedEdgeSnappingCandidate as E}from\"./candidates/DrapedEdgeSnappingCandidate.js\";import{EdgeSnappingCandidate as M}from\"./candidates/EdgeSnappingCandidate.js\";import{FeatureSnappingCandidate as L}from\"./candidates/FeatureSnappingCandidate.js\";import{RightAngleSnappingCandidate as I,OtherVertexType as G}from\"./candidates/RightAngleSnappingCandidate.js\";import{vectorToScreenPoint as H}from\"../support/viewUtils.js\";let P=class extends t{get updating(){return this._snappingSources.some((e=>null==e?.valid||!0===e.valid&&!0===e.snappingSource?.updating))||this._updatingHandles.updating}constructor(e){super(e),this.options=null,this._domain=x.FEATURE,this._updatingHandles=new y,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}initialize(){const e=n((()=>this.options?._effectiveFeatureSources),((e,t)=>this._createSourceInfo(e,t)));this._snappingSources=e,this.addHandles([a(e),i((()=>({rulesEnabled:!!this.options?.attributeRulesEnabled,sources:this._snappingSources.filter(r)})),(({rulesEnabled:e,sources:t})=>{for(const r of t)r.attributeRulesEnabled=e}),c)])}destroy(){this._set(\"options\",null),this._updatingHandles.destroy()}async fetchCandidates(e,t,r,a){if(!(t&this._domain&&null!=this.options&&this.options.effectiveFeatureEnabled))return[];const n=[],i=this._computeScreenSizeDistanceParameters(e,r);for(const s of this._snappingSources){if(!s?.valid||!s.snappingSource?.layerSource?.enabled||s.layerView?.suspended)continue;const t=s.getFetchCandidatesParameters(e,r,i);for(const e of t)n.push(s.snappingSource.fetchCandidates(e,a).then((e=>e.filter((e=>!this._candidateIsExcluded(s.snappingSource,e,r.excludeFeature))))))}const c=(await s(n)).flat();return this._addRightAngleCandidates(c,e,i,r),o(a),C(e,c),c}_addRightAngleCandidates(e,t,r,a){const n=null!=a.vertexHandle?a.vertexHandle.rightEdge?.rightVertex?.pos:null!=a.editGeometryOperations&&\"polygon\"===a.editGeometryOperations.data.type?a.editGeometryOperations.data.components[0]?.getFirstVertex()?.pos:null,s=null!=a.vertexHandle?a.vertexHandle.leftEdge?.leftVertex?.pos:null!=a.editGeometryOperations?a.editGeometryOperations.data.components[0]?.getLastVertex()?.pos:null,{view:o}=this,i=w(n,o,a),c=w(s,o,a),u=e.length;for(let l=0;l<u;l++)this._addRightAngleCandidate(e[l],c,t,r,e),this._addRightAngleCandidate(e[l],i,t,r,e)}_addRightAngleCandidate(e,t,r,a,n){if(null==t||!U(e))return;const s=e.constraint.closestTo(t),o=(s[0]-r[0])/a.x,i=(s[1]-r[1])/a.y,{start:c,end:u}=e.constraint;if(o*o+i*i<=1){const r=m(j(s),j(c))>m(j(s),j(u))?c:u,a=new I({targetPoint:F(s),otherVertex:t,otherVertexType:G.NEXT,previousVertex:r,constraint:new v(t,s),objectId:e.objectId,isDraped:e.isDraped,domain:x.FEATURE});n.push(a)}}_computeScreenSizeDistanceParameters(e,t){let r=null!=this.options?this.options.distance*(\"touch\"===t.pointer?this.options.touchSensitivityMultiplier:1):0;return null==this.view?{x:r,y:r,z:r,distance:r}:\"2d\"===this.view.type?(r*=this.view.resolution,{x:r,y:r,z:r,distance:r}):this._computeScreenSizeDistanceParameters3D(e,r,this.view,t)}_computeScreenSizeDistanceParameters3D(e,t,r,a){const{spatialReference:n}=a;r.renderCoordsHelper.toRenderCoords(e,n,D);const s=r.state.camera.computeScreenPixelSizeAt(D),o=s*r.renderCoordsHelper.unitInMeters,i=o/u(n),c=o/l(n),p=t*i,d=t*c,m=H(e,n,_,r),g=m?z(m,e,i,0,0,r,a):0,h=m?z(m,e,0,i,0,r,a):0,S=m?z(m,e,0,0,c,r,a):0;return{x:0===g?0:p/g,y:0===h?0:p/h,z:0===S?0:d/S,distance:s*t}}_candidateIsExcluded(e,t,r){if(null==r)return!1;const a=this._getCandidateObjectId(t);if(null==a)return!1;const n=e.layerSource.layer;return\"graphics\"===n.type?r.uid===a:r.sourceLayer===n&&(!(!r.attributes||!(\"objectIdField\"in n))&&r.attributes[n.objectIdField]===a)}_getCandidateObjectId(e){return e instanceof L?e.objectId:null}async _createSourceInfo(e,t){const r=e.layer;r.loaded||(await r.load(),o(t));const{view:a}=this,n=await this._createFeatureSnappingSourceType(e);return o(t),new b(null==n?{}:{snappingSource:n,view:a,layer:r})}async _createFeatureSnappingSourceType(e){switch(e.layer.type){case\"feature\":case\"geojson\":case\"csv\":case\"oriented-imagery\":case\"subtype-group\":case\"wfs\":return this._createFeatureSnappingSourceFeatureLayer(e);case\"graphics\":return this._createFeatureSnappingSourceGraphicsLayer(e);case\"map-notes\":return this._createFeatureSnappingSourceMapNotesLayer(e);case\"scene\":case\"building-scene\":return this._createFeatureSnappingSourceSceneLayer(e)}return null}async _createFeatureSnappingSourceSceneLayer(e){const{view:t}=this;if(null==t||\"3d\"!==t.type)return null;return new((await this._getSourceModule(\"scene\")).SceneLayerSnappingSource)({layerSource:e,view:t})}async _createFeatureSnappingSourceFeatureLayer(e){switch(e.layer.source?.type){case\"feature-layer\":case\"oriented-imagery\":return new((await this._getSourceModule(\"featureService\")).FeatureServiceSnappingSource)({spatialReference:this.spatialReference,view:this.view,layerSource:e});case\"memory\":case\"csv\":case\"geojson\":case\"wfs\":if(\"mesh\"===e.layer.geometryType)return null;return new((await this._getSourceModule(\"featureCollection\")).FeatureCollectionSnappingSource)({layerSource:e,view:this.view})}return null}async _createFeatureSnappingSourceGraphicsLayer(e){return new((await this._getSourceModule(\"graphics\")).GraphicsSnappingSource)({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _createFeatureSnappingSourceMapNotesLayer(e){return new((await this._getSourceModule(\"notes\")).GraphicsSnappingSource)({getGraphicsLayers:()=>e.layer.sublayers?.toArray()??[],spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _getSourceModule(e){const t=this._sourceModules[e];if(null==t.loader){const t=this._loadSourceModule(e),r={module:null,loader:t};this._sourceModules[e]=r;const a=await t,n={module:a,loader:t};return this._sourceModules[e]=n,a}return null==t.module?t.loader:t.module}_loadSourceModule(e){const t=this._updatingHandles;switch(e){case\"featureService\":return t.addPromise(import(\"./featureSources/FeatureServiceSnappingSource.js\"));case\"featureCollection\":return t.addPromise(import(\"./featureSources/FeatureCollectionSnappingSource.js\"));case\"graphics\":case\"notes\":return t.addPromise(import(\"./featureSources/GraphicsSnappingSource.js\"));case\"scene\":return t.addPromise(import(\"./featureSources/SceneLayerSnappingSource.js\"))}}get test(){}};function U(e){return(e instanceof M||e instanceof E)&&!A(e)}function A({constraint:{start:e,end:t}}){const r=h(e,t),a=m(j(e),j(t));return r<f()||a/r<T}function z(e,t,r,a,n,s,{spatialReference:o}){const i=g(O,t);i[0]+=r,i[1]+=a,i[2]+=n;const c=H(i,o,_,s);return c?R(c,e):1/0}e([p({constructOnly:!0})],P.prototype,\"spatialReference\",void 0),e([p({constructOnly:!0})],P.prototype,\"view\",void 0),e([p()],P.prototype,\"options\",void 0),e([p({readOnly:!0})],P.prototype,\"updating\",null),e([p()],P.prototype,\"_snappingSources\",void 0),P=e([d(\"esri.views.interactive.snapping.FeatureSnappingEngine\")],P);const D=S(),O=S(),T=1e-4;export{P as FeatureSnappingEngine};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nfunction o(o){const n=o.layer;if(\"floorInfo\"in n&&n.floorInfo?.floorField&&\"floors\"in o.view){return l(o.view.floors,n.floorInfo.floorField)}return null}function n(o,n){return\"floorInfo\"in n&&n.floorInfo?.floorField?l(o,n.floorInfo.floorField):null}function l(o,n){if(!o?.length)return null;const l=o.filter((o=>\"\"!==o)).map((o=>`'${o}'`));return l.push(\"''\"),`${n} IN (${l.join(\",\")}) OR ${n} IS NULL`}export{o as getFloorFilterClause,n as getLayerFloorFilterClause};\n"],"names":["c","e","o","s","_s$createCollection","_s$createCollection2","r","createCollection","call","t","n","recycleItems","d","i","arguments","length","undefined","splice","processRemoved","forEach","m","use","push","register","addMany","l","a","_ref","added","start","removed","sync","onListenerRemove","items","onListenerAdd","addHandles","constructor","this","_originalToMapped","Map","_removedItemCandidates","Set","_garbageCollectionQueued","_this$_getItem","_getItem","markRemoved","add","_queueGarbageCollection","item","set","get","queueMicrotask","_garbageCollectCandidates","Array","from","clear","_garbageCollectIfRemoved","delete","destroy","f","attributeRulesEnabled","_set","loadRules","layerView","_this$view","view","allLayerViews","find","layer","valid","_valid","snappingSource","subtypeFilter","_e$subtypes","_e$fieldsIndex$get$na","_e$fieldsIndex$get","p","subtypes","mode","filter","layerSource","sublayerSources","_this$view2","enabled","visible","y","scale","effectiveScaleRange","minScale","maxScale","map","subtypeCode","fieldsIndex","subtypeField","name","concat","getItemAt","join","floorFilter","u","super","rulesTable","initialize","on","refresh","updating","availability","getFetchCandidatesParameters","_this$view$type","_this$view3","_f$sourceLayer","_this$view4","_this$view$map$utilit","_objectSpread","distance","type","point","coordinateHelper","returnEdge","vertexMode","where","feature","v","sourceLayer","parent","utilityNetworks","isUtilityLayer","_a$getFeatureSQL","_has","loadStatus","layerId","getFeatureSQL","anyVertex","endVertex","has","_t$map$utilityNetwork","_t$map$utilityNetwork2","_t$map$utilityNetwork3","_this$rulesTable","Promise","allSettled","load","getRulesTable","getLogger","error","title","remove","_this$snappingSource","constructOnly","prototype","value","P","_snappingSources","some","_e$snappingSource","_updatingHandles","options","_domain","x","FEATURE","_sourceModules","featureService","module","loader","featureCollection","graphics","notes","scene","async","g","promise","indexOf","h","_ref2","deleteCount","_this$options","_effectiveFeatureSources","_createSourceInfo","_this$options2","rulesEnabled","sources","fetchCandidates","effectiveFeatureEnabled","_computeScreenSizeDistanceParameters","_s$snappingSource","_s$layerView","suspended","then","_candidateIsExcluded","excludeFeature","flat","_addRightAngleCandidates","C","_a$vertexHandle$right","_a$editGeometryOperat","_a$vertexHandle$leftE","_a$editGeometryOperat2","vertexHandle","rightEdge","rightVertex","pos","editGeometryOperations","data","components","getFirstVertex","leftEdge","leftVertex","getLastVertex","w","_addRightAngleCandidate","M","E","constraint","end","j","T","A","U","closestTo","I","targetPoint","F","otherVertex","otherVertexType","G","NEXT","previousVertex","objectId","isDraped","domain","pointer","touchSensitivityMultiplier","z","resolution","_computeScreenSizeDistanceParameters3D","spatialReference","renderCoordsHelper","toRenderCoords","D","state","camera","computeScreenPixelSizeAt","unitInMeters","H","_","S","_getCandidateObjectId","uid","attributes","objectIdField","L","loaded","_createFeatureSnappingSourceType","b","_createFeatureSnappingSourceFeatureLayer","_createFeatureSnappingSourceGraphicsLayer","_createFeatureSnappingSourceMapNotesLayer","_createFeatureSnappingSourceSceneLayer","_getSourceModule","SceneLayerSnappingSource","_e$layer$source","source","FeatureServiceSnappingSource","geometryType","FeatureCollectionSnappingSource","GraphicsSnappingSource","getGraphicsLayers","_e$layer$sublayers$to","_e$layer$sublayers","sublayers","toArray","_loadSourceModule","addPromise","test","_ref3","O","R","readOnly","_n$floorInfo","floorInfo","floorField","floors","_n$floorInfo2"],"sourceRoot":""}