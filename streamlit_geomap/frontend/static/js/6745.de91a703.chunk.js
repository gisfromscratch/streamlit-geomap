"use strict";(self.webpackChunkstreamlit_geomap_frontend=self.webpackChunkstreamlit_geomap_frontend||[]).push([[6745],{45235:(e,t,n)=>{var a;n.d(t,{n:()=>a}),function(e){e[e.ETC1_RGB=0]="ETC1_RGB",e[e.ETC2_RGBA=1]="ETC2_RGBA",e[e.BC1_RGB=2]="BC1_RGB",e[e.BC3_RGBA=3]="BC3_RGBA",e[e.BC4_R=4]="BC4_R",e[e.BC5_RG=5]="BC5_RG",e[e.BC7_M6_RGB=6]="BC7_M6_RGB",e[e.BC7_M5_RGBA=7]="BC7_M5_RGBA",e[e.PVRTC1_4_RGB=8]="PVRTC1_4_RGB",e[e.PVRTC1_4_RGBA=9]="PVRTC1_4_RGBA",e[e.ASTC_4x4_RGBA=10]="ASTC_4x4_RGBA",e[e.ATC_RGB=11]="ATC_RGB",e[e.ATC_RGBA=12]="ATC_RGBA",e[e.FXT1_RGB=17]="FXT1_RGB",e[e.PVRTC2_4_RGB=18]="PVRTC2_4_RGB",e[e.PVRTC2_4_RGBA=19]="PVRTC2_4_RGBA",e[e.ETC2_EAC_R11=20]="ETC2_EAC_R11",e[e.ETC2_EAC_RG11=21]="ETC2_EAC_RG11",e[e.RGBA32=13]="RGBA32",e[e.RGB565=14]="RGB565",e[e.BGR565=15]="BGR565",e[e.RGBA4444=16]="RGBA4444"}(a||(a={}))},46745:(e,t,n)=>{n.r(t),n.d(t,{TextureCompressionWorkerOutput:()=>_,compress:()=>C,compressRGBADataToKTX2:()=>T,createTextureDataKTX2:()=>A,initializeBasisEncoder:()=>R,initializeDXTEncoder:()=>B});var a=n(28899);let r;var l=n(45235);let i;var s=n(93345);let o,u,c=null,d=null;class _{constructor(e,t){this.internalFormat=e,this.compressedTexture=t}}async function C(e){let t;if(t=e.data instanceof ImageBitmap?function(e){const t=new OffscreenCanvas(e.width,e.height),n=t.getContext("2d");return n.drawImage(e,0,0),n.getImageData(0,0,t.width,t.height).data}(e.data):function(e,t,n,a,r){const l=new Uint8ClampedArray(e).subarray(0,t*n*a);if(!r)return l;const i=new Uint8ClampedArray(l.length),s=t*a;for(let o=0;o<n;o++){const e=o*s,t=(n-o-1)*s;i.set(l.subarray(e,e+s),t)}return i}(e.data,e.width,e.height,e.components,e.needsFlip),e.hasS3TC){var n;d||await B();const l=new Uint8Array(t.length);if(null!==(n=d)&&void 0!==n&&n.encode(t,e.width,e.height,e.preMultiplyAlpha,l)){var a,r;const e=function(e,t){const n=new Int32Array(e.buffer,e.byteOffset,h);let a,r;switch(n[m]){case g:a=8,r=s.CQ.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case S:a=16,r=s.CQ.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case b:a=16,r=s.CQ.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return null}let l=1,i=n[w],o=n[p];(3&i||3&o)&&(i=i+3&-4,o=o+3&-4);const u=i,c=o;let d,_;n[f]&E&&!1!==t&&(l=Math.max(1,n[v]));let C=e.byteOffset+n[G]+4;const R=[];for(let s=0;s<l;++s)_=(i+3>>2)*(o+3>>2)*a,d=new Uint8Array(e.buffer,C,_),R.push(d),C+=_,i=Math.max(1,i>>1),o=Math.max(1,o>>1);return{textureData:{type:"compressed",levels:R},internalFormat:r,width:u,height:c}}(l,!0),t=[l.buffer];return{result:new _(null!==(a=null===e||void 0===e?void 0:e.internalFormat)&&void 0!==a?a:null,null!==(r=null===e||void 0===e?void 0:e.textureData)&&void 0!==r?r:null),transferList:t}}return{result:new _(null,null)}}if(e.hasETC){var l,i,o;if(c||await R(),e.preMultiplyAlpha&&!d&&await B(),e.preMultiplyAlpha){var u;const n=new Uint8ClampedArray(t.length);null!==(u=d)&&void 0!==u&&u.premultiply(new Uint8Array(t),e.width,e.height,n),t=n}const n=await T(t,e.width,e.height,e.hasMipmap),a=n?await A(n):null,r=(null===a||void 0===a||null===(l=a.compressedTexture)||void 0===l?void 0:l.levels.map(e=>e.buffer))||[];return{result:new _(null!==(i=null===a||void 0===a?void 0:a.internalFormat)&&void 0!==i?i:null,null!==(o=null===a||void 0===a?void 0:a.compressedTexture)&&void 0!==o?o:null),transferList:r}}return{result:new _(null,null)}}async function R(){c||(c=await(null!==o&&void 0!==o?o:(null!==r&&void 0!==r||(r=(async()=>{const e=await n.e(6378).then(n.bind(n,56378)),t=await e.default({locateFile:e=>(0,a.s)("esri/libs/basisu/".concat(e))});return t.initializeBasis(),t})()),o=r)))}async function B(){d||(d=await(null!==u&&void 0!==u?u:(null!==i&&void 0!==i||(i=(async()=>{const e=await n.e(3996).then(n.bind(n,53996));return await e.default({locateFile:e=>(0,a.s)("esri/libs/dxtEncoder/".concat(e))})})()),u=i)))}async function T(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:255,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];if(!c)return null;const o=new c.BasisEncoder;o.setPerceptual(!s),o.setCheckForAlpha(!0),o.setForceAlpha(!1),o.setRenormalize(s),o.setMipGen(a),o.setMipSRGB(!s),o.setCreateKTX2File(!0),o.setKTX2SRGBTransferFunc(!s),o.setQualityLevel(r),o.setCompressionLevel(l);const u=new Uint8Array(e.byteLength);o.setSliceSourceImage(0,new Uint8Array(e),t,n,i);const d=o.encode(u),_=new Uint8Array(u.buffer,0,d),C=new c.KTX2File(new Uint8Array(_));return C.isValid()?(o.delete(),_):(C.close(),C.delete(),o.delete(),null)}async function A(e){if(!c)return new _(null,null);const t=new c.KTX2File(new Uint8Array(e));t.startTranscoding();const[n,a]=t.getHasAlpha()?[l.n.ETC2_RGBA,s.CQ.COMPRESSED_RGBA8_ETC2_EAC]:[l.n.ETC1_RGB,s.CQ.COMPRESSED_RGB8_ETC2],r=t.getLevels(),i=[];for(let l=0;l<r;l++)i.push(new Uint8Array(t.getImageTranscodedSizeInBytes(l,0,0,n))),t.transcodeImage(i[l],l,0,0,n,0,-1,-1);return t.close(),t.delete(),{internalFormat:a,compressedTexture:{type:"compressed",levels:i}}}const h=31,G=1,f=2,p=3,w=4,v=7,m=21,E=131072;function y(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}const g=y("DXT1"),S=y("DXT3"),b=y("DXT5")}}]);
//# sourceMappingURL=6745.de91a703.chunk.js.map