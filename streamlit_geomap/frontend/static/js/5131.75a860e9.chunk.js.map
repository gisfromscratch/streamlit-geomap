{"version":3,"file":"static/js/5131.75a860e9.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/webgl-engine/effects/ssao/SSAOBlurTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/ssao/SSAOParameters.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/ssao/SSAOTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/ssao/SSAO.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/ssao/SSAONoiseData.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4sDrawUniform.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4sPassUniform.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/calculateUVZShadow.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ShadowmapFiltering.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DShadowBindUniform.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Normals.glsl.js","../node_modules/@arcgis/core/chunks/SSAOBlur.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/weather/SnowCover.glsl.js","../node_modules/@arcgis/core/chunks/RealisticTree.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/DiscardOrAdjustAlpha.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientLighting.glsl.js","../node_modules/@arcgis/core/chunks/SSAO.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexNormal.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/TextureTransformUV.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/DefaultMaterialTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/DefaultMaterialTechniqueConfiguration.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RealisticTreeTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultMaterial.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/BlackLevelLightSoftCompression.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl.js","../node_modules/@arcgis/core/chunks/DefaultMaterial.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ComputeNormalTexture.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../../core/shaderTechnique/ShaderTechnique.js\";import{S as o}from\"../../../../../chunks/SSAOBlur.glsl.js\";import{makePipelineState as s,defaultColorWrite as i}from\"../../../../webgl/renderState.js\";class l extends r{constructor(r,s){super(r,s,new e(o,(()=>import(\"../../shaders/SSAOBlur.glsl.js\"))))}initializePipeline(){return s({colorWrite:i})}}export{l as SSAOBlurTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{create as s}from\"../../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{NoParameters as e}from\"../../../../webgl/NoParameters.js\";class r extends e{constructor(){super(...arguments),this.projScale=1}}class t extends r{constructor(){super(...arguments),this.intensity=1}}class o extends e{}class c extends o{constructor(){super(...arguments),this.blurSize=s()}}export{c as BlurDrawParameters,r as BlurPassParameters,o as SSAODrawParameters,t as SSAOPassParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../../core/shaderTechnique/ShaderTechnique.js\";import{S as o}from\"../../../../../chunks/SSAO.glsl.js\";import{makePipelineState as s,defaultColorWrite as i}from\"../../../../webgl/renderState.js\";class t extends r{constructor(r,s){super(r,s,new e(o,(()=>import(\"../../shaders/SSAO.glsl.js\"))))}initializePipeline(){return s({colorWrite:i})}}export{t as SSAOTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{clamp as r}from\"../../../../../core/mathUtils.js\";import{disposeMaybe as s}from\"../../../../../core/maybe.js\";import{watch as t}from\"../../../../../core/reactiveUtils.js\";import{Milliseconds as i}from\"../../../../../core/time.js\";import{property as o}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as a}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{set as m}from\"../../../../../core/libs/gl-matrix-2/math/vec2.js\";import{InternalRenderCategory as n}from\"../../../webgl.js\";import c from\"../../../webgl/RenderNode.js\";import{ColorFormat as p}from\"../../core/FBOCacheFormats.js\";import{distanceFadeEnd as h,distanceFadeStart as u}from\"../../core/shaderLibrary/shading/ScreenSpaceConstants.js\";import{SSAOBlurTechnique as l}from\"./SSAOBlurTechnique.js\";import{noiseData as d}from\"./SSAONoiseData.js\";import{SSAOPassParameters as f,BlurDrawParameters as b}from\"./SSAOParameters.js\";import{SSAOTechnique as w}from\"./SSAOTechnique.js\";import{RenderRequestType as T}from\"../../lib/basicInterfaces.js\";import{g as _}from\"../../../../../chunks/SSAO.glsl.js\";import{TextureWrapMode as P,PixelFormat as S,DepthStencilAttachment as j,FramebufferBit as g}from\"../../../../webgl/enums.js\";import{Texture as x}from\"../../../../webgl/Texture.js\";import{TextureDescriptor as q}from\"../../../../webgl/TextureDescriptor.js\";const O=2;let A=class extends c{constructor(e){super(e),this.consumes={required:[\"normals\"]},this.produces=n.SSAO,this.isEnabled=()=>!1,this._enableTime=i(0),this._passParameters=new f,this._drawParameters=new b}initialize(){const e=Uint8Array.from(atob(d),(e=>e.charCodeAt(0))),r=new q;r.wrapMode=P.CLAMP_TO_EDGE,r.pixelFormat=S.RGB,r.wrapMode=P.REPEAT,r.hasMipmap=!0,r.width=32,r.height=32,this._passParameters.noiseTexture=new x(this.renderingContext,r,e),this.techniques.precompile(w),this.techniques.precompile(l),this.addHandles(t((()=>this.isEnabled()),(()=>this._enableTime=i(0))))}destroy(){this._passParameters.noiseTexture=s(this._passParameters.noiseTexture)}render(e){const s=e.find((({name:e})=>\"normals\"===e)),t=s?.getTexture(),o=s?.getTexture(j);if(!t||!o)return;const a=this.techniques.get(w),c=this.techniques.get(l);if(!a.compiled||!c.compiled)return this._enableTime=i(performance.now()),void this.requestRender(T.UPDATE);0===this._enableTime&&(this._enableTime=i(performance.now()));const d=this.renderingContext,f=this.view.qualitySettings.fadeDuration,b=this.bindParameters,P=b.camera,S=P.relativeElevation,x=r((h-S)/(h-u),0,1),q=f>0?Math.min(f,performance.now()-this._enableTime)/f:1,A=q*x;this._passParameters.normalTexture=t,this._passParameters.depthTexture=o,this._passParameters.projScale=1/P.computeScreenPixelSizeAtDist(1),this._passParameters.intensity=4*C/_(P)**6*A;const R=P.fullViewport[2],v=P.fullViewport[3],y=this.fboCache.acquire(R,v,\"ssao input\",p.RG8UNORM);d.bindFramebuffer(y.fbo),d.setViewport(0,0,R,v),d.bindTechnique(a,b,this._passParameters,this._drawParameters),d.screen.draw();const E=Math.round(R/O),M=Math.round(v/O),U=this.fboCache.acquire(E,M,\"ssao blur\",p.R8UNORM);d.bindFramebuffer(U.fbo),this._drawParameters.colorTexture=y.getTexture(),m(this._drawParameters.blurSize,0,O/v),d.bindTechnique(c,b,this._passParameters,this._drawParameters),d.setViewport(0,0,E,M),d.screen.draw(),y.release();const V=this.fboCache.acquire(E,M,n.SSAO,p.R8UNORM);return d.bindFramebuffer(V.fbo),d.setViewport(0,0,R,v),d.setClearColor(1,1,1,0),d.clear(g.COLOR),this._drawParameters.colorTexture=U.getTexture(),m(this._drawParameters.blurSize,O/R,0),d.bindTechnique(c,b,this._passParameters,this._drawParameters),d.setViewport(0,0,E,M),d.screen.draw(),d.setViewport4fv(P.fullViewport),U.release(),q<1&&this.requestRender(T.UPDATE),V}};e([o()],A.prototype,\"consumes\",void 0),e([o()],A.prototype,\"produces\",void 0),e([o({constructOnly:!0})],A.prototype,\"isEnabled\",void 0),A=e([a(\"esri.views.3d.webgl-engine.effects.ssao.SSAO\")],A);const C=.5;export{A as SSAO,O as blurSizePixels};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nconst e=\"eXKEvZaUc66cjIKElE1jlJ6MjJ6Ufkl+jn2fcXp5jBx7c6KEflSGiXuXeW6OWs+tfqZ2Yot2Y7Zzfo2BhniEj3xoiXuXj4eGZpqEaHKDWjSMe7palFlzc3BziYOGlFVzg6Zzg7CUY5JrjFF7eYJ4jIKEcyyEonSXe7qUfqZ7j3xofqZ2c4R5lFZ5Y0WUbppoe1l2cIh2ezyUho+BcHN2cG6DbpqJhqp2e1GcezhrdldzjFGUcyxjc3aRjDyEc1h7Sl17c6aMjH92pb6Mjpd4dnqBjMOEhqZleIOBYzB7gYx+fnqGjJuEkWlwnCx7fGl+c4hjfGyRe5qMlNOMfnqGhIWHc6OMi4GDc6aMfqZuc6aMzqJzlKZ+lJ6Me3qRfoFue0WUhoR5UraEa6qMkXiPjMOMlJOGe7JrUqKMjK6MeYRzdod+Sl17boiPc6qEeYBlcIh2c1WEe7GDiWCDa0WMjEmMdod+Y0WcdntzhmN8WjyMjKJjiXtzgYxYaGd+a89zlEV7e2GJfnd+lF1rcK5zc4p5cHuBhL6EcXp5eYB7fnh8iX6HjIKEeaxuiYOGc66RfG2Ja5hzjlGMjEmMe9OEgXuPfHyGhPeEdl6JY02McGuMfnqGhFiMa3WJfnx2l4hwcG1uhmN8c0WMc39og1GBbrCEjE2EZY+JcIh2cIuGhIWHe0mEhIVrc09+gY5+eYBlnCyMhGCDl3drfmmMgX15aGd+gYx+fnuRfnhzY1SMsluJfnd+hm98WtNrcIuGh4SEj0qPdkqOjFF7jNNjdnqBgaqUjMt7boeBhnZ4jDR7c5pze4GGjEFrhLqMjHyMc0mUhKZze4WEa117kWlwbpqJjHZ2eX2Bc09zeId+e0V7WlF7jHJ2l72BfId8l3eBgXyBe897jGl7c66cgW+Xc76EjKNbgaSEjGx4fId8jFFjgZB8cG6DhlFziZhrcIh2fH6HgUqBgXiPY8dahGFzjEmMhEFre2dxhoBzc5SGfleGe6alc7aUeYBlhKqUdlp+cH5za4OEczxza0Gcc4J2jHZ5iXuXjH2Jh5yRjH2JcFx+hImBjH+MpddCl3dreZeJjIt8ZW18bm1zjoSEeIOBlF9oh3N7hlqBY4+UeYFwhLJjeYFwaGd+gUqBYxiEYot2fqZ2ondzhL6EYyiEY02Ea0VjgZB8doaGjHxoc66cjEGEiXuXiXWMiZhreHx8frGMe75rY02Ec5pzfnhzlEp4a3VzjM+EhFFza3mUY7Zza1V5e2iMfGyRcziEhDyEkXZ2Y4OBnCx7g5t2eyBjgV6EhEFrcIh2dod+c4Z+nJ5zjm15jEmUeYxijJp7nL6clIpjhoR5WrZraGd+fnuRa6pzlIiMg6ZzfHx5foh+eX1ufnB5eX1ufnB5aJt7UqKMjIh+e3aBfm5lbYSBhGFze6J4c39oc0mUc4Z+e0V7fKFVe0WEdoaGY02Ec4Z+Y02EZYWBfH6HgU1+gY5+hIWUgW+XjJ57ebWRhFVScHuBfJ6PhBx7WqJzlM+Ujpd4gHZziX6HjHmEgZN+lJt5boiPe2GJgX+GjIGJgHZzeaxufnB5hF2JtdN7jJ57hp57hK6ElFVzg6ZzbmiEbndzhIWHe3uJfoFue3qRhJd2j3xoc65zlE1jc3p8lE1jhniEgXJ7e657vZaUc3qBh52BhIF4aHKDa9drgY5+c52GWqZzbpqJe8tjnM+UhIeMfo2BfGl+hG1zSmmMjKJjZVaGgX15c1lze0mEp4OHa3mUhIWHhDyclJ6MeYOJkXiPc0VzhFiMlKaEboSJa5Jze41re3qRhn+HZYWBe0mEc4p5fnORbox5lEp4hGFjhGGEjJuEc1WEhLZjeHeGa7KlfHx2hLaMeX1ugY5+hIWHhKGPjMN7c1WEho1zhoBzZYx7fnhzlJt5exyUhFFziXtzfmmMa6qMYyiEiXxweV12kZSMeWqXSl17fnhzxmmMrVGEe1mcc4p5eHeGjK6MgY5+doaGa6pzlGV7g1qBh4KHkXiPeW6OaKqafqZ2eXZ5e1V7jGd7boSJc3BzhJd2e0mcYot2h1RoY8dahK6EQmWEWjx7e1l2lL6UgXyBdnR4eU9zc0VreX1umqaBhld7fo2Bc6KEc5Z+hDyEcIeBWtNrfHyGe5qMhMuMe5qMhEGEbVVupcNzg3aHhIF4boeBe0mEdlptc39ofFl5Y8uUlJOGiYt2UmGEcyxjjGx4jFF7a657ZYWBnElzhp57iXtrgZN+tfOEhIOBjE2HgU1+e8tjjKNbiWCDhE15gUqBgYN7fnqGc66ce9d7iYSBj0qPcG6DnGGcT3eGa6qMZY+JlIiMl4hwc3aRdnqBlGV7eHJ2hLZjfnuRhDyEeX6MSk17g6Z+c6aUjHmEhIF4gXyBc76EZW18fGl+fkl+jCxrhoVwhDyUhIqGlL2DlI6EhJd2tdN7eYORhEGMa2Faa6pzc3Bzc4R5lIRznM+UY9eMhDycc5Z+c4p5c4iGY117pb6MgXuPrbJafnx2eYOJeXZ5e657hDyEcziElKZjfoB5eHeGj4WRhGGEe6KGeX1utTStc76EhFGJnCyMa5hzfH6HnNeceYB7hmN8gYuMhIVrczSMgYF8h3N7c5pza5hzjJqEYIRdgYuMlL2DeYRzhGGEeX1uhLaEc4iGeZ1zdl6JhrVteX6Me2iMfm5lWqJzSpqEa6pzdnmchHx2c6OMhNdrhoR5g3aHczxzeW52gV6Ejm15frGMc0Vzc4Z+l3drfniJe+9rWq5rlF1rhGGEhoVwe9OEfoh+e7pac09+c3qBY0lrhDycdnp2lJ6MiYOGhGCDc3aRlL2DlJt5doaGdnp2gYF8gWeOjF2Uc4R5c5Z+jEmMe7KEc4mEeYJ4dmyBe0mcgXiPbqJ7eYB7fmGGiYSJjICGlF1reZ2PnElzbpqJfH6Hc39oe4WEc5eJhK6EhqyJc3qBgZB8c09+hEmEaHKDhFGJc5SGiXWMUpaEa89zc6OMnCyMiXtrho+Be5qMc7KEjJ57dmN+hKGPjICGbmiEe7prdod+hGCDdnmchBx7eX6MkXZ2hGGEa657hm98jFFjY5JreYOJgY2EjHZ2a295Y3FajJ6Mc1J+YzB7e4WBjF2Uc4R5eV12gYxzg1qBeId+c9OUc5pzjFFjgY5+hFiMlIaPhoR5lIpjjIKBlNdSe7KEeX2BfrGMhIqGc65zjE2UhK6EklZ+QmWEeziMWqZza3VzdnR4foh+gYF8n3iJiZhrnKp7gYF8eId+lJ6Me1lrcIuGjKJjhmN8c66MjFF7a6prjJ6UnJ5zezyUfruRWlF7nI5zfHyGe657h4SEe8tjhBx7jFFjc09+c39ojICMeZeJeXt+YzRzjHZ2c0WEcIeBeXZ5onSXkVR+gYJ+eYFwdldzgYF7eX2BjJ6UiXuXlE1jh4SEe1mchLJjc4Z+hqZ7eXZ5bm1zlL6Ue5p7iWeGhKqUY5pzjKJjcIeBe8t7gXyBYIRdlEp4a3mGnK6EfmmMZpqEfFl5gYxzjKZuhGFjhoKGhHx2fnx2eXuMe3aBiWeGvbKMe6KGa5hzYzB7gZOBlGV7hmN8hqZlYot2Y117a6pzc6KEfId8foB5rctrfneJfJ6PcHN2hFiMc5pzjH92c0VzgY2EcElzdmCBlFVzg1GBc65zY4OBboeBcHiBeYJ4ewxzfHx5lIRzlEmEnLKEbk1zfJ6PhmN8eYBljBiEnMOEiXxwezyUcIeBe76EdsKEeX2BdnR4jGWUrXWMjGd7fkl+j4WRlEGMa5Jzho+BhDyEfnqMeXt+g3aHlE1jczClhNN7ZW18eHx8hGFjZW18iXWMjKJjhH57gYuMcIuGWjyMe4ZtjJuExmmMj4WRdntzi4GDhFFzYIRdnGGcjJp7Y0F7e4WEkbCGiX57fnSHa657a6prhBCMe3Z+SmmMjH92eHJ2hK6EY1FzexhrvbKMnI5za4OEfnd+eXuMhImBe897hLaMjN+EfG+BeIOBhF1+eZeJi4GDkXZ2eXKEgZ6Ejpd4c2GHa1V5e5KUfqZuhCx7jKp7lLZrg11+hHx2hFWUoot2nI5zgbh5mo9zvZaUe3qRbqKMfqZ2kbCGhFiM\";export{e as noiseData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/glsl.js\";import{Texture2DBindUniform as s}from\"../../shaderModules/Texture2DBindUniform.js\";import{blurSizePixels as r}from\"../../../effects/ssao/SSAO.js\";function t(t,o){o.receiveAmbientOcclusion?(t.uniforms.add(new s(\"ssaoTex\",(e=>e.ssao?.getTexture()))),t.constants.add(\"blurSizePixelsInverse\",\"float\",1/r),t.code.add(e`float evaluateAmbientOcclusionInverse() {\nvec2 ssaoTextureSizeInverse = 1.0 / vec2(textureSize(ssaoTex, 0));\nreturn texture(ssaoTex, gl_FragCoord.xy * blurSizePixelsInverse * ssaoTextureSizeInverse).r;\n}\nfloat evaluateAmbientOcclusion() {\nreturn 1.0 - evaluateAmbientOcclusionInverse();\n}`)):t.code.add(e`float evaluateAmbientOcclusionInverse() { return 1.0; }\nfloat evaluateAmbientOcclusion() { return 0.0; }`)}export{t as EvaluateAmbientOcclusion};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{BindType as r}from\"../../../../webgl/BindType.js\";import{Uniform as o}from\"../../../../webgl/Uniform.js\";class t extends o{constructor(o,t,e){super(o,\"mat4\",r.Draw,((r,e,s,m)=>r.setUniformMatrix4fv(o,t(e,s,m))),e)}}export{t as Matrix4sDrawUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{BindType as r}from\"../../../../webgl/BindType.js\";import{Uniform as s}from\"../../../../webgl/Uniform.js\";class o extends s{constructor(s,o,t){super(s,\"mat4\",r.Pass,((r,t,e)=>r.setUniformMatrix4fv(s,o(t,e))),t)}}export{o as Matrix4sPassUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{create as a}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{Float4BindUniform as e}from\"../../shaderModules/Float4BindUniform.js\";import{glsl as o}from\"../../shaderModules/glsl.js\";import{IntegerBindUniform as s}from\"../../shaderModules/IntegerBindUniform.js\";import{Matrix4sDrawUniform as i}from\"../../shaderModules/Matrix4sDrawUniform.js\";import{Matrix4sPassUniform as t}from\"../../shaderModules/Matrix4sPassUniform.js\";import{NoParameters as r}from\"../../../../../webgl/NoParameters.js\";class d extends r{constructor(){super(...arguments),this.origin=a()}}function c(a){a.fragment.uniforms.add(new t(\"shadowMapMatrix\",((a,e)=>e.shadowMap.getShadowMapMatrices(a.origin)),4)),l(a)}function n(a){a.fragment.uniforms.add(new i(\"shadowMapMatrix\",((a,e)=>e.shadowMap.getShadowMapMatrices(a.origin)),4)),l(a)}function l(a){const{fragment:i}=a;i.uniforms.add(new e(\"cascadeDistances\",(a=>a.shadowMap.cascadeDistances)),new s(\"numCascades\",(a=>a.shadowMap.numCascades))),i.code.add(o`const vec3 invalidShadowmapUVZ = vec3(0.0, 0.0, -1.0);\nvec3 lightSpacePosition(vec3 _vpos, mat4 mat) {\nvec4 lv = mat * vec4(_vpos, 1.0);\nlv.xy /= lv.w;\nreturn 0.5 * lv.xyz + vec3(0.5);\n}\nvec2 cascadeCoordinates(int i, ivec2 textureSize, vec3 lvpos) {\nfloat xScale = float(textureSize.y) / float(textureSize.x);\nreturn vec2((float(i) + lvpos.x) * xScale, lvpos.y);\n}\nvec3 calculateUVZShadow(in vec3 _worldPos, in float _linearDepth, in ivec2 shadowMapSize) {\nint i = _linearDepth < cascadeDistances[1] ? 0 : _linearDepth < cascadeDistances[2] ? 1 : _linearDepth < cascadeDistances[3] ? 2 : 3;\nif (i >= numCascades) {\nreturn invalidShadowmapUVZ;\n}\nmat4 shadowMatrix = i == 0 ? shadowMapMatrix[0] : i == 1 ? shadowMapMatrix[1] : i == 2 ? shadowMapMatrix[2] : shadowMapMatrix[3];\nvec3 lvpos = lightSpacePosition(_worldPos, shadowMatrix);\nif (lvpos.z >= 1.0 || lvpos.x < 0.0 || lvpos.x > 1.0 || lvpos.y < 0.0 || lvpos.y > 1.0) {\nreturn invalidShadowmapUVZ;\n}\nvec2 uvShadow = cascadeCoordinates(i, shadowMapSize, lvpos);\nreturn vec3(uvShadow, lvpos.z);\n}`)}export{d as ReadShadowMapOrigin,n as calculateUVZShadowDraw,c as calculateUVZShadowPass};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{ReadShadowMapOrigin as a}from\"./calculateUVZShadow.glsl.js\";import{glsl as o}from\"../../shaderModules/glsl.js\";class d extends a{}function e(a){a.fragment.code.add(o`float readShadowMapUVZ(vec3 uvzShadow, sampler2DShadow _shadowMap) {\nreturn texture(_shadowMap, uvzShadow);\n}`)}export{d as ReadShadowMapDrawParameters,e as ShadowmapFiltering};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{BindType as r}from\"../../../../webgl/BindType.js\";import{Uniform as e}from\"../../../../webgl/Uniform.js\";class o extends e{constructor(e,o){super(e,\"sampler2DShadow\",r.Bind,((r,s)=>r.bindTexture(e,o(s))))}}export{o as Texture2DShadowBindUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{create as o}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{calculateUVZShadowPass as e,calculateUVZShadowDraw as a,ReadShadowMapOrigin as r}from\"./calculateUVZShadow.glsl.js\";import{ShadowmapFiltering as s}from\"./ShadowmapFiltering.glsl.js\";import{glsl as d}from\"../../shaderModules/glsl.js\";import{Texture2DShadowBindUniform as t}from\"../../shaderModules/Texture2DShadowBindUniform.js\";import{NoParameters as i}from\"../../../../../webgl/NoParameters.js\";class l extends r{}class n extends i{constructor(){super(...arguments),this.origin=o()}}function c(o,a){a.receiveShadows&&(o.include(e),u(o))}function h(o,e){e.receiveShadows&&(o.include(a),u(o))}function u(o){o.include(s);const{fragment:e}=o;e.uniforms.add(new t(\"shadowMap\",(o=>o.shadowMap.depthTexture))),e.code.add(d`float readShadowMap(const in vec3 _worldPos, float _linearDepth) {\nvec3 uvzShadow = calculateUVZShadow(_worldPos, _linearDepth, textureSize(shadowMap,0));\nif (uvzShadow.z < 0.0) {\nreturn 0.0;\n}\nreturn readShadowMapUVZ(uvzShadow, shadowMap);\n}`)}export{h as ReadShadowMapDraw,l as ReadShadowMapDrawParameters,c as ReadShadowMapPass,n as ReadShadowMapPassParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{addNearFar as e}from\"../ForwardLinearDepth.glsl.js\";import{ShaderOutput as o}from\"../ShaderOutput.js\";import{SliceDraw as r}from\"../Slice.glsl.js\";import{Transform as t}from\"../Transform.glsl.js\";import{NormalAttribute as i,NormalType as a}from\"../attributes/NormalAttribute.glsl.js\";import{ObjectAndLayerIdColor as s}from\"../attributes/ObjectAndLayerIdColor.glsl.js\";import{TextureCoordinateAttribute as l}from\"../attributes/TextureCoordinateAttribute.glsl.js\";import{VertexNormal as d}from\"../attributes/VertexNormal.glsl.js\";import{OutputDepth as n}from\"../output/OutputDepth.glsl.js\";import{OutputHighlight as c}from\"../output/OutputHighlight.glsl.js\";import{VisualVariables as u}from\"../shading/VisualVariables.glsl.js\";import{DiscardOrAdjustAlphaPass as p}from\"../util/DiscardOrAdjustAlpha.glsl.js\";import{addProjViewLocalOrigin as m}from\"../util/View.glsl.js\";import{glsl as v,If as g}from\"../../shaderModules/glsl.js\";import{Texture2DPassUniform as f}from\"../../shaderModules/Texture2DPassUniform.js\";import{AlphaDiscardMode as x}from\"../../../lib/basicInterfaces.js\";function h(h,O){const{vertex:j,fragment:w,varyings:b}=h,{hasColorTexture:C,alphaDiscardMode:V}=O,A=C&&V!==x.Opaque,{output:S,normalType:y,hasColorTextureTransform:P}=O;switch(S){case o.Depth:m(j,O),h.include(t,O),w.include(r,O),h.include(l,O),A&&w.uniforms.add(new f(\"tex\",(e=>e.texture))),j.main.add(v`vpos = getVertexInLocalOriginSpace();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPosition(proj, view, vpos);\nforwardTextureCoordinates();`),h.include(p,O),w.main.add(v`\n        discardBySlice(vpos);\n        ${g(A,v`vec4 texColor = texture(tex, ${P?\"colorUV\":\"vuv0\"});\n                discardOrAdjustAlpha(texColor);`)}`);break;case o.Shadow:case o.ShadowHighlight:case o.ShadowExcludeHighlight:case o.ViewshedShadow:case o.ObjectAndLayerIdColor:m(j,O),h.include(t,O),h.include(l,O),h.include(u,O),h.include(n,O),w.include(r,O),h.include(s,O),e(h),b.add(\"depth\",\"float\",{invariant:!0}),A&&w.uniforms.add(new f(\"tex\",(e=>e.texture))),j.main.add(v`vpos = getVertexInLocalOriginSpace();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPositionWithDepth(proj, view, vpos, nearFar, depth);\nforwardTextureCoordinates();\nforwardObjectAndLayerIdColor();`),h.include(p,O),w.main.add(v`\n        discardBySlice(vpos);\n        ${g(A,v`vec4 texColor = texture(tex, ${P?\"colorUV\":\"vuv0\"});\n                discardOrAdjustAlpha(texColor);`)}\n        ${S===o.ObjectAndLayerIdColor?v`outputObjectAndLayerIdColor();`:v`outputDepth(depth);`}`);break;case o.Normal:{m(j,O),h.include(t,O),h.include(i,O),h.include(d,O),h.include(l,O),h.include(u,O),A&&w.uniforms.add(new f(\"tex\",(e=>e.texture))),y===a.ScreenDerivative&&b.add(\"vPositionView\",\"vec3\",{invariant:!0});const e=y===a.Attribute||y===a.Compressed;j.main.add(v`\n        vpos = getVertexInLocalOriginSpace();\n        ${e?v`vNormalWorld = dpNormalView(vvLocalNormal(normalModel()));`:v`vPositionView = (view * vec4(vpos, 1.0)).xyz;`}\n        vpos = subtractOrigin(vpos);\n        vpos = addVerticalOffset(vpos, localOrigin);\n        gl_Position = transformPosition(proj, view, vpos);\n        forwardTextureCoordinates();`),w.include(r,O),h.include(p,O),w.main.add(v`\n        discardBySlice(vpos);\n        ${g(A,v`vec4 texColor = texture(tex, ${P?\"colorUV\":\"vuv0\"});\n                discardOrAdjustAlpha(texColor);`)}\n\n        ${y===a.ScreenDerivative?v`vec3 normal = screenDerivativeNormal(vPositionView);`:v`vec3 normal = normalize(vNormalWorld);\n                    if (gl_FrontFacing == false){\n                      normal = -normal;\n                    }`}\n        fragColor = vec4(0.5 + 0.5 * normal, 1.0);`);break}case o.Highlight:m(j,O),h.include(t,O),h.include(l,O),h.include(u,O),A&&w.uniforms.add(new f(\"tex\",(e=>e.texture))),j.main.add(v`vpos = getVertexInLocalOriginSpace();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPosition(proj, view, vpos);\nforwardTextureCoordinates();`),w.include(r,O),h.include(p,O),h.include(c,O),w.main.add(v`\n        discardBySlice(vpos);\n        ${g(A,v`vec4 texColor = texture(tex, ${P?\"colorUV\":\"vuv0\"});\n                discardOrAdjustAlpha(texColor);`)}\n        calculateOcclusionAndOutputHighlight();`)}}export{h as DefaultMaterialAuxiliaryPasses};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{DecodeSymbolColor as o}from\"../../../collections/Component/Material/shader/DecodeSymbolColor.glsl.js\";import{glsl as r}from\"../../shaderModules/glsl.js\";import{IntegerPassUniform as e}from\"../../shaderModules/IntegerPassUniform.js\";import{VertexAttribute as l}from\"../../../lib/VertexAttribute.js\";import{colorMixModes as d}from\"../../../materials/internal/MaterialUtil.js\";function i(i,t){t.hasSymbolColors?(i.include(o),i.attributes.add(l.SYMBOLCOLOR,\"vec4\"),i.varyings.add(\"colorMixMode\",\"mediump float\"),i.vertex.code.add(r`int symbolColorMixMode;\nvec4 getSymbolColor() {\nreturn decodeSymbolColor(symbolColor, symbolColorMixMode) * 0.003921568627451;\n}\nvoid forwardColorMixMode() {\ncolorMixMode = float(symbolColorMixMode) + 0.5;\n}`)):(i.fragment.uniforms.add(new e(\"colorMixMode\",(o=>d[o.colorMixMode]))),i.vertex.code.add(r`vec4 getSymbolColor() { return vec4(1.0); }\nvoid forwardColorMixMode() {}`))}export{i as SymbolColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{neverReached as a}from\"../../../../../../core/compilerUtils.js\";import{glsl as r}from\"../../shaderModules/glsl.js\";function e(e,o){const n=e.fragment;switch(n.code.add(r`struct ShadingNormalParameters {\nvec3 normalView;\nvec3 viewDirection;\n} shadingParams;`),o.doubleSidedMode){case i.None:n.code.add(r`vec3 shadingNormal(ShadingNormalParameters params) {\nreturn normalize(params.normalView);\n}`);break;case i.View:n.code.add(r`vec3 shadingNormal(ShadingNormalParameters params) {\nreturn dot(params.normalView, params.viewDirection) > 0.0 ? normalize(-params.normalView) : normalize(params.normalView);\n}`);break;case i.WindingOrder:n.code.add(r`vec3 shadingNormal(ShadingNormalParameters params) {\nreturn gl_FrontFacing ? normalize(params.normalView) : normalize(-params.normalView);\n}`);break;default:a(o.doubleSidedMode);case i.COUNT:}}var i;!function(a){a[a.None=0]=\"None\",a[a.View=1]=\"View\",a[a.WindingOrder=2]=\"WindingOrder\",a[a.COUNT=3]=\"COUNT\"}(i||(i={}));export{e as Normals,i as NormalsDoubleSidedMode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{ScreenSpacePass as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{ReadDepth as r}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl.js\";import{Float2DrawUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/Float2DrawUniform.js\";import{FloatPassUniform as o}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as a}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{Texture2DDrawUniform as l}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform.js\";import{Texture2DPassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{ShaderBuilder as s}from\"../views/webgl/ShaderBuilder.js\";const d=4;function i(){const i=new s,f=i.fragment;i.include(e);const u=(d+1)/2,c=1/(2*u*u);return f.include(r),f.uniforms.add(new n(\"depthMap\",(e=>e.depthTexture)),new l(\"tex\",(e=>e.colorTexture)),new t(\"blurSize\",(e=>e.blurSize)),new o(\"projScale\",((e,r)=>{const t=r.camera.distance;return t>5e4?Math.max(0,e.projScale-(t-5e4)):e.projScale}))),f.code.add(a`\n    void blurFunction(vec2 uv, float r, float center_d, float sharpness, inout float wTotal, inout float bTotal) {\n      float c = texture(tex, uv).r;\n      float d = linearDepthFromTexture(depthMap, uv);\n\n      float ddiff = d - center_d;\n\n      float w = exp(-r * r * ${a.float(c)} - ddiff * ddiff * sharpness);\n      wTotal += w;\n      bTotal += w * c;\n    }\n  `),i.outputs.add(\"fragBlur\",\"float\"),f.main.add(a`\n    float b = 0.0;\n    float w_total = 0.0;\n\n    float center_d = linearDepthFromTexture(depthMap, uv);\n\n    float sharpness = -0.05 * projScale / center_d;\n    for (int r = -${a.int(d)}; r <= ${a.int(d)}; ++r) {\n      float rf = float(r);\n      vec2 uvOffset = uv + rf * blurSize;\n      blurFunction(uvOffset, rf, center_d, sharpness, w_total, b);\n    }\n    fragBlur = b / w_total;`),i}const f=Object.freeze(Object.defineProperty({__proto__:null,build:i},Symbol.toStringTag,{value:\"Module\"}));export{f as S,i as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../core/shaderModules/glsl.js\";function r(r,e){e.snowCover&&(r.code.add(o`float getSnow(vec3 normal, vec3 normalGround) {\nreturn smoothstep(0.5, 0.55, dot(normal, normalGround));\n}`),r.code.add(o`vec3 applySnowToMRR(vec3 mrr, float snow) {\nreturn mix(mrr, vec3(0.0, 1.0, 0.04), snow);\n}\nvec4 snowCoverForEmissions(vec4 emission, float snow) {\nreturn mix(emission, vec4(0.0), snow);\n}`))}export{r as SnowCover};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{ForwardLinearDepth as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js\";import{Offset as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js\";import{isColorOrColorEmission as r}from\"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{SliceDraw as i}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{InstancedDoublePrecision as l}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js\";import{NormalAttribute as t}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{SymbolColor as s}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js\";import{TextureCoordinateAttribute as n}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{VertexColor as d}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js\";import{VerticalOffset as c}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl.js\";import{DefaultMaterialAuxiliaryPasses as g}from\"../views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js\";import{EvaluateAmbientOcclusion as m}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js\";import{EvaluateSceneLighting as v,addAmbientBoostFactor as b,addLightingGlobalFactor as w}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl.js\";import{addMainLightDirection as p,addMainLightIntensity as h}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js\";import{PhysicallyBasedRendering as u}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js\";import{PBRMode as f,PhysicallyBasedRenderingParameters as x}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{ReadShadowMapPass as y,ReadShadowMapDraw as C}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{terrainDepthTest as L}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js\";import{VisualVariables as j}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js\";import{DiscardOrAdjustAlphaPass as O}from\"../views/3d/webgl-engine/core/shaderLibrary/util/DiscardOrAdjustAlpha.glsl.js\";import{MixExternalColor as M}from\"../views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js\";import{addProjViewLocalOrigin as P,addCameraPosition as S}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float3PassUniform as A}from\"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";import{Float4PassUniform as E}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatPassUniform as D}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{If as F,glsl as $}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{Texture2DPassUniform as N}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{VertexAttribute as I}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";import{outputColorHighlightOID as T}from\"../views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl.js\";import{ShaderBuilder as V}from\"../views/webgl/ShaderBuilder.js\";import{alphaCutoff as B}from\"../webscene/support/AlphaCutoff.js\";function R(R){const _=new V,{attributes:z,vertex:k,fragment:G,varyings:U}=_,{output:W,offsetBackfaces:H,instancedColor:q,pbrMode:J,snowCover:K,spherical:Q,hasBloom:X}=R,Y=J===f.Normal||J===f.Schematic;if(P(k,R),z.add(I.POSITION,\"vec3\"),U.add(\"vpos\",\"vec3\",{invariant:!0}),_.include(j,R),_.include(l,R),_.include(c,R),_.include(L,R),r(W)&&(S(_.vertex,R),_.include(t,R),_.include(a,R),H&&_.include(o),q&&_.attributes.add(I.INSTANCECOLOR,\"vec4\"),U.add(\"vNormalWorld\",\"vec3\"),U.add(\"localvpos\",\"vec3\",{invariant:!0}),_.include(n,R),_.include(e,R),_.include(s,R),_.include(d,R),k.uniforms.add(new E(\"externalColor\",(e=>e.externalColor))),U.add(\"vcolorExt\",\"vec4\"),k.main.add($`\n      forwardNormalizedVertexColor();\n      vcolorExt = externalColor;\n      ${F(q,\"vcolorExt *= instanceColor * 0.003921568627451;\")}\n      vcolorExt *= vvColor();\n      vcolorExt *= getSymbolColor();\n      forwardColorMixMode();\n\n      bool alphaCut = vcolorExt.a < ${$.float(B)};\n      vpos = getVertexInLocalOriginSpace();\n      localvpos = vpos - view[3].xyz;\n      vpos = subtractOrigin(vpos);\n      vNormalWorld = dpNormal(vvLocalNormal(normalModel()));\n      vpos = addVerticalOffset(vpos, localOrigin);\n      vec4 basePosition = transformPosition(proj, view, vpos);\n\n      forwardViewPosDepth((view * vec4(vpos, 1.0)).xyz);\n      forwardLinearDepth();\n      forwardTextureCoordinates();\n\n      gl_Position = alphaCut ? vec4(1e38, 1e38, 1e38, 1.0) :\n      ${F(H,\"offsetBackfacingClipPosition(basePosition, vpos, vNormalWorld, cameraPosition);\",\"basePosition;\")}\n    `)),r(W)){const{hasColorTexture:e,hasColorTextureTransform:o,receiveShadows:r}=R;_.include(v,R),G.include(m,R),_.include(O,R),_.include(R.instancedDoublePrecision?y:C,R),G.include(i,R),_.include(T,R),S(G,R),p(G),b(G),w(G),G.uniforms.add(k.uniforms.get(\"localOrigin\"),k.uniforms.get(\"view\"),new A(\"ambient\",(e=>e.ambient)),new A(\"diffuse\",(e=>e.diffuse)),new D(\"opacity\",(e=>e.opacity)),new D(\"layerOpacity\",(e=>e.layerOpacity))),e&&G.uniforms.add(new N(\"tex\",(e=>e.texture))),_.include(x,R),G.include(u,R),G.include(M),h(G),G.main.add($`\n      discardBySlice(vpos);\n      discardByTerrainDepth();\n      vec4 texColor = ${e?`texture(tex, ${o?\"colorUV\":\"vuv0\"})`:\" vec4(1.0)\"};\n      ${F(e,`${F(R.textureAlphaPremultiplied,\"texColor.rgb /= texColor.a;\")}\\n        discardOrAdjustAlpha(texColor);`)}\n      vec3 viewDirection = normalize(vpos - cameraPosition);\n      applyPBRFactors();\n      float ssao = evaluateAmbientOcclusionInverse();\n      ssao *= getBakedOcclusion();\n\n      float additionalAmbientScale = additionalDirectedAmbientLight(vpos + localOrigin);\n      vec3 additionalLight = ssao * mainLightIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;\n      float shadow = ${r?\"max(lightingGlobalFactor * (1.0 - additionalAmbientScale), readShadowMap(vpos, linearDepth))\":Q?\"lightingGlobalFactor * (1.0 - additionalAmbientScale)\":\"0.0\"};\n      vec3 matColor = max(ambient, diffuse);\n      ${R.hasVertexColors?$`vec3 albedo = mixExternalColor(vColor.rgb * matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n             float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:$`vec3 albedo = mixExternalColor(matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n             float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));`}\n      ${F(K,\"albedo = mix(albedo, vec3(1), 0.9);\")}\n      ${$`vec3 shadingNormal = normalize(vNormalWorld);\n             albedo *= 1.2;\n             vec3 viewForward = vec3(view[0][2], view[1][2], view[2][2]);\n             float alignmentLightView = clamp(dot(viewForward, -mainLightDirection), 0.0, 1.0);\n             float transmittance = 1.0 - clamp(dot(viewForward, shadingNormal), 0.0, 1.0);\n             float treeRadialFalloff = vColor.r;\n             float backLightFactor = 0.5 * treeRadialFalloff * alignmentLightView * transmittance * (1.0 - shadow);\n             additionalLight += backLightFactor * mainLightIntensity;`}\n      ${F(Y,`vec3 normalGround = ${Q?\"normalize(vpos + localOrigin)\":\"vec3(0.0, 0.0, 1.0)\"};`)}\n      ${Y?$`float additionalAmbientIrradiance = additionalAmbientIrradianceFactor * mainLightIntensity[2];\n                 ${F(K,$`mrr = applySnowToMRR(mrr, 1.0)`)}\n            vec4 emission = ${K||X?\"vec4(0.0)\":\"getEmissions(albedo)\"};\n            vec3 shadedColor = evaluateSceneLightingPBR(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight, viewDirection, normalGround, mrr, emission, additionalAmbientIrradiance);`:$`vec3 shadedColor = evaluateSceneLighting(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight);`}\n      vec4 finalColor = vec4(shadedColor, opacity_);\n      outputColorHighlightOID(finalColor, vpos, albedo ${F(K,\", 1.0\")});`)}return _.include(g,R),_}const _=Object.freeze(Object.defineProperty({__proto__:null,build:R},Symbol.toStringTag,{value:\"Module\"}));export{_ as R,R as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{FloatDrawUniform as o}from\"../../shaderModules/FloatDrawUniform.js\";import{FloatPassUniform as r}from\"../../shaderModules/FloatPassUniform.js\";import{glsl as t,If as e}from\"../../shaderModules/glsl.js\";import{AlphaDiscardMode as a}from\"../../../lib/basicInterfaces.js\";import{alphaCutoff as s}from\"../../../../../../webscene/support/AlphaCutoff.js\";function f(o,t){u(o,t,new r(\"textureAlphaCutoff\",(o=>o.textureAlphaCutoff)))}function l(r,t){u(r,t,new o(\"textureAlphaCutoff\",(o=>o.textureAlphaCutoff)))}function u(o,r,f){const l=o.fragment,u=r.alphaDiscardMode,d=u===a.Blend;u!==a.Mask&&u!==a.MaskBlend||l.uniforms.add(f),l.code.add(t`\n    void discardOrAdjustAlpha(inout vec4 color) {\n      ${u===a.Opaque?\"color.a = 1.0;\":`if (color.a < ${d?t.float(s):\"textureAlphaCutoff\"}) {\\n              discard;\\n             } ${e(u===a.Mask,\"else { color.a = 1.0; }\")}`}\n    }\n  `)}export{l as DiscardOrAdjustAlphaDraw,f as DiscardOrAdjustAlphaPass};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{normalFromMat4 as e}from\"../../../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as r}from\"../../../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{IDENTITY as o}from\"../../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{i as a}from\"../../../../../../chunks/vec32.js\";import{create as i}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{ShaderOutput as n}from\"../ShaderOutput.js\";import{DoublePrecision as t}from\"../util/DoublePrecision.glsl.js\";import{addViewNormal as s}from\"../util/View.glsl.js\";import{Float3BindUniform as l}from\"../../shaderModules/Float3BindUniform.js\";import{glsl as m}from\"../../shaderModules/glsl.js\";import{Matrix3PassUniform as c}from\"../../shaderModules/Matrix3PassUniform.js\";import{Matrix4PassUniform as d}from\"../../shaderModules/Matrix4PassUniform.js\";import{VertexAttribute as v}from\"../../../lib/VertexAttribute.js\";import{encodeDoubleHi as u,encodeDoubleLo as g}from\"../../../../../webgl/doublePrecisionUtils.js\";import{NoParameters as p}from\"../../../../../webgl/NoParameters.js\";class x extends p{constructor(){super(...arguments),this.modelTransformation=null}}const M=r();function f(r,i){const{hasModelTransformation:p,instancedDoublePrecision:x,instanced:f,output:O,hasVertexTangents:N}=i;p&&(r.vertex.uniforms.add(new d(\"model\",(e=>e.modelTransformation??o))),r.vertex.uniforms.add(new c(\"normalLocalOriginFromModel\",(r=>(e(M,r.modelTransformation??o),M))))),f&&x&&(r.attributes.add(v.INSTANCEMODELORIGINHI,\"vec3\"),r.attributes.add(v.INSTANCEMODELORIGINLO,\"vec3\"),r.attributes.add(v.INSTANCEMODEL,\"mat3\"),r.attributes.add(v.INSTANCEMODELNORMAL,\"mat3\"));const _=r.vertex;x&&(_.include(t,i),_.uniforms.add(new l(\"viewOriginHi\",(e=>u(a(w,e.camera.viewInverseTransposeMatrix[3],e.camera.viewInverseTransposeMatrix[7],e.camera.viewInverseTransposeMatrix[11]),w))),new l(\"viewOriginLo\",(e=>g(a(w,e.camera.viewInverseTransposeMatrix[3],e.camera.viewInverseTransposeMatrix[7],e.camera.viewInverseTransposeMatrix[11]),w))))),_.code.add(m`\n    vec3 getVertexInLocalOriginSpace() {\n      return ${p?x?\"(model * vec4(instanceModel * localPosition().xyz, 1.0)).xyz\":\"(model * localPosition()).xyz\":x?\"instanceModel * localPosition().xyz\":\"localPosition().xyz\"};\n    }\n\n    vec3 subtractOrigin(vec3 _pos) {\n      ${x?m`\n          // Issue: (should be resolved now with invariant position) https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/56280\n          vec3 originDelta = dpAdd(viewOriginHi, viewOriginLo, -instanceModelOriginHi, -instanceModelOriginLo);\n          return _pos - originDelta;`:\"return vpos;\"}\n    }\n    `),_.code.add(m`\n    vec3 dpNormal(vec4 _normal) {\n      return normalize(${p?x?\"normalLocalOriginFromModel * (instanceModelNormal * _normal.xyz)\":\"normalLocalOriginFromModel * _normal.xyz\":x?\"instanceModelNormal * _normal.xyz\":\"_normal.xyz\"});\n    }\n    `),O===n.Normal&&(s(_),_.code.add(m`\n    vec3 dpNormalView(vec4 _normal) {\n      return normalize((viewNormal * ${p?x?\"vec4(normalLocalOriginFromModel * (instanceModelNormal * _normal.xyz), 1.0)\":\"vec4(normalLocalOriginFromModel * _normal.xyz, 1.0)\":x?\"vec4(instanceModelNormal * _normal.xyz, 1.0)\":\"_normal\"}).xyz);\n    }\n    `)),N&&_.code.add(m`\n    vec4 dpTransformVertexTangent(vec4 _tangent) {\n      ${p?x?\"return vec4(normalLocalOriginFromModel * (instanceModelNormal * _tangent.xyz), _tangent.w);\":\"return vec4(normalLocalOriginFromModel * _tangent.xyz, _tangent.w);\":x?\"return vec4(instanceModelNormal * _tangent.xyz, _tangent.w);\":\"return _tangent;\"}\n    }`)}const w=i();export{x as InstancedDoublePassParameters,f as InstancedDoublePrecision};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as t}from\"../ShaderOutput.js\";import{glsl as a}from\"../../shaderModules/glsl.js\";function e(e,o){switch(o.output){case t.Shadow:case t.ShadowHighlight:case t.ShadowExcludeHighlight:case t.ViewshedShadow:e.fragment.code.add(a`float _calculateFragDepth(const in float depth) {\nconst float SLOPE_SCALE = 2.0;\nconst float BIAS = 20.0 * .000015259;\nfloat m = max(abs(dFdx(depth)), abs(dFdy(depth)));\nreturn depth + SLOPE_SCALE * m + BIAS;\n}\nvoid outputDepth(float _linearDepth){\nfloat fragDepth = _calculateFragDepth(_linearDepth);\ngl_FragDepth = fragDepth;\n}`)}}export{e as OutputDepth};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{i}from\"../../../../../../chunks/vec32.js\";import{create as n}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{s as t}from\"../../../../../../chunks/vec42.js\";import{create as e}from\"../../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{PBRMode as h}from\"./PhysicallyBasedRenderingParameters.glsl.js\";import{Float3BindUniform as s}from\"../../shaderModules/Float3BindUniform.js\";import{Float4BindUniform as g}from\"../../shaderModules/Float4BindUniform.js\";import{glsl as r}from\"../../shaderModules/glsl.js\";function m(n,e){const m=n.fragment,o=void 0!==e.lightingSphericalHarmonicsOrder?e.lightingSphericalHarmonicsOrder:2;0===o?(m.uniforms.add(new s(\"lightingAmbientSH0\",(({lighting:n})=>i(l,n.sh.r[0],n.sh.g[0],n.sh.b[0])))),m.code.add(r`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec3 ambientLight = 0.282095 * lightingAmbientSH0;\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`)):1===o?(m.uniforms.add(new g(\"lightingAmbientSH_R\",(({lighting:i})=>t(a,i.sh.r[0],i.sh.r[1],i.sh.r[2],i.sh.r[3]))),new g(\"lightingAmbientSH_G\",(({lighting:i})=>t(a,i.sh.g[0],i.sh.g[1],i.sh.g[2],i.sh.g[3]))),new g(\"lightingAmbientSH_B\",(({lighting:i})=>t(a,i.sh.b[0],i.sh.b[1],i.sh.b[2],i.sh.b[3])))),m.code.add(r`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec4 sh0 = vec4(\n0.282095,\n0.488603 * normal.x,\n0.488603 * normal.z,\n0.488603 * normal.y\n);\nvec3 ambientLight = vec3(\ndot(lightingAmbientSH_R, sh0),\ndot(lightingAmbientSH_G, sh0),\ndot(lightingAmbientSH_B, sh0)\n);\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`)):2===o&&(m.uniforms.add(new s(\"lightingAmbientSH0\",(({lighting:n})=>i(l,n.sh.r[0],n.sh.g[0],n.sh.b[0]))),new g(\"lightingAmbientSH_R1\",(({lighting:i})=>t(a,i.sh.r[1],i.sh.r[2],i.sh.r[3],i.sh.r[4]))),new g(\"lightingAmbientSH_G1\",(({lighting:i})=>t(a,i.sh.g[1],i.sh.g[2],i.sh.g[3],i.sh.g[4]))),new g(\"lightingAmbientSH_B1\",(({lighting:i})=>t(a,i.sh.b[1],i.sh.b[2],i.sh.b[3],i.sh.b[4]))),new g(\"lightingAmbientSH_R2\",(({lighting:i})=>t(a,i.sh.r[5],i.sh.r[6],i.sh.r[7],i.sh.r[8]))),new g(\"lightingAmbientSH_G2\",(({lighting:i})=>t(a,i.sh.g[5],i.sh.g[6],i.sh.g[7],i.sh.g[8]))),new g(\"lightingAmbientSH_B2\",(({lighting:i})=>t(a,i.sh.b[5],i.sh.b[6],i.sh.b[7],i.sh.b[8])))),m.code.add(r`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec3 ambientLight = 0.282095 * lightingAmbientSH0;\nvec4 sh1 = vec4(\n0.488603 * normal.x,\n0.488603 * normal.z,\n0.488603 * normal.y,\n1.092548 * normal.x * normal.y\n);\nvec4 sh2 = vec4(\n1.092548 * normal.y * normal.z,\n0.315392 * (3.0 * normal.z * normal.z - 1.0),\n1.092548 * normal.x * normal.z,\n0.546274 * (normal.x * normal.x - normal.y * normal.y)\n);\nambientLight += vec3(\ndot(lightingAmbientSH_R1, sh1),\ndot(lightingAmbientSH_G1, sh1),\ndot(lightingAmbientSH_B1, sh1)\n);\nambientLight += vec3(\ndot(lightingAmbientSH_R2, sh2),\ndot(lightingAmbientSH_G2, sh2),\ndot(lightingAmbientSH_B2, sh2)\n);\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`),e.pbrMode!==h.Normal&&e.pbrMode!==h.Schematic||m.code.add(r`const vec3 skyTransmittance = vec3(0.9, 0.9, 1.0);\nvec3 calculateAmbientRadiance(float ambientOcclusion)\n{\nvec3 ambientLight = 1.2 * (0.282095 * lightingAmbientSH0) - 0.2;\nreturn ambientLight *= (1.0 - ambientOcclusion) * skyTransmittance;\n}`))}const l=n(),a=e();export{m as EvaluateAmbientLighting};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{set as e}from\"../core/libs/gl-matrix-2/math/vec2.js\";import{create as r}from\"../core/libs/gl-matrix-2/factories/vec2f64.js\";import{ScreenSpacePass as t}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{ReadDepth as o}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl.js\";import{CameraSpace as a}from\"../views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl.js\";import{Float2BindUniform as i}from\"../views/3d/webgl-engine/core/shaderModules/Float2BindUniform.js\";import{Float2PassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{FloatBindUniform as s}from\"../views/3d/webgl-engine/core/shaderModules/FloatBindUniform.js\";import{FloatPassUniform as c}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as l}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{Texture2DPassUniform as u}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{ShaderBuilder as f}from\"../views/webgl/ShaderBuilder.js\";const d=16;function m(){const r=new f,m=r.fragment;return r.include(t),r.include(a),m.include(o),m.uniforms.add(new s(\"radius\",(e=>v(e.camera)))).code.add(l`vec3 sphere[16] = vec3[16](\nvec3(0.186937, 0.0, 0.0),\nvec3(0.700542, 0.0, 0.0),\nvec3(-0.864858, -0.481795, -0.111713),\nvec3(-0.624773, 0.102853, -0.730153),\nvec3(-0.387172, 0.260319, 0.007229),\nvec3(-0.222367, -0.642631, -0.707697),\nvec3(-0.01336, -0.014956, 0.169662),\nvec3(0.122575, 0.1544, -0.456944),\nvec3(-0.177141, 0.85997, -0.42346),\nvec3(-0.131631, 0.814545, 0.524355),\nvec3(-0.779469, 0.007991, 0.624833),\nvec3(0.308092, 0.209288,0.35969),\nvec3(0.359331, -0.184533, -0.377458),\nvec3(0.192633, -0.482999, -0.065284),\nvec3(0.233538, 0.293706, -0.055139),\nvec3(0.417709, -0.386701, 0.442449)\n);\nfloat fallOffFunction(float vv, float vn, float bias) {\nfloat f = max(radius * radius - vv, 0.0);\nreturn f * f * f * max(vn - bias, 0.0);\n}`),m.code.add(l`float aoValueFromPositionsAndNormal(vec3 C, vec3 n_C, vec3 Q) {\nvec3 v = Q - C;\nfloat vv = dot(v, v);\nfloat vn = dot(normalize(v), n_C);\nreturn fallOffFunction(vv, vn, 0.1);\n}`),r.outputs.add(\"fragOcclusion\",\"float\"),m.uniforms.add(new u(\"normalMap\",(e=>e.normalTexture)),new u(\"depthMap\",(e=>e.depthTexture)),new c(\"projScale\",(e=>e.projScale)),new u(\"rnm\",(e=>e.noiseTexture)),new n(\"rnmScale\",((r,t)=>e(p,t.camera.fullWidth/r.noiseTexture.descriptor.width,t.camera.fullHeight/r.noiseTexture.descriptor.height))),new c(\"intensity\",(e=>e.intensity)),new i(\"screenSize\",(r=>e(p,r.camera.fullWidth,r.camera.fullHeight)))).main.add(l`\n    float depth = depthFromTexture(depthMap, uv);\n\n    // Early out if depth is out of range, such as in the sky\n    if (depth >= 1.0 || depth <= 0.0) {\n      fragOcclusion = 1.0;\n      return;\n    }\n\n    // get the normal of current fragment\n    ivec2 iuv = ivec2(uv * vec2(textureSize(normalMap, 0)));\n    vec4 norm4 = texelFetch(normalMap, iuv, 0);\n    if(norm4.a != 1.0) {\n      fragOcclusion = 1.0;\n      return;\n    }\n    vec3 norm = normalize(norm4.xyz * 2.0 - 1.0);\n\n    float currentPixelDepth = linearizeDepth(depth);\n    vec3 currentPixelPos = reconstructPosition(gl_FragCoord.xy, currentPixelDepth);\n\n    float sum = 0.0;\n    vec3 tapPixelPos;\n\n    vec3 fres = normalize(2.0 * texture(rnm, uv * rnmScale).xyz - 1.0);\n\n    // note: the factor 2.0 should not be necessary, but makes ssao much nicer.\n    // bug or deviation from CE somewhere else?\n    float ps = projScale / (2.0 * currentPixelPos.z * zScale.x + zScale.y);\n\n    for(int i = 0; i < ${l.int(d)}; ++i) {\n      vec2 unitOffset = reflect(sphere[i], fres).xy;\n      vec2 offset = vec2(-unitOffset * radius * ps);\n\n      // don't use current or very nearby samples\n      if( abs(offset.x) < 2.0 || abs(offset.y) < 2.0){\n        continue;\n      }\n\n      vec2 tc = vec2(gl_FragCoord.xy + offset);\n      if (tc.x < 0.0 || tc.y < 0.0 || tc.x > screenSize.x || tc.y > screenSize.y) continue;\n      vec2 tcTap = tc / screenSize;\n      float occluderFragmentDepth = linearDepthFromTexture(depthMap, tcTap);\n\n      tapPixelPos = reconstructPosition(tc, occluderFragmentDepth);\n\n      sum += aoValueFromPositionsAndNormal(currentPixelPos, norm, tapPixelPos);\n    }\n\n    // output the result\n    float A = max(1.0 - sum * intensity / float(${l.int(d)}), 0.0);\n\n    // Anti-tone map to reduce contrast and drag dark region farther: (x^0.2 + 1.2 * x^4) / 2.2\n    A = (pow(A, 0.2) + 1.2 * A * A * A * A) / 2.2;\n\n    fragOcclusion = A;\n  `),r}function v(e){return Math.max(10,20*e.computeScreenPixelSizeAtDist(Math.abs(4*e.relativeElevation)))}const p=r(),g=Object.freeze(Object.defineProperty({__proto__:null,build:m,getRadius:v},Symbol.toStringTag,{value:\"Module\"}));export{g as S,m as b,v as g};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{neverReached as r}from\"../../../../../../core/compilerUtils.js\";import{create as o}from\"../../../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{create as a}from\"../../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{NormalType as e,NormalAttribute as l}from\"./NormalAttribute.glsl.js\";import{VertexPositionPassParameters as m,VertexPositionDrawParameters as s}from\"./VertexPosition.glsl.js\";import{glsl as t}from\"../../shaderModules/glsl.js\";import{Matrix3DrawUniform as i}from\"../../shaderModules/Matrix3DrawUniform.js\";import{Matrix3PassUniform as d}from\"../../shaderModules/Matrix3PassUniform.js\";function c(o,a){switch(a.normalType){case e.Attribute:case e.Compressed:o.include(l,a),o.varyings.add(\"vNormalWorld\",\"vec3\"),o.varyings.add(\"vNormalView\",\"vec3\"),o.vertex.uniforms.add(new i(\"transformNormalGlobalFromModel\",(r=>r.transformNormalGlobalFromModel)),new d(\"transformNormalViewFromGlobal\",(r=>r.transformNormalViewFromGlobal))),o.vertex.code.add(t`void forwardNormal() {\nvNormalWorld = transformNormalGlobalFromModel * normalModel();\nvNormalView = transformNormalViewFromGlobal * vNormalWorld;\n}`);break;case e.ScreenDerivative:o.vertex.code.add(t`void forwardNormal() {}`);break;default:r(a.normalType);case e.COUNT:}}class f extends m{constructor(){super(...arguments),this.transformNormalViewFromGlobal=o()}}class n extends s{constructor(){super(...arguments),this.transformNormalGlobalFromModel=o(),this.toMapSpace=a()}}export{c as VertexNormal,n as VertexNormalDrawParameters,f as VertexNormalPassParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{IDENTITY as r}from\"../../../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{TextureCoordinateType as e}from\"../attributes/TextureCoordinateAttribute.glsl.js\";import{glsl as o}from\"../../shaderModules/glsl.js\";import{Matrix3PassUniform as a}from\"../../shaderModules/Matrix3PassUniform.js\";function s(e,s){s.hasColorTextureTransform?(e.varyings.add(\"colorUV\",\"vec2\"),e.vertex.uniforms.add(new a(\"colorTextureTransformMatrix\",(e=>e.colorTextureTransformMatrix??r))).code.add(o`void forwardColorUV(){\ncolorUV = (colorTextureTransformMatrix * vec3(vuv0, 1.0)).xy;\n}`)):e.vertex.code.add(o`void forwardColorUV(){}`)}function i(s,i){i.hasNormalTextureTransform&&i.textureCoordinateType!==e.None?(s.varyings.add(\"normalUV\",\"vec2\"),s.vertex.uniforms.add(new a(\"normalTextureTransformMatrix\",(e=>e.normalTextureTransformMatrix??r))).code.add(o`void forwardNormalUV(){\nnormalUV = (normalTextureTransformMatrix * vec3(vuv0, 1.0)).xy;\n}`)):s.vertex.code.add(o`void forwardNormalUV(){}`)}function t(s,i){i.hasEmissionTextureTransform&&i.textureCoordinateType!==e.None?(s.varyings.add(\"emissiveUV\",\"vec2\"),s.vertex.uniforms.add(new a(\"emissiveTextureTransformMatrix\",(e=>e.emissiveTextureTransformMatrix??r))).code.add(o`void forwardEmissiveUV(){\nemissiveUV = (emissiveTextureTransformMatrix * vec3(vuv0, 1.0)).xy;\n}`)):s.vertex.code.add(o`void forwardEmissiveUV(){}`)}function d(s,i){i.hasOcclusionTextureTransform&&i.textureCoordinateType!==e.None?(s.varyings.add(\"occlusionUV\",\"vec2\"),s.vertex.uniforms.add(new a(\"occlusionTextureTransformMatrix\",(e=>e.occlusionTextureTransformMatrix??r))).code.add(o`void forwardOcclusionUV(){\nocclusionUV = (occlusionTextureTransformMatrix * vec3(vuv0, 1.0)).xy;\n}`)):s.vertex.code.add(o`void forwardOcclusionUV(){}`)}function n(s,i){i.hasMetallicRoughnessTextureTransform&&i.textureCoordinateType!==e.None?(s.varyings.add(\"metallicRoughnessUV\",\"vec2\"),s.vertex.uniforms.add(new a(\"metallicRoughnessTextureTransformMatrix\",(e=>e.metallicRoughnessTextureTransformMatrix??r))).code.add(o`void forwardMetallicRoughnessUV(){\nmetallicRoughnessUV = (metallicRoughnessTextureTransformMatrix * vec3(vuv0, 1.0)).xy;\n}`)):s.vertex.code.add(o`void forwardMetallicRoughnessUV(){}`)}export{s as colorTextureUV,t as emissiveTextureUV,n as metallicRoughnessTextureUV,i as normalTextureUV,d as occlusionTextureUV};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{ZEROS as e,freeze as t,create as i}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromValues as s}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{EmissiveSourceMode as r}from\"../../../../symbols/support/materialUtils.js\";import{isColorOrColorEmission as l}from\"../core/shaderLibrary/ShaderOutput.js\";import{NormalType as o}from\"../core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{VertexNormalPassParameters as a,VertexNormalDrawParameters as n}from\"../core/shaderLibrary/attributes/VertexNormal.glsl.js\";import{ReloadableShaderModule as c}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as h,depthOnlyOutputBuffersOr as u}from\"../core/shaderTechnique/ShaderTechnique.js\";import{CullFaceOptions as m,DepthTestFunction as p,AlphaDiscardMode as d}from\"../lib/basicInterfaces.js\";import{RenderOccludedFlag as f}from\"../lib/Material.js\";import{oitPolygonOffset as b,getDrawBuffers as S,depthWrite as g,oitDepthTest as j,blending as v}from\"../lib/OrderIndependentTransparency.js\";import{stencilToolMaskBaseParams as y,stencilBaseAllZerosParams as P,stencilWriteMaskOn as x}from\"../lib/StencilUtils.js\";import{advancedMRRFactors as T}from\"../materials/pbrUtils.js\";import{D as O}from\"../../../../chunks/DefaultMaterial.glsl.js\";import{CompareFunction as M}from\"../../../webgl/enums.js\";import{makePipelineState as A,cullingParams as C,defaultColorWrite as D}from\"../../../webgl/renderState.js\";import{alphaCutoff as L}from\"../../../../webscene/support/AlphaCutoff.js\";class w extends a{constructor(){super(...arguments),this.isSchematic=!1,this.usePBR=!1,this.mrrFactors=T,this.hasVertexColors=!1,this.hasSymbolColors=!1,this.doubleSided=!1,this.doubleSidedType=\"normal\",this.cullFace=m.Back,this.isInstanced=!1,this.hasInstancedColor=!1,this.emissiveStrength=0,this.emissiveSource=r.Color,this.emissiveBaseColor=e,this.instancedDoublePrecision=!1,this.normalType=o.Attribute,this.receiveShadows=!0,this.receiveAmbientOcclusion=!0,this.castShadows=!0,this.ambient=t(.2,.2,.2),this.diffuse=t(.8,.8,.8),this.externalColor=s(1,1,1,1),this.colorMixMode=\"multiply\",this.opacity=1,this.layerOpacity=1,this.origin=i(),this.hasSlicePlane=!1,this.offsetTransparentBackfaces=!1,this.vvSize=null,this.vvColor=null,this.vvOpacity=null,this.vvSymbolAnchor=null,this.vvSymbolRotationMatrix=null,this.modelTransformation=null,this.drivenOpacity=!1,this.writeDepth=!0,this.customDepthTest=p.Less,this.textureAlphaMode=d.Blend,this.textureAlphaCutoff=L,this.textureAlphaPremultiplied=!1,this.renderOccluded=f.Occlude,this.isDecoration=!1}}class k extends n{constructor(){super(...arguments),this.origin=i(),this.slicePlaneLocalOrigin=this.origin}}class B extends h{constructor(e,t,i=new c(O,(()=>import(\"./DefaultMaterial.glsl.js\")))){super(e,t,i),this.type=\"DefaultMaterialTechnique\"}_makePipeline(e,t){const{oitPass:i,output:s,transparent:r,cullFace:o,customDepthTest:a,hasOccludees:n}=e;return A({blending:l(s)&&r?v(i):null,culling:_(e)?C(o):null,depthTest:{func:j(i,q(a))},depthWrite:g(e),drawBuffers:u(s,S(i,s)),colorWrite:D,stencilWrite:n?x:null,stencilTest:n?t?y:P:null,polygonOffset:b(e)})}initializePipeline(e){return this._occludeePipelineState=this._makePipeline(e,!0),this._makePipeline(e,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}function q(e){return e===p.Lequal?M.LEQUAL:M.LESS}function _(e){return e.cullFace!==m.None||!e.hasSlicePlane&&(!e.transparent&&!e.doubleSidedMode)}export{k as DefaultMaterialDrawParameters,w as DefaultMaterialPassParameters,B as DefaultMaterialTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../shaderModules/glsl.js\";function c(c){c.vertex.code.add(o`vec4 offsetBackfacingClipPosition(vec4 posClip, vec3 posWorld, vec3 normalWorld, vec3 camPosWorld) {\nvec3 camToVert = posWorld - camPosWorld;\nbool isBackface = dot(camToVert, normalWorld) > 0.0;\nif (isBackface) {\nposClip.z += 0.0000003 * posClip.w;\n}\nreturn posClip;\n}`)}export{c as Offset};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{NormalType as t}from\"../core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{TextureCoordinateType as o}from\"../core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{EmissionSource as s}from\"../core/shaderLibrary/output/Emissions.glsl.js\";import{NormalsDoubleSidedMode as r}from\"../core/shaderLibrary/shading/Normals.glsl.js\";import{PBRMode as i}from\"../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{parameter as a}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{AlphaDiscardMode as h,CullFaceOptions as p,DepthTestFunction as n}from\"../lib/basicInterfaces.js\";import{DefaultTechniqueConfiguration as l}from\"../materials/DefaultTechniqueConfiguration.js\";class d extends l{constructor(e){super(),this.spherical=e,this.alphaDiscardMode=h.Opaque,this.doubleSidedMode=r.None,this.pbrMode=i.Disabled,this.cullFace=p.None,this.normalType=t.Attribute,this.customDepthTest=n.Less,this.emissionSource=s.None,this.hasVertexColors=!1,this.hasSymbolColors=!1,this.hasVerticalOffset=!1,this.hasColorTexture=!1,this.hasMetallicRoughnessTexture=!1,this.hasOcclusionTexture=!1,this.hasNormalTexture=!1,this.hasScreenSizePerspective=!1,this.hasVertexTangents=!1,this.hasOccludees=!1,this.instancedDoublePrecision=!1,this.hasModelTransformation=!1,this.offsetBackfaces=!1,this.vvSize=!1,this.vvColor=!1,this.receiveShadows=!1,this.receiveAmbientOcclusion=!1,this.textureAlphaPremultiplied=!1,this.instanced=!1,this.instancedColor=!1,this.writeDepth=!0,this.transparent=!1,this.enableOffset=!0,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.snowCover=!1,this.hasBloom=!1,this.hasColorTextureTransform=!1,this.hasEmissionTextureTransform=!1,this.hasNormalTextureTransform=!1,this.hasOcclusionTextureTransform=!1,this.hasMetallicRoughnessTextureTransform=!1,this.occlusionPass=!1,this.hasVvInstancing=!0,this.useCustomDTRExponentForWater=!1,this.useFillLights=!0,this.draped=!1}get textureCoordinateType(){return this.hasColorTexture||this.hasMetallicRoughnessTexture||this.emissionSource===s.Texture||this.hasOcclusionTexture||this.hasNormalTexture?o.Default:o.None}get objectAndLayerIdColorInstanced(){return this.instanced}get discardInvisibleFragments(){return this.transparent}}e([a({count:h.COUNT})],d.prototype,\"alphaDiscardMode\",void 0),e([a({count:r.COUNT})],d.prototype,\"doubleSidedMode\",void 0),e([a({count:i.COUNT})],d.prototype,\"pbrMode\",void 0),e([a({count:p.COUNT})],d.prototype,\"cullFace\",void 0),e([a({count:t.COUNT})],d.prototype,\"normalType\",void 0),e([a({count:n.COUNT})],d.prototype,\"customDepthTest\",void 0),e([a({count:s.COUNT})],d.prototype,\"emissionSource\",void 0),e([a()],d.prototype,\"hasVertexColors\",void 0),e([a()],d.prototype,\"hasSymbolColors\",void 0),e([a()],d.prototype,\"hasVerticalOffset\",void 0),e([a()],d.prototype,\"hasColorTexture\",void 0),e([a()],d.prototype,\"hasMetallicRoughnessTexture\",void 0),e([a()],d.prototype,\"hasOcclusionTexture\",void 0),e([a()],d.prototype,\"hasNormalTexture\",void 0),e([a()],d.prototype,\"hasScreenSizePerspective\",void 0),e([a()],d.prototype,\"hasVertexTangents\",void 0),e([a()],d.prototype,\"hasOccludees\",void 0),e([a()],d.prototype,\"instancedDoublePrecision\",void 0),e([a()],d.prototype,\"hasModelTransformation\",void 0),e([a()],d.prototype,\"offsetBackfaces\",void 0),e([a()],d.prototype,\"vvSize\",void 0),e([a()],d.prototype,\"vvColor\",void 0),e([a()],d.prototype,\"receiveShadows\",void 0),e([a()],d.prototype,\"receiveAmbientOcclusion\",void 0),e([a()],d.prototype,\"textureAlphaPremultiplied\",void 0),e([a()],d.prototype,\"instanced\",void 0),e([a()],d.prototype,\"instancedColor\",void 0),e([a()],d.prototype,\"writeDepth\",void 0),e([a()],d.prototype,\"transparent\",void 0),e([a()],d.prototype,\"enableOffset\",void 0),e([a()],d.prototype,\"terrainDepthTest\",void 0),e([a()],d.prototype,\"cullAboveTerrain\",void 0),e([a()],d.prototype,\"snowCover\",void 0),e([a()],d.prototype,\"hasBloom\",void 0),e([a()],d.prototype,\"hasColorTextureTransform\",void 0),e([a()],d.prototype,\"hasEmissionTextureTransform\",void 0),e([a()],d.prototype,\"hasNormalTextureTransform\",void 0),e([a()],d.prototype,\"hasOcclusionTextureTransform\",void 0),e([a()],d.prototype,\"hasMetallicRoughnessTextureTransform\",void 0);export{d as DefaultMaterialTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{DefaultMaterialTechnique as r}from\"./DefaultMaterialTechnique.js\";import{R as s}from\"../../../../chunks/RealisticTree.glsl.js\";class i extends r{constructor(r,i){super(r,i,new e(s,(()=>import(\"./RealisticTree.glsl.js\")))),this.type=\"RealisticTreeTechnique\"}}export{i as RealisticTreeTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{q as e,i as r,c as t,n as s,d as a,l as i,g as o,e as n,o as l}from\"../../../../chunks/vec32.js\";import{ZEROS as c,create as m,fromValues as u}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{EmissiveSourceMode as h}from\"../../../../symbols/support/materialUtils.js\";import{ViewingMode as p}from\"../../../ViewingMode.js\";import{newLayout as d}from\"../../support/buffer/InterleavedLayout.js\";import{is3DGeometryOutputMRT as f,isShadowRelatedOutput as T,is3DGeometryOutput as v,ShaderOutput as x,isColorOrColorEmission as g,isColorEmission as b}from\"../core/shaderLibrary/ShaderOutput.js\";import{NormalType as S}from\"../core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{EmissionSource as O}from\"../core/shaderLibrary/output/Emissions.glsl.js\";import{NormalsDoubleSidedMode as M}from\"../core/shaderLibrary/shading/Normals.glsl.js\";import{PBRMode as y}from\"../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{olidEnabled as C}from\"../effects/geometry/olidUtils.js\";import{DepthTestFunction as R,CullFaceOptions as A,AlphaDiscardMode as I}from\"../lib/basicInterfaces.js\";import{GLTextureMaterial as w}from\"../lib/GLTextureMaterial.js\";import{Material as P}from\"../lib/Material.js\";import{OITPolygonOffsetLimit as j}from\"../lib/OrderIndependentTransparency.js\";import{intersectTriangleGeometry as E}from\"../lib/RayIntersections.js\";import{RenderSlot as L}from\"../lib/RenderSlot.js\";import{VertexAttribute as D}from\"../lib/VertexAttribute.js\";import{getVerticalOffsetObject3D as N}from\"../lib/verticalOffsetUtils.js\";import{DefaultBufferWriter as B}from\"./DefaultBufferWriter.js\";import{verticalOffsetAtDistance as _}from\"./internal/MaterialUtil.js\";import{DefaultMaterialPassParameters as V,DefaultMaterialTechnique as z}from\"../shaders/DefaultMaterialTechnique.js\";import{DefaultMaterialTechniqueConfiguration as U}from\"../shaders/DefaultMaterialTechniqueConfiguration.js\";import{RealisticTreeTechnique as q}from\"../shaders/RealisticTreeTechnique.js\";import{alphaCutoff as k}from\"../../../../webscene/support/AlphaCutoff.js\";class W extends P{constructor(e,r){super(e,H),this.materialType=\"default\",this.supportsEdges=!0,this.intersectDraped=void 0,this.produces=new Map([[L.OPAQUE_MATERIAL,e=>(f(e)||T(e))&&!this.transparent],[L.TRANSPARENT_MATERIAL,e=>(f(e)||T(e))&&this.transparent&&this.parameters.writeDepth],[L.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>(v(e)||T(e))&&this.transparent&&!this.parameters.writeDepth]]),this._vertexBufferLayout=F(this.parameters),this._configuration=new U(r.spherical)}isVisibleForOutput(e){return e!==x.Shadow&&e!==x.ShadowExcludeHighlight&&e!==x.ShadowHighlight||this.parameters.castShadows}get visible(){const{layerOpacity:e,colorMixMode:r,opacity:t,externalColor:s}=this.parameters;return e*(\"replace\"===r?1:t)*(\"ignore\"===r?1:s[3])>=k}get _hasEmissiveBase(){return!!this.parameters.emissiveTextureId||!e(this.parameters.emissiveBaseColor,c)}get hasEmissions(){return this.parameters.emissiveStrength>0&&(this.parameters.emissiveSource===h.Emissive&&this._hasEmissiveBase||this.parameters.emissiveSource===h.Color)}getConfiguration(e,r){const{parameters:t,_configuration:s}=this,{treeRendering:a,doubleSided:i,doubleSidedType:o}=t;return super.getConfiguration(e,r,this._configuration),s.hasNormalTexture=!a&&!!t.normalTextureId,s.hasColorTexture=!!t.textureId,s.hasVertexTangents=!a&&t.hasVertexTangents,s.instanced=t.isInstanced,s.instancedDoublePrecision=t.instancedDoublePrecision,s.vvSize=!!t.vvSize,s.hasVerticalOffset=null!=t.verticalOffset,s.hasScreenSizePerspective=null!=t.screenSizePerspective,s.hasSlicePlane=t.hasSlicePlane,s.alphaDiscardMode=t.textureAlphaMode,s.normalType=a?S.Attribute:t.normalType,s.transparent=this.transparent,s.writeDepth=t.writeDepth,s.customDepthTest=t.customDepthTest??R.Less,s.hasOccludees=r.hasOccludees,s.cullFace=t.hasSlicePlane?A.None:t.cullFace,s.cullAboveTerrain=r.cullAboveTerrain,s.hasModelTransformation=!a&&null!=t.modelTransformation,s.hasVertexColors=t.hasVertexColors,s.hasSymbolColors=t.hasSymbolColors,s.doubleSidedMode=a?M.WindingOrder:i&&\"normal\"===o?M.View:i&&\"winding-order\"===o?M.WindingOrder:M.None,s.instancedColor=t.hasInstancedColor,g(e)?(s.terrainDepthTest=r.terrainDepthTest,s.receiveShadows=t.receiveShadows,s.receiveAmbientOcclusion=t.receiveAmbientOcclusion&&null!=r.ssao):(s.terrainDepthTest=!1,s.receiveShadows=s.receiveAmbientOcclusion=!1),s.vvColor=!!t.vvColor,s.textureAlphaPremultiplied=!!t.textureAlphaPremultiplied,s.pbrMode=t.usePBR?t.isSchematic?y.Schematic:y.Normal:y.Disabled,s.hasMetallicRoughnessTexture=!a&&!!t.metallicRoughnessTextureId,s.emissionSource=a?O.None:null!=t.emissiveTextureId&&t.emissiveSource===h.Emissive?O.Texture:t.usePBR?t.emissiveSource===h.Emissive?O.EmissiveColor:O.SymbolColor:O.None,s.hasOcclusionTexture=!a&&!!t.occlusionTextureId,s.offsetBackfaces=!(!this.transparent||!t.offsetTransparentBackfaces),s.oitPass=r.oitPass,s.enableOffset=r.camera.relativeElevation<j,s.snowCover=r.snowCover,s.hasBloom=b(e),s.hasColorTextureTransform=!!t.colorTextureTransformMatrix,s.hasNormalTextureTransform=!!t.normalTextureTransformMatrix,s.hasEmissionTextureTransform=!!t.emissiveTextureTransformMatrix,s.hasOcclusionTextureTransform=!!t.occlusionTextureTransformMatrix,s.hasMetallicRoughnessTextureTransform=!!t.metallicRoughnessTextureTransformMatrix,s}intersect(e,c,m,u,h,d){if(null!=this.parameters.verticalOffset){const e=m.camera;r($,c[12],c[13],c[14]);let d=null;switch(m.viewingMode){case p.Global:d=s(X,$);break;case p.Local:d=t(X,K)}let f=0;const T=a(ee,$,e.eye),v=i(T),x=o(T,T,1/v);let g=null;this.parameters.screenSizePerspective&&(g=n(d,x)),f+=_(e,v,this.parameters.verticalOffset,g??0,this.parameters.screenSizePerspective),o(d,d,f),l(Z,d,m.transform.inverseRotation),u=a(Y,u,Z),h=a(J,h,Z)}E(e,m,u,h,N(m.verticalOffset),d)}createGLMaterial(e){return new G(e)}createBufferWriter(){return new B(this._vertexBufferLayout)}get transparent(){return Q(this.parameters)}}class G extends w{constructor(e){super({...e,...e.material.parameters})}beginSlot(e){this._material.setParameters({receiveShadows:e.shadowMap.enabled});const t=this._material.parameters;this.updateTexture(t.textureId);const s=e.camera.viewInverseTransposeMatrix;return r(t.origin,s[3],s[7],s[11]),this._material.setParameters(this.textureBindParameters),this.getTechnique(t.treeRendering?q:z,e)}}class H extends V{constructor(){super(...arguments),this.treeRendering=!1,this.hasVertexTangents=!1}}function F(e){const r=d().vec3f(D.POSITION);e.normalType===S.Compressed?r.vec2i16(D.NORMALCOMPRESSED,{glNormalized:!0}):r.vec3f(D.NORMAL),e.hasVertexTangents&&r.vec4f(D.TANGENT);return(e.textureId||e.normalTextureId||e.metallicRoughnessTextureId||e.emissiveTextureId||e.occlusionTextureId)&&r.vec2f16(D.UV0),e.hasVertexColors&&r.vec4u8(D.COLOR),e.hasSymbolColors&&r.vec4u8(D.SYMBOLCOLOR),C()&&r.vec4u8(D.OLIDCOLOR),r}function Q(e){const{drivenOpacity:r,opacity:t,externalColor:[s,a,i,o],layerOpacity:n,texture:l,textureId:c,textureAlphaMode:m,colorMixMode:u}=e;return r||t<1&&\"replace\"!==u||o<1&&\"ignore\"!==u||n<1||(null!=l||null!=c)&&m!==I.Opaque&&m!==I.Mask&&\"replace\"!==u}const Y=m(),J=m(),K=u(0,0,1),X=m(),Z=m(),$=m(),ee=m();export{G as DefaultGLMaterial,W as DefaultMaterial,H as DefaultMaterialParameters,Q as isTransparent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../core/shaderModules/glsl.js\";function a(a){a.code.add(e`float mapChannel(float x, vec2 p) {\nreturn (x < p.x) ? mix(0.0, p.y, x/p.x) : mix(p.y, 1.0, (x - p.x) / (1.0 - p.x) );\n}`),a.code.add(e`vec3 blackLevelSoftCompression(vec3 color, float averageAmbientRadiance) {\nvec2 p = vec2(0.02, 0.0075) * averageAmbientRadiance;\nreturn vec3(mapChannel(color.x, p), mapChannel(color.y, p), mapChannel(color.z, p));\n}`)}export{a as BlackLevelLightSoftCompression};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{colorGamma as i}from\"../../../../../../colorUtils.js\";import\"../../../../../../core/has.js\";import{EvaluateAmbientLighting as n}from\"./EvaluateAmbientLighting.glsl.js\";import{EvaluateAmbientOcclusion as e}from\"./EvaluateAmbientOcclusion.glsl.js\";import{addMainLightDirection as o,addMainLightIntensity as t,applyShading as a}from\"./MainLighting.glsl.js\";import{PhysicallyBasedRendering as r}from\"./PhysicallyBasedRendering.glsl.js\";import{PBRMode as l}from\"./PhysicallyBasedRenderingParameters.glsl.js\";import{PiUtils as c}from\"./PiUtils.glsl.js\";import{BooleanBindUniform as d}from\"../../shaderModules/BooleanBindUniform.js\";import{FloatBindUniform as s}from\"../../shaderModules/FloatBindUniform.js\";import{glsl as m,If as g}from\"../../shaderModules/glsl.js\";import{ambientBoost as h}from\"../../../lighting/SceneLighting.js\";import{BlackLevelLightSoftCompression as u}from\"../../../shaders/BlackLevelLightSoftCompression.glsl.js\";import{ToneMapping as p}from\"../../../shaders/ToneMapping.glsl.js\";function v(i){i.constants.add(\"ambientBoostFactor\",\"float\",h)}function f(i){i.uniforms.add(new s(\"lightingGlobalFactor\",(i=>i.lighting.globalFactor)))}function L(h,L){const b=h.fragment,{pbrMode:C,spherical:N,hasColorTexture:R}=L;b.include(e,L),C!==l.Disabled&&b.include(r,L),h.include(n,L),b.include(c),b.include(p,L);const D=!(C===l.Schematic&&!R);switch(D&&b.include(u),b.code.add(m`\n    const float GAMMA_SRGB = ${m.float(i)};\n    const float INV_GAMMA_SRGB = 0.4761904;\n    ${g(C!==l.Disabled,\"const float GROUND_REFLECTANCE = 0.2;\")}\n  `),v(b),f(b),o(b),b.code.add(m`\n    float additionalDirectedAmbientLight(vec3 vPosWorld) {\n      float vndl = dot(${N?m`normalize(vPosWorld)`:m`vec3(0.0, 0.0, 1.0)`}, mainLightDirection);\n      return smoothstep(0.0, 1.0, clamp(vndl * 2.5, 0.0, 1.0));\n    }\n  `),t(b),b.code.add(m`vec3 evaluateAdditionalLighting(float ambientOcclusion, vec3 vPosWorld) {\nfloat additionalAmbientScale = additionalDirectedAmbientLight(vPosWorld);\nreturn (1.0 - ambientOcclusion) * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor * mainLightIntensity;\n}`),C){case l.Disabled:case l.WaterOnIntegratedMesh:case l.Water:h.include(a),b.code.add(m`vec3 evaluateSceneLighting(vec3 normalWorld, vec3 albedo, float shadow, float ssao, vec3 additionalLight) {\nvec3 mainLighting = applyShading(normalWorld, shadow);\nvec3 ambientLighting = calculateAmbientIrradiance(normalWorld, ssao);\nvec3 albedoLinear = pow(albedo, vec3(GAMMA_SRGB));\nvec3 totalLight = mainLighting + ambientLighting + additionalLight;\ntotalLight = min(totalLight, vec3(PI));\nvec3 outColor = vec3((albedoLinear / PI) * totalLight);\nreturn pow(outColor, vec3(INV_GAMMA_SRGB));\n}`);break;case l.Normal:case l.Schematic:b.code.add(m`const float fillLightIntensity = 0.25;\nconst float horizonLightDiffusion = 0.4;\nconst float additionalAmbientIrradianceFactor = 0.02;\nvec3 evaluateSceneLightingPBR(vec3 normal, vec3 albedo, float shadow, float ssao, vec3 additionalLight,\nvec3 viewDir, vec3 groundNormal, vec3 mrr, vec4 _emission,\nfloat additionalAmbientIrradiance) {\nvec3 viewDirection = -viewDir;\nvec3 h = normalize(viewDirection + mainLightDirection);\nPBRShadingInfo inputs;\ninputs.NdotV = clamp(abs(dot(normal, viewDirection)), 0.001, 1.0);\ninputs.NdotNG = clamp(dot(normal, groundNormal), -1.0, 1.0);\nvec3 reflectedView = normalize(reflect(viewDirection, normal));\ninputs.RdotNG = clamp(dot(reflectedView, groundNormal), -1.0, 1.0);\ninputs.albedoLinear = pow(albedo, vec3(GAMMA_SRGB));\ninputs.ssao = ssao;\ninputs.metalness = mrr[0];\ninputs.roughness = clamp(mrr[1] * mrr[1], 0.001, 0.99);`),b.code.add(m`inputs.f0 = (0.16 * mrr[2] * mrr[2]) * (1.0 - inputs.metalness) + inputs.albedoLinear * inputs.metalness;\ninputs.f90 = vec3(clamp(dot(inputs.f0, vec3(50.0 * 0.33)), 0.0, 1.0));\ninputs.diffuseColor = inputs.albedoLinear * (vec3(1.0) - inputs.f0) * (1.0 - inputs.metalness);`),L.useFillLights?b.uniforms.add(new d(\"hasFillLights\",(i=>i.enableFillLights))):b.constants.add(\"hasFillLights\",\"bool\",!1),b.code.add(m`vec3 ambientDir = vec3(5.0 * groundNormal[1] - groundNormal[0] * groundNormal[2], - 5.0 * groundNormal[0] - groundNormal[2] * groundNormal[1], groundNormal[1] * groundNormal[1] + groundNormal[0] * groundNormal[0]);\nambientDir = ambientDir != vec3(0.0) ? normalize(ambientDir) : normalize(vec3(5.0, -1.0, 0.0));\ninputs.NdotAmbDir = hasFillLights ? abs(dot(normal, ambientDir)) : 1.0;\nfloat NdotL = clamp(dot(normal, mainLightDirection), 0.001, 1.0);\nvec3 mainLightIrradianceComponent = NdotL * (1.0 - shadow) * mainLightIntensity;\nvec3 fillLightsIrradianceComponent = inputs.NdotAmbDir * mainLightIntensity * fillLightIntensity;\nvec3 ambientLightIrradianceComponent = calculateAmbientIrradiance(normal, ssao) + additionalLight;\ninputs.skyIrradianceToSurface = ambientLightIrradianceComponent + mainLightIrradianceComponent + fillLightsIrradianceComponent ;\ninputs.groundIrradianceToSurface = GROUND_REFLECTANCE * ambientLightIrradianceComponent + mainLightIrradianceComponent + fillLightsIrradianceComponent ;`),b.uniforms.add(new s(\"lightingSpecularStrength\",(i=>i.lighting.mainLight.specularStrength)),new s(\"lightingEnvironmentStrength\",(i=>i.lighting.mainLight.environmentStrength))).code.add(m`vec3 horizonRingDir = inputs.RdotNG * groundNormal - reflectedView;\nvec3 horizonRingH = normalize(viewDirection + horizonRingDir);\ninputs.NdotH_Horizon = dot(normal, horizonRingH);\nfloat NdotH = clamp(dot(normal, h), 0.0, 1.0);\nvec3 mainLightRadianceComponent = lightingSpecularStrength * normalDistribution(NdotH, inputs.roughness) * mainLightIntensity * (1.0 - shadow);\nvec3 horizonLightRadianceComponent = lightingEnvironmentStrength * normalDistribution(inputs.NdotH_Horizon, min(inputs.roughness + horizonLightDiffusion, 1.0)) * mainLightIntensity * fillLightIntensity;\nvec3 ambientLightRadianceComponent = lightingEnvironmentStrength * calculateAmbientRadiance(ssao) + additionalLight;\nfloat normalDirectionModifier = mix(1., min(mix(0.1, 2.0, (inputs.NdotNG + 1.) * 0.5), 1.0), clamp(inputs.roughness * 5.0, 0.0 , 1.0));\ninputs.skyRadianceToSurface = (ambientLightRadianceComponent + horizonLightRadianceComponent) * normalDirectionModifier + mainLightRadianceComponent;\ninputs.groundRadianceToSurface = 0.5 * GROUND_REFLECTANCE * (ambientLightRadianceComponent + horizonLightRadianceComponent) * normalDirectionModifier + mainLightRadianceComponent;\ninputs.averageAmbientRadiance = ambientLightIrradianceComponent[1] * (1.0 + GROUND_REFLECTANCE);`),b.code.add(m`\n        vec3 reflectedColorComponent = evaluateEnvironmentIllumination(inputs);\n        vec3 additionalMaterialReflectanceComponent = inputs.albedoLinear * additionalAmbientIrradiance;\n        vec3 emissionComponent = _emission.rgb == vec3(0.0) ? _emission.rgb : tonemapACES(pow(_emission.rgb, vec3(GAMMA_SRGB)));\n        vec3 outColorLinear = reflectedColorComponent + additionalMaterialReflectanceComponent + emissionComponent;\n        ${D?m`vec3 outColor = pow(blackLevelSoftCompression(outColorLinear, inputs.averageAmbientRadiance), vec3(INV_GAMMA_SRGB));`:m`vec3 outColor = pow(max(vec3(0.0), outColorLinear - 0.005 * inputs.averageAmbientRadiance), vec3(INV_GAMMA_SRGB));`}\n        return outColor;\n      }\n    `);break;case l.Simplified:case l.TerrainWithWater:o(b),t(b),b.code.add(m`const float roughnessTerrain = 0.5;\nconst float specularityTerrain = 0.5;\nconst vec3 fresnelReflectionTerrain = vec3(0.04);\nvec3 evaluatePBRSimplifiedLighting(vec3 n, vec3 c, float shadow, float ssao, vec3 al, vec3 vd, vec3 nup) {\nvec3 viewDirection = -vd;\nvec3 h = normalize(viewDirection + mainLightDirection);\nfloat NdotL = clamp(dot(n, mainLightDirection), 0.001, 1.0);\nfloat NdotV = clamp(abs(dot(n, viewDirection)), 0.001, 1.0);\nfloat NdotH = clamp(dot(n, h), 0.0, 1.0);\nfloat NdotNG = clamp(dot(n, nup), -1.0, 1.0);\nvec3 albedoLinear = pow(c, vec3(GAMMA_SRGB));\nfloat lightness = 0.3 * albedoLinear[0] + 0.5 * albedoLinear[1] + 0.2 * albedoLinear[2];\nvec3 f0 = (0.85 * lightness + 0.15) * fresnelReflectionTerrain;\nvec3 f90 =  vec3(clamp(dot(f0, vec3(50.0 * 0.33)), 0.0, 1.0));\nvec3 mainLightIrradianceComponent = (1. - shadow) * NdotL * mainLightIntensity;\nvec3 ambientLightIrradianceComponent = calculateAmbientIrradiance(n, ssao) + al;\nvec3 ambientSky = ambientLightIrradianceComponent + mainLightIrradianceComponent;\nvec3 indirectDiffuse = ((1.0 - NdotNG) * mainLightIrradianceComponent + (1.0 + NdotNG ) * ambientSky) * 0.5;\nvec3 outDiffColor = albedoLinear * (1.0 - f0) * indirectDiffuse / PI;\nvec3 mainLightRadianceComponent = normalDistribution(NdotH, roughnessTerrain) * mainLightIntensity;\nvec2 dfg = prefilteredDFGAnalytical(roughnessTerrain, NdotV);\nvec3 specularColor = f0 * dfg.x + f90 * dfg.y;\nvec3 specularComponent = specularityTerrain * specularColor * mainLightRadianceComponent;\nvec3 outColorLinear = outDiffColor + specularComponent;\nvec3 outColor = pow(outColorLinear, vec3(INV_GAMMA_SRGB));\nreturn outColor;\n}`);default:case l.COUNT:}}export{L as EvaluateSceneLighting,v as addAmbientBoostFactor,f as addLightingGlobalFactor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{ONES as e}from\"../core/libs/gl-matrix-2/factories/vec4f64.js\";import{ForwardLinearDepth as r}from\"../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js\";import{Offset as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js\";import{isColorOrColorEmission as i}from\"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{SliceDraw as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as l}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{InstancedDoublePrecision as s}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js\";import{NormalAttribute as n,NormalType as t}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{SymbolColor as d}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js\";import{TextureCoordinateAttribute as c}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{VertexColor as m}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js\";import{VertexNormal as g}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexNormal.glsl.js\";import{VerticalOffset as v}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl.js\";import{DefaultMaterialAuxiliaryPasses as b}from\"../views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js\";import{ComputeNormalTexture as u}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ComputeNormalTexture.glsl.js\";import{EvaluateAmbientOcclusion as w}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js\";import{EvaluateSceneLighting as p,addAmbientBoostFactor as h,addLightingGlobalFactor as f}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl.js\";import{addMainLightIntensity as x}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js\";import{Normals as y}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/Normals.glsl.js\";import{PhysicallyBasedRendering as C}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js\";import{PhysicallyBasedRenderingParameters as L,PBRMode as j}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{ReadShadowMapPass as P,ReadShadowMapDraw as S}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{terrainDepthTest as O}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js\";import{colorTextureUV as T,normalTextureUV as N,emissiveTextureUV as M,occlusionTextureUV as V,metallicRoughnessTextureUV as A}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/TextureTransformUV.glsl.js\";import{VisualVariables as $}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js\";import{DiscardOrAdjustAlphaPass as D}from\"../views/3d/webgl-engine/core/shaderLibrary/util/DiscardOrAdjustAlpha.glsl.js\";import{MixExternalColor as E}from\"../views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js\";import{addProjViewLocalOrigin as I,addCameraPosition as B}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float3PassUniform as U}from\"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";import{Float4PassUniform as F}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatPassUniform as _}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{If as R,glsl as z}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{Texture2DPassUniform as G}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{SnowCover as W}from\"../views/3d/webgl-engine/effects/weather/SnowCover.glsl.js\";import{VertexAttribute as k}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";import{outputColorHighlightOID as H}from\"../views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl.js\";import{ShaderBuilder as q}from\"../views/webgl/ShaderBuilder.js\";import{alphaCutoff as J}from\"../webscene/support/AlphaCutoff.js\";function K(K){const Q=new q,{attributes:X,vertex:Y,fragment:Z,varyings:ee}=Q,{output:re,normalType:oe,offsetBackfaces:ie,instancedColor:ae,spherical:le,receiveShadows:se,snowCover:ne,pbrMode:te,textureAlphaPremultiplied:de,instancedDoublePrecision:ce,hasVertexColors:me,hasVertexTangents:ge,hasColorTexture:ve,hasNormalTexture:be,hasNormalTextureTransform:ue,hasColorTextureTransform:we,hasBloom:pe}=K;if(I(Y,K),X.add(k.POSITION,\"vec3\"),ee.add(\"vpos\",\"vec3\",{invariant:!0}),Q.include($,K),Q.include(s,K),Q.include(v,K),Q.include(T,K),!i(re))return Q.include(b,K),Q;Q.include(N,K),Q.include(M,K),Q.include(V,K),Q.include(A,K),B(Y,K),Q.include(n,K),Q.include(l,K);const he=oe===t.Attribute||oe===t.Compressed;return he&&ie&&Q.include(o),Q.include(u,K),Q.include(g,K),ae&&Q.attributes.add(k.INSTANCECOLOR,\"vec4\"),ee.add(\"vPositionLocal\",\"vec3\"),Q.include(c,K),Q.include(r,K),Q.include(d,K),Q.include(m,K),Y.uniforms.add(new F(\"externalColor\",(r=>\"ignore\"===r.colorMixMode?e:r.externalColor))),ee.add(\"vcolorExt\",\"vec4\"),Q.include(O,K),Y.main.add(z`\n    forwardNormalizedVertexColor();\n    vcolorExt = externalColor;\n    ${R(ae,\"vcolorExt *= instanceColor * 0.003921568627451;\")}\n    vcolorExt *= vvColor();\n    vcolorExt *= getSymbolColor();\n    forwardColorMixMode();\n\n    vpos = getVertexInLocalOriginSpace();\n    vPositionLocal = vpos - view[3].xyz;\n    vpos = subtractOrigin(vpos);\n    ${R(he,\"vNormalWorld = dpNormal(vvLocalNormal(normalModel()));\")}\n    vpos = addVerticalOffset(vpos, localOrigin);\n    ${R(ge,\"vTangent = dpTransformVertexTangent(tangent);\")}\n    gl_Position = transformPosition(proj, view, vpos);\n    ${R(he&&ie,\"gl_Position = offsetBackfacingClipPosition(gl_Position, vpos, vNormalWorld, cameraPosition);\")}\n\n    forwardViewPosDepth((view * vec4(vpos, 1.0)).xyz);\n    forwardLinearDepth();\n    forwardTextureCoordinates();\n    forwardColorUV();\n    forwardNormalUV();\n    forwardEmissiveUV();\n    forwardOcclusionUV();\n    forwardMetallicRoughnessUV();\n\n    if (vcolorExt.a < ${z.float(J)}) {\n      gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n    }\n  `),Q.include(p,K),Z.include(w,K),Q.include(D,K),Q.include(ce?P:S,K),Z.include(a,K),Q.include(H,K),B(Z,K),Z.uniforms.add(Y.uniforms.get(\"localOrigin\"),new U(\"ambient\",(e=>e.ambient)),new U(\"diffuse\",(e=>e.diffuse)),new _(\"opacity\",(e=>e.opacity)),new _(\"layerOpacity\",(e=>e.layerOpacity))),ve&&Z.uniforms.add(new G(\"tex\",(e=>e.texture))),Q.include(L,K),Z.include(C,K),Z.include(E),Q.include(y,K),Z.include(W,K),h(Z),f(Z),x(Z),Z.main.add(z`\n    discardBySlice(vpos);\n    discardByTerrainDepth();\n    ${ve?z`\n            vec4 texColor = texture(tex, ${we?\"colorUV\":\"vuv0\"});\n            ${R(de,\"texColor.rgb /= texColor.a;\")}\n            discardOrAdjustAlpha(texColor);`:z`vec4 texColor = vec4(1.0);`}\n    shadingParams.viewDirection = normalize(vpos - cameraPosition);\n    ${oe===t.ScreenDerivative?z`vec3 normal = screenDerivativeNormal(vPositionLocal);`:z`shadingParams.normalView = vNormalWorld;\n                vec3 normal = shadingNormal(shadingParams);`}\n    applyPBRFactors();\n    float ssao = evaluateAmbientOcclusionInverse() * getBakedOcclusion();\n\n    vec3 posWorld = vpos + localOrigin;\n\n      float additionalAmbientScale = additionalDirectedAmbientLight(posWorld);\n      float shadow = ${se?\"max(lightingGlobalFactor * (1.0 - additionalAmbientScale), readShadowMap(vpos, linearDepth))\":R(le,\"lightingGlobalFactor * (1.0 - additionalAmbientScale)\",\"0.0\")};\n\n    vec3 matColor = max(ambient, diffuse);\n    vec3 albedo = mixExternalColor(${R(me,\"vColor.rgb *\")} matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n    float opacity_ = layerOpacity * mixExternalOpacity(${R(me,\"vColor.a * \")} opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n    ${be?`mat3 tangentSpace = computeTangentSpace(${ge?\"normal\":\"normal, vpos, vuv0\"});\\n            vec3 shadingNormal = computeTextureNormal(tangentSpace, ${ue?\"normalUV\":\"vuv0\"});`:\"vec3 shadingNormal = normal;\"}\n    vec3 normalGround = ${le?\"normalize(posWorld);\":\"vec3(0.0, 0.0, 1.0);\"}\n\n    ${R(ne,z`\n          float snow = getSnow(normal, normalGround);\n          albedo = mix(albedo, vec3(1), snow);\n          shadingNormal = mix(shadingNormal, normal, snow);\n          ssao = mix(ssao, 1.0, snow);`)}\n\n    vec3 additionalLight = ssao * mainLightIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;\n\n    ${te===j.Normal||te===j.Schematic?z`\n            float additionalAmbientIrradiance = additionalAmbientIrradianceFactor * mainLightIntensity[2];\n            vec4 emission = ${pe?\"vec4(0.0)\":\"getEmissions(albedo)\"};\n            ${R(ne,\"mrr = applySnowToMRR(mrr, snow);\\n                 emission = snowCoverForEmissions(emission, snow);\")}\n            vec3 shadedColor = evaluateSceneLightingPBR(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight, shadingParams.viewDirection, normalGround, mrr, emission, additionalAmbientIrradiance);`:z`vec3 shadedColor = evaluateSceneLighting(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight);`}\n    vec4 finalColor = vec4(shadedColor, opacity_);\n    outputColorHighlightOID(finalColor, vpos, albedo ${R(ne,\", snow\")});\n  `),Q}const Q=Object.freeze(Object.defineProperty({__proto__:null,build:K},Symbol.toStringTag,{value:\"Module\"}));export{Q as D,K as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{IDENTITY as e}from\"../../../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{ONES as t}from\"../../../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{TextureCoordinateType as r}from\"../attributes/TextureCoordinateAttribute.glsl.js\";import{VertexTextureCoordinates as a}from\"../attributes/VertexTextureCoordinates.glsl.js\";import{NormalsDoubleSidedMode as n}from\"./Normals.glsl.js\";import{Float2PassUniform as o}from\"../../shaderModules/Float2PassUniform.js\";import{glsl as s}from\"../../shaderModules/glsl.js\";import{Matrix3PassUniform as m}from\"../../shaderModules/Matrix3PassUniform.js\";import{Texture2DDrawUniform as d}from\"../../shaderModules/Texture2DDrawUniform.js\";import{Texture2DPassUniform as l}from\"../../shaderModules/Texture2DPassUniform.js\";import{VertexAttribute as i}from\"../../../lib/VertexAttribute.js\";import{BindType as c}from\"../../../../../webgl/BindType.js\";function T(T,u){const x=T.fragment,{hasVertexTangents:g,doubleSidedMode:f,hasNormalTexture:v,textureCoordinateType:p,bindType:b,hasNormalTextureTransform:y}=u;g?(T.attributes.add(i.TANGENT,\"vec4\"),T.varyings.add(\"vTangent\",\"vec4\"),f===n.WindingOrder?x.code.add(s`mat3 computeTangentSpace(vec3 normal) {\nfloat tangentHeadedness = gl_FrontFacing ? vTangent.w : -vTangent.w;\nvec3 tangent = normalize(gl_FrontFacing ? vTangent.xyz : -vTangent.xyz);\nvec3 bitangent = cross(normal, tangent) * tangentHeadedness;\nreturn mat3(tangent, bitangent, normal);\n}`):x.code.add(s`mat3 computeTangentSpace(vec3 normal) {\nfloat tangentHeadedness = vTangent.w;\nvec3 tangent = normalize(vTangent.xyz);\nvec3 bitangent = cross(normal, tangent) * tangentHeadedness;\nreturn mat3(tangent, bitangent, normal);\n}`)):x.code.add(s`mat3 computeTangentSpace(vec3 normal, vec3 pos, vec2 st) {\nvec3 Q1 = dFdx(pos);\nvec3 Q2 = dFdy(pos);\nvec2 stx = dFdx(st);\nvec2 sty = dFdy(st);\nfloat det = stx.t * sty.s - sty.t * stx.s;\nvec3 T = stx.t * Q2 - sty.t * Q1;\nT = T - normal * dot(normal, T);\nT *= inversesqrt(max(dot(T,T), 1.e-10));\nvec3 B = sign(det) * cross(normal, T);\nreturn mat3(T, B, normal);\n}`),v&&p!==r.None&&(T.include(a,u),x.uniforms.add(b===c.Pass?new l(\"normalTexture\",(e=>e.textureNormal)):new d(\"normalTexture\",(e=>e.textureNormal))),y&&(x.uniforms.add(new o(\"scale\",(e=>e.scale??t))),x.uniforms.add(new m(\"normalTextureTransformMatrix\",(t=>t.normalTextureTransformMatrix??e)))),x.code.add(s`vec3 computeTextureNormal(mat3 tangentSpace, vec2 uv) {\nvec3 rawNormal = textureLookup(normalTexture, uv).rgb * 2.0 - 1.0;`),y&&x.code.add(s`mat3 normalRotation = mat3(normalTextureTransformMatrix[0][0]/scale[0], normalTextureTransformMatrix[0][1]/scale[1], 0.0,\nnormalTextureTransformMatrix[1][0]/scale[0], normalTextureTransformMatrix[1][1]/scale[1], 0.0,\n0.0, 0.0, 0.0 );\nrawNormal.xy = (normalRotation * vec3(rawNormal.x, rawNormal.y, 1.0)).xy;`),x.code.add(s`return tangentSpace * rawNormal;\n}`))}export{T as ComputeNormalTexture};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{ColorMixModeEnum as e}from\"../../../../layers/support/symbolColorUtils.js\";import{ColorConversion as t}from\"./ColorConversion.glsl.js\";import{glsl as r}from\"../../shaderModules/glsl.js\";function i(i){i.include(t),i.code.add(r`\n    vec3 mixExternalColor(vec3 internalColor, vec3 textureColor, vec3 externalColor, int mode) {\n      // workaround for artifacts in macOS using Intel Iris Pro\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475\n      vec3 internalMixed = internalColor * textureColor;\n      vec3 allMixed = internalMixed * externalColor;\n\n      if (mode == ${r.int(e.Multiply)}) {\n        return allMixed;\n      }\n      if (mode == ${r.int(e.Ignore)}) {\n        return internalMixed;\n      }\n      if (mode == ${r.int(e.Replace)}) {\n        return externalColor;\n      }\n\n      // tint (or something invalid)\n      float vIn = rgb2v(internalMixed);\n      vec3 hsvTint = rgb2hsv(externalColor);\n      vec3 hsvOut = vec3(hsvTint.x, hsvTint.y, vIn * hsvTint.z);\n      return hsv2rgb(hsvOut);\n    }\n\n    float mixExternalOpacity(float internalOpacity, float textureOpacity, float externalOpacity, int mode) {\n      // workaround for artifacts in macOS using Intel Iris Pro\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475\n      float internalMixed = internalOpacity * textureOpacity;\n      float allMixed = internalMixed * externalOpacity;\n\n      if (mode == ${r.int(e.Ignore)}) {\n        return internalMixed;\n      }\n      if (mode == ${r.int(e.Replace)}) {\n        return externalOpacity;\n      }\n\n      // multiply or tint (or something invalid)\n      return allMixed;\n    }\n  `)}export{i as MixExternalColor};\n"],"names":["l","r","constructor","s","super","e","o","initializePipeline","colorWrite","i","arguments","this","projScale","t","intensity","c","blurSize","O","A","consumes","required","produces","n","SSAO","isEnabled","_enableTime","_passParameters","f","_drawParameters","b","initialize","Uint8Array","from","atob","charCodeAt","q","wrapMode","P","CLAMP_TO_EDGE","pixelFormat","S","RGB","REPEAT","hasMipmap","width","height","noiseTexture","x","renderingContext","techniques","precompile","w","addHandles","destroy","render","find","_ref","name","getTexture","j","a","get","compiled","performance","now","requestRender","T","UPDATE","d","view","qualitySettings","fadeDuration","bindParameters","camera","relativeElevation","h","u","Math","min","normalTexture","depthTexture","computeScreenPixelSizeAtDist","C","_","R","fullViewport","v","y","fboCache","acquire","p","RG8UNORM","bindFramebuffer","fbo","setViewport","bindTechnique","screen","draw","E","round","M","U","R8UNORM","colorTexture","m","release","V","setClearColor","clear","g","COLOR","setViewport4fv","prototype","constructOnly","receiveAmbientOcclusion","uniforms","add","_e$ssao","ssao","constants","code","_templateObject","_taggedTemplateLiteral","_templateObject2","Draw","setUniformMatrix4fv","Pass","fragment","shadowMap","getShadowMapMatrices","origin","cascadeDistances","numCascades","Bind","bindTexture","receiveShadows","include","vertex","varyings","hasColorTexture","alphaDiscardMode","Opaque","output","normalType","hasColorTextureTransform","Depth","texture","main","_templateObject3","Shadow","ShadowHighlight","ShadowExcludeHighlight","ViewshedShadow","ObjectAndLayerIdColor","invariant","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","Normal","ScreenDerivative","Attribute","Compressed","_templateObject9","_templateObject0","_templateObject1","_templateObject10","_templateObject11","_templateObject12","_templateObject13","Highlight","_templateObject14","_templateObject15","_templateObject16","hasSymbolColors","attributes","SYMBOLCOLOR","colorMixMode","doubleSidedMode","None","View","WindingOrder","COUNT","distance","max","float","outputs","int","Object","freeze","defineProperty","__proto__","build","Symbol","toStringTag","value","snowCover","z","k","G","W","offsetBackfaces","H","instancedColor","pbrMode","J","K","spherical","Q","hasBloom","X","Y","Schematic","I","POSITION","L","INSTANCECOLOR","externalColor","$","F","B","instancedDoublePrecision","ambient","diffuse","D","opacity","layerOpacity","N","concat","textureAlphaPremultiplied","hasVertexColors","textureAlphaCutoff","Blend","Mask","MaskBlend","hasModelTransformation","instanced","hasVertexTangents","_e$modelTransformatio","modelTransformation","_r$modelTransformatio","INSTANCEMODELORIGINHI","INSTANCEMODELORIGINLO","INSTANCEMODEL","INSTANCEMODELNORMAL","viewInverseTransposeMatrix","lightingSphericalHarmonicsOrder","lighting","sh","_ref2","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref0","_ref1","fullWidth","descriptor","fullHeight","abs","getRadius","transformNormalGlobalFromModel","transformNormalViewFromGlobal","toMapSpace","_e$colorTextureTransf","colorTextureTransformMatrix","hasNormalTextureTransform","textureCoordinateType","_e$normalTextureTrans","normalTextureTransformMatrix","hasEmissionTextureTransform","_e$emissiveTextureTra","emissiveTextureTransformMatrix","hasOcclusionTextureTransform","_e$occlusionTextureTr","occlusionTextureTransformMatrix","hasMetallicRoughnessTextureTransform","_e$metallicRoughnessT","metallicRoughnessTextureTransformMatrix","isSchematic","usePBR","mrrFactors","doubleSided","doubleSidedType","cullFace","Back","isInstanced","hasInstancedColor","emissiveStrength","emissiveSource","Color","emissiveBaseColor","castShadows","hasSlicePlane","offsetTransparentBackfaces","vvSize","vvColor","vvOpacity","vvSymbolAnchor","vvSymbolRotationMatrix","drivenOpacity","writeDepth","customDepthTest","Less","textureAlphaMode","renderOccluded","Occlude","isDecoration","slicePlaneLocalOrigin","length","undefined","type","_makePipeline","oitPass","transparent","hasOccludees","blending","culling","depthTest","func","depthWrite","drawBuffers","stencilWrite","stencilTest","polygonOffset","_occludeePipelineState","getPipeline","Lequal","LEQUAL","LESS","Disabled","emissionSource","hasVerticalOffset","hasMetallicRoughnessTexture","hasOcclusionTexture","hasNormalTexture","hasScreenSizePerspective","enableOffset","terrainDepthTest","cullAboveTerrain","occlusionPass","hasVvInstancing","useCustomDTRExponentForWater","useFillLights","draped","Texture","Default","objectAndLayerIdColorInstanced","discardInvisibleFragments","count","materialType","supportsEdges","intersectDraped","Map","OPAQUE_MATERIAL","TRANSPARENT_MATERIAL","parameters","TRANSPARENT_MATERIAL_WITHOUT_DEPTH","_vertexBufferLayout","vec3f","vec2i16","NORMALCOMPRESSED","glNormalized","NORMAL","vec4f","TANGENT","textureId","normalTextureId","metallicRoughnessTextureId","emissiveTextureId","occlusionTextureId","vec2f16","UV0","vec4u8","OLIDCOLOR","_configuration","isVisibleForOutput","visible","_hasEmissiveBase","hasEmissions","Emissive","getConfiguration","_t$customDepthTest","treeRendering","verticalOffset","screenSizePerspective","EmissiveColor","SymbolColor","intersect","viewingMode","Global","Local","ee","eye","Z","transform","inverseRotation","createGLMaterial","createBufferWriter","_objectSpread","material","beginSlot","_material","setParameters","enabled","updateTexture","textureBindParameters","getTechnique","globalFactor","WaterOnIntegratedMesh","Water","enableFillLights","mainLight","specularStrength","environmentStrength","Simplified","TerrainWithWater","re","oe","ie","ae","le","se","ne","te","de","ce","me","ge","ve","be","ue","we","pe","he","bindType","textureNormal","_e$scale","scale","_t$normalTextureTrans","Multiply","Ignore","Replace"],"sourceRoot":""}