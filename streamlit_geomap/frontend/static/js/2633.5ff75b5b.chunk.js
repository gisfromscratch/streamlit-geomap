"use strict";(self.webpackChunkstreamlit_geomap_frontend=self.webpackChunkstreamlit_geomap_frontend||[]).push([[2633],{42633:(t,e,n)=>{n.d(e,{EG:()=>g,Ll:()=>Z,R3:()=>w,UH:()=>u,aM:()=>y,fs:()=>d,i0:()=>v});var o=n(89379),i=n(65256),r=n(53430),s=(n(86300),n(76386)),a=n(36693),c=n(67478);const u=",",l={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},f=new Set(["integer","small-integer"]);let m=null;function d(t){return(0,r.vE)(t)||(0,r.zD)(t)||(0,r.Ah)(t)}async function g(t){const{field:e,field2:n,field3:o,normalizationField:i,valueExpression:r}=t;let a=[];if(r){if(!m){const{arcadeUtils:t}=await(0,s.l)();m=t}a=m.extractFieldNames(r)}return e&&a.push(e),n&&a.push(n),o&&a.push(o),i&&a.push(i),a}function h(t){return String(t).padStart(2,"0")}function p(t,e,n){let o;return"date"===e||"number"===e?("number"===e&&(t=new Date(t)),o="TIMESTAMP'".concat(n?t.getFullYear():t.getUTCFullYear(),"-").concat(h((n?t.getMonth():t.getUTCMonth())+1),"-").concat(h(n?t.getDate():t.getUTCDate())," ").concat(h(n?t.getHours():t.getUTCHours()),":").concat(h(n?t.getMinutes():t.getUTCMinutes()),":").concat(h(n?t.getSeconds():t.getUTCSeconds()),"'")):o=t,o}function y(t,e,n,o){const{hasQueryEngine:i}=t,r="(".concat(p(n,T(t,n),i)," - ").concat(p(e,T(t,e),i),")");let s=l[o],a="/";return s<1&&(s=1/s,a="*"),{sqlExpression:1===s?r:"(".concat(r," ").concat(a," ").concat(s,")"),sqlWhere:null}}function T(t,e){if(e instanceof Date)return"date";if("number"==typeof e)return"number";if("string"==typeof e){const n=t.getField(e);if("<now>"===e.toLowerCase())return;if((0,r.vE)(n))return"field"}}function w(t,e){const n=e&&t.getField(e);return!!n&&f.has(n.type)}function Z(t){return"cast(".concat(t," as float)")}function v(t,e){const{format:n,timeZoneOptions:r,fieldType:s}=null!==e&&void 0!==e?e:{};let u,l;if(r&&({timeZone:u,timeZoneName:l}=(0,c.hv)(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,(0,i.J2)(n||"short-date-short-time"),s)),"string"==typeof t&&isNaN(Date.parse("time-only"===s?"1970-01-01T".concat(t,"Z"):t)))return t;switch(s){case"date-only":{const e=(0,i.J2)(n||"short-date");return"string"==typeof t?(0,i.iS)(t,(0,o.A)({},e)):(0,i.Yq)(t,(0,o.A)((0,o.A)({},e),{},{timeZone:a.n$}))}case"time-only":{const e=(0,i.J2)(n||"short-time");return"string"==typeof t?(0,i.F8)(t,e):(0,i.Yq)(t,(0,o.A)((0,o.A)({},e),{},{timeZone:a.n$}))}case"timestamp-offset":{if(!u&&"string"==typeof t&&new Date(t).toISOString()!==t)return t;const e=n||r?(0,i.J2)(n||"short-date-short-time"):void 0,s=e?(0,o.A)((0,o.A)({},e),{},{timeZone:u,timeZoneName:l}):void 0;return"string"==typeof t?(0,i.Ey)(t,s):(0,i.Yq)(t,s)}default:{const e=n||r?(0,i.J2)(n||"short-date-short-time"):void 0;return(0,i.Yq)("string"==typeof t?new Date(t):t,e?(0,o.A)((0,o.A)({},e),{},{timeZone:u,timeZoneName:l}):void 0)}}}}}]);
//# sourceMappingURL=2633.5ff75b5b.chunk.js.map