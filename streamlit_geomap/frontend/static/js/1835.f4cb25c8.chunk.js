"use strict";(self.webpackChunkstreamlit_geomap_frontend=self.webpackChunkstreamlit_geomap_frontend||[]).push([[1835],{28383:(n,t,e)=>{e.d(t,{$r:()=>w,Jc:()=>I,Lc:()=>T,MH:()=>P,Wk:()=>F,gV:()=>z,lX:()=>M,rb:()=>x,sf:()=>V});var l=e(89379),i=e(33635),o=e(50076),a=e(76931),r=e(18288),s=e(19247),u=e(13312),c=e(76279),f=e(80963),d=e(53430),m=e(4414),h=e(42633),v=e(72003),p=e(76386);let g=null;const y=(0,i.A)(/^(([0-1][0-9])|([2][0-3])):([0-5][0-9])(:([0-5][0-9]))?([.](\d+))?$/,{hh:1,mm:4,ss:6,ms:8});function w(n,t,e,l){const i=(0,f.d9)(e)?(0,f.Vp)(e):null,o=i?Math.round((i.valid[1]-i.valid[0])/t.scale[0]):null;return n.map(n=>{const e=new s.A(n.geometry);return(0,c.Gy)(t,e,e),n.geometry=i?function(n,t,e){return n.x<0?n.x+=t:n.x>e&&(n.x-=t),n}(e,null!==o&&void 0!==o?o:0,l[0]):e,n})}function z(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,e=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;const o=new Float64Array(l*i);t=Math.round((0,a.Lz)(t));let r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const u=(0,m.YW)(e);for(const{geometry:a,attributes:c}of n){const{x:n,y:e}=a,f=Math.max(0,n-t),d=Math.max(0,e-t),h=Math.min(i,e+t),v=Math.min(l,n+t),p=+u(c);for(let i=d;i<h;i++)for(let a=f;a<v;a++){const u=i*l+a,c=(0,m.hv)(a-n,i-e,t)*p,f=o[u]+=c;r=Math.min(r,f),s=Math.max(s,f)}}return{min:r,max:s}}function x(n){const t=y.exec(n);if(!t)return null;const{hh:e,mm:l,ss:i,ms:o}=t.groups;return Number(e)*r.vf.hours+Number(l)*r.vf.minutes+Number(i)*r.vf.seconds+Number(o||0)}async function I(n,t){let e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)return[];const{field:i,field2:o,field3:a,fieldDelimiter:r,fieldInfos:s,timeZone:c}=n,f=i&&(null===s||void 0===s?void 0:s.find(n=>n.name.toLowerCase()===i.toLowerCase())),m=!!f&&(0,d.OH)(f),y=!!f&&(0,h.fs)(f),w=n.valueExpression,z=n.normalizationType,I=n.normalizationField,T=n.normalizationTotal,M=[],V=n.viewInfoParams;let F=null,P=null;if(w){if(!g){const{arcadeUtils:n}=await(0,p.l)();g=n}g.hasGeometryOperations(w)&&await g.enableGeometryOperations(),F=g.createFunction(w),P=V?g.getViewInfo({viewingMode:V.viewingMode,scale:V.scale,spatialReference:new u.A(V.spatialReference)}):null}const b=n.fieldInfos,Z=t[0]&&"declaredClass"in t[0]&&"esri.Graphic"===t[0].declaredClass||!b?null:{fields:b};return t.forEach(n=>{const t=n.attributes;let s;if(w){const t=Z?(0,l.A)((0,l.A)({},n),{},{layer:Z}):n,e=g.createExecContext(t,P,c);s=g.executeFunction(F,e)}else t&&(s=t[i],o?(s="".concat((0,v.gJ)(s)).concat(r).concat((0,v.gJ)(t[o])),a&&(s="".concat(s).concat(r).concat((0,v.gJ)(t[a])))):"string"==typeof s&&e&&(y?s=s?new Date(s).getTime():null:m&&(s=s?x(s):null)));if(z&&"number"==typeof s&&isFinite(s)){const n=t&&parseFloat(t[I]);s=(0,v.zS)(s,z,n,T)}M.push(s)}),M}function T(n){const t=n.field,e=n.normalizationType,l=n.normalizationField;let i;return"field"===e?i="(NOT "+l+" = 0)":"log"!==e&&"natural-log"!==e&&"square-root"!==e||(i="(".concat(t," > 0)")),i}function M(n,t,e){const l=null!=t?n+" >= "+t:"",i=null!=e?n+" <= "+e:"";let o="";return o=l&&i?V(l,i):l||i,o?"("+o+")":""}function V(n,t){let e=null!=n?n:"";return null!=t&&t&&(e=e?"("+e+") AND ("+t+")":t),e}function F(n,t){if(n&&"intersects"!==n.spatialRelationship)return new o.A(t,"Only 'intersects' spatialRelationship is supported for featureFilter")}function P(n,t,e){const l=function(n){const t=n.layer;return n.fields.filter(n=>!t.getField(n))}({layer:n,fields:t});if(l.length)return new o.A(e,"Unknown fields: "+l.join(", ")+". You can only use fields defined in the layer schema");const i=function(n){const t=n.layer;return n.fields.filter(n=>{const e=t.getFieldUsageInfo(n);return!e||!e.supportsStatistics})}({layer:n,fields:t});return i.length?new o.A(e,"Unsupported fields: "+i.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true"):void 0}},76279:(n,t,e)=>{e.d(t,{$X:()=>Z,B2:()=>a,Gy:()=>M,IE:()=>o,P5:()=>A,Q1:()=>i,QE:()=>F,SW:()=>P,Tr:()=>b,VV:()=>l,wp:()=>V});e(19902);function l(n){var t,e;return n?{originPosition:"upper-left"===n.originPosition?"upperLeft":"lower-left"===n.originPosition?"lowerLeft":n.originPosition,scale:n.tolerance?[n.tolerance,n.tolerance,1,1]:[1,1,1,1],translate:null!=n.extent?[n.extent.xmin,n.extent.ymax,null!==(t=n.extent.zmin)&&void 0!==t?t:0,null!==(e=n.extent.mmin)&&void 0!==e?e:0]:[0,0,0,0]}:null}function i(n){var t,e,l,i,o,a,r,s;if(function(n){return"lowerLeft"===n.originPosition&&4===n.scale.length&&4===n.translate.length}(n))return n;const{originPosition:u,scale:c,translate:f}=n,d=null!==(t=c[0])&&void 0!==t?t:1,m=null!==(e=c[1])&&void 0!==e?e:1;return{originPosition:"lowerLeft",scale:[d,"lowerLeft"===u?m:-m,null!==(l=c[2])&&void 0!==l?l:1,null!==(i=c[3])&&void 0!==i?i:1],translate:[null!==(o=f[0])&&void 0!==o?o:0,null!==(a=f[1])&&void 0!==a?a:0,null!==(r=f[2])&&void 0!==r?r:0,null!==(s=f[3])&&void 0!==s?s:0]}}function o(n,t){let{scale:e,translate:l}=n;return Math.round((t-l[0])/e[0])}function a(n,t){let{scale:e,translate:l}=n;return Math.round((t-l[1])/e[1])}function r(n,t){let{scale:e,translate:l}=n;return Math.round(((null!==t&&void 0!==t?t:0)-l[2])/e[2])}function s(n,t){let{scale:e,translate:l}=n;return t?Math.round((t-l[3])/e[3]):0}function u(n,t){return n&&t?m:n&&!t?f:!n&&t?d:c}const c=(n,t)=>{const e=[];if(!t.length)return null;const l=t[0];let i=o(n,l[0]),r=a(n,l[1]);e.push([i,r]);for(let s=1;s<t.length;s++){const[l,u]=t[s],c=o(n,l),f=a(n,u);c===i&&f===r||e.push([c-i,f-r]),i=c,r=f}return e},f=(n,t)=>{const e=[];if(!t.length)return null;const l=t[0];let i=o(n,l[0]),s=a(n,l[1]),u=r(n,l[2]);e.push([i,s,u]);for(let c=1;c<t.length;c++){const[l,f,d]=t[c],m=o(n,l),h=a(n,f),v=r(n,d);m===i&&h===s&&v===u||e.push([m-i,h-s,v]),i=m,s=h,u=v}return e},d=(n,t)=>{const e=[];if(!t.length)return null;const l=t[0];let i=o(n,l[0]),r=a(n,l[1]),u=s(n,l[2]);e.push([i,r,u]);for(let c=1;c<t.length;c++){const[l,f,d]=t[c],m=o(n,l),h=a(n,f),v=s(n,d);m===i&&h===r&&v===u||e.push([m-i,h-r,v]),i=m,r=h,u=v}return e},m=(n,t)=>{const e=[];if(!t.length)return null;const l=t[0];let i=o(n,l[0]),u=a(n,l[1]),c=r(n,l[2]),f=s(n,l[3]);e.push([i,u,c,f]);for(let d=1;d<t.length;d++){const[l,m,h,v]=t[d],p=o(n,l),g=a(n,m),y=r(n,h),w=s(n,v);p===i&&g===u&&y===c&&w===f||e.push([p-i,g-u,y,w]),i=p,u=g,c=y,f=w}return e};function h(n,t){let{scale:e,translate:l}=n;return t*e[0]+l[0]}function v(n,t){let{scale:e,translate:l}=n;return t*e[1]+l[1]}function p(n,t){let{scale:e,translate:l}=n;return(null!==t&&void 0!==t?t:0)*e[2]+l[2]}function g(n,t){let{scale:e,translate:l}=n;return t?t*e[3]+l[3]:0}function y(n,t){return n&&t?I:n&&!t?z:!n&&t?x:w}const w=(n,t)=>{const e=new Array(t.length);if(!t.length)return e;const l=t[0];let i=h(n,l[0]),o=v(n,l[1]);e[0]=[i,o];const{scale:a,originPosition:r}=n,s=a[0],u="lowerLeft"===r?a[1]:-a[1];for(let c=1;c<t.length;c++){const[n,l]=t[c];i+=s*n,o+=u*l,e[c]=[i,o]}return e},z=(n,t)=>{const e=new Array(t.length);if(!t.length)return e;const l=t[0];let i=h(n,l[0]),o=v(n,l[1]);e[0]=[i,o,p(n,l[2])];const{scale:a,originPosition:r}=n,s=a[0],u="lowerLeft"===r?a[1]:-a[1];for(let c=1;c<t.length;c++){const[l,a,r]=t[c];i+=s*l,o+=u*a,e[c]=[i,o,p(n,r)]}return e},x=(n,t)=>{const e=new Array(t.length);if(!t.length)return e;const l=t[0];let i=h(n,l[0]),o=v(n,l[1]);e[0]=[i,o,g(n,l[2])];const{scale:a,originPosition:r}=n,s=a[0],u="lowerLeft"===r?a[1]:-a[1];for(let c=1;c<t.length;c++){const[l,a,r]=t[c];i+=s*l,o+=u*a,e[c]=[i,o,g(n,r)]}return e},I=(n,t)=>{const e=new Array(t.length);if(!t.length)return e;const l=t[0];let i=h(n,l[0]),o=v(n,l[1]);e[0]=[i,o,p(n,l[2]),g(n,l[3])];const{scale:a,originPosition:r}=n,s=a[0],u="lowerLeft"===r?a[1]:-a[1];for(let c=1;c<t.length;c++){const[l,a,r,f]=t[c];i+=s*l,o+=u*a,e[c]=[i,o,p(n,r),g(n,f)]}return e};function T(n,t,e){const l=new Array(e.length);for(let i=0;i<e.length;i++)l[i]=t(n,e[i]);return l}function M(n,t,e){const l=i(n);return t.x=o(l,e.x),t.y=a(l,e.y),null!=e.z&&(t.z=r(l,e.z)),null!=e.m&&(t.m=s(l,e.m)),t}function V(n,t,e){var l,o;const a=function(n,t,e,l){const i=[],o=u(e,l);for(let a=0;a<t.length;a++){const e=o(n,t[a]);e&&e.length>=3&&i.push(e)}return i.length?i:null}(i(n),e.rings,e.hasZ,e.hasM);return a?(t.rings=a,t.hasZ=null!==(l=e.hasZ)&&void 0!==l&&l,t.hasM=null!==(o=e.hasM)&&void 0!==o&&o,t):null}function F(n,t,e){var l,o;const a=function(n,t,e,l){const i=[],o=u(e,l);for(let a=0;a<t.length;a++){const e=o(n,t[a]);e&&e.length>=2&&i.push(e)}return i.length?i:null}(i(n),e.paths,e.hasZ,e.hasM);return a?(t.paths=a,t.hasZ=null!==(l=e.hasZ)&&void 0!==l&&l,t.hasM=null!==(o=e.hasM)&&void 0!==o&&o,t):null}function P(n,t,e){var l,o;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null!==(l=null===e||void 0===e?void 0:e.hasZ)&&void 0!==l&&l,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null!==(o=null===e||void 0===e?void 0:e.hasM)&&void 0!==o&&o;if(null!=e){const l=i(n);t.points=y(a,r)(l,e.points),t.hasZ=a,t.hasM=r}return t}function b(n,t,e){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null!=(null===e||void 0===e?void 0:e.z),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null!=(null===e||void 0===e?void 0:e.m);if(null==e)return t;const a=i(n);return t.x=h(a,e.x),t.y=v(a,e.y),l&&(t.z=p(a,e.z)),o&&(t.m=g(a,e.m)),t}function Z(n,t,e){var l,o;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null!==(l=null===e||void 0===e?void 0:e.hasZ)&&void 0!==l&&l,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null!==(o=null===e||void 0===e?void 0:e.hasM)&&void 0!==o&&o;if(null!=e){const l=i(n);t.rings=T(l,y(a,r),e.rings),t.hasZ=a,t.hasM=r}return t}function A(n,t,e){var l,o;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null!==(l=null===e||void 0===e?void 0:e.hasZ)&&void 0!==l&&l,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null!==(o=null===e||void 0===e?void 0:e.hasM)&&void 0!==o&&o;if(null!=e){const l=i(n);t.paths=T(l,y(a,r),e.paths),t.hasZ=a,t.hasM=r}return t}},81835:(n,t,e)=>{e.r(t),e.d(t,{classBreaks:()=>r,heatmapStatistics:()=>u,histogram:()=>s,summaryStatistics:()=>o,uniqueValues:()=>a});var l=e(28383),i=e(72003);async function o(n){const{attribute:t,features:e}=n,{normalizationType:o,normalizationField:a,minValue:r,maxValue:s,fieldType:u,outStatisticTypes:c}=t,f=await(0,l.Jc)({field:t.field,valueExpression:t.valueExpression,normalizationType:o,normalizationField:a,normalizationTotal:t.normalizationTotal,viewInfoParams:t.viewInfoParams,timeZone:t.timeZone,fieldInfos:t.fieldInfos},e),d=(0,i.Vb)({normalizationType:o,normalizationField:a,minValue:r,maxValue:s}),m={value:.5,fieldType:u},h="esriFieldTypeString"===u?(0,i.z9)({values:f,supportsNullCount:d,percentileParams:m,outStatisticTypes:c}):(0,i.G_)({values:f,minValue:r,maxValue:s,useSampleStdDev:!o,supportsNullCount:d,percentileParams:m,outStatisticTypes:c});return(0,i.oZ)(h,c,"esriFieldTypeDate"===u)}async function a(n){const{attribute:t,features:e}=n,o=await(0,l.Jc)({field:t.field,field2:t.field2,field3:t.field3,fieldDelimiter:t.fieldDelimiter,valueExpression:t.valueExpression,viewInfoParams:t.viewInfoParams,timeZone:t.timeZone,fieldInfos:t.fieldInfos},e,!1),a=(0,i.b3)(o);return(0,i.lv)(a,t.domains,t.returnAllCodedValues,t.fieldDelimiter)}async function r(n){const{attribute:t,features:e}=n,{field:o,normalizationType:a,normalizationField:r,normalizationTotal:s,classificationMethod:u}=t,c=await(0,l.Jc)({field:o,valueExpression:t.valueExpression,normalizationType:a,normalizationField:r,normalizationTotal:s,viewInfoParams:t.viewInfoParams,timeZone:t.timeZone,fieldInfos:t.fieldInfos},e),f=(0,i.Rw)(c,{field:o,normalizationType:a,normalizationField:r,normalizationTotal:s,classificationMethod:u,standardDeviationInterval:t.standardDeviationInterval,numClasses:t.numClasses,minValue:t.minValue,maxValue:t.maxValue});return(0,i.jM)(f,u)}async function s(n){const{attribute:t,features:e}=n,{field:o,normalizationType:a,normalizationField:r,normalizationTotal:s,classificationMethod:u}=t,c=await(0,l.Jc)({field:o,valueExpression:t.valueExpression,normalizationType:a,normalizationField:r,normalizationTotal:s,viewInfoParams:t.viewInfoParams,timeZone:t.timeZone,fieldInfos:t.fieldInfos},e);return(0,i.$y)(c,{field:o,normalizationType:a,normalizationField:r,normalizationTotal:s,classificationMethod:u,standardDeviationInterval:t.standardDeviationInterval,numBins:t.numBins,minValue:t.minValue,maxValue:t.maxValue})}async function u(n){var t;const{attribute:e,features:i}=n,{field:o,radius:a,transform:r,spatialReference:s}=e,u=null!==(t=e.size)&&void 0!==t?t:[0,0],c=(0,l.$r)(null!==i&&void 0!==i?i:[],r,s,u);return(0,l.gV)(c,null!==a&&void 0!==a?a:void 0,o,u[0],u[1])}}}]);
//# sourceMappingURL=1835.f4cb25c8.chunk.js.map