{"version":3,"file":"static/js/809.0e5a1f42.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4DrawUniform.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/interfaces.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/IntegerDrawUniform.js","../node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/Material/shader/ComponentData.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/sources/edgeRenderer/EdgeUtil.glsl.js","../node_modules/@arcgis/core/views/3d/layers/support/edgeUtils.js","../node_modules/@arcgis/core/views/3d/layers/support/layerUtils.js","../node_modules/@arcgis/core/views/3d/layers/support/symbolColorUtils.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/Material/shader/DecodeSymbolColor.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{BindType as r}from\"../../../../webgl/BindType.js\";import{Uniform as e}from\"../../../../webgl/Uniform.js\";class o extends e{constructor(e,o){super(e,\"vec4\",r.Draw,((r,s,t)=>r.setUniform4fv(e,o(s,t))))}}export{o as Float4DrawUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nvar A;!function(A){A[A.TRANSPARENT=0]=\"TRANSPARENT\",A[A.OPAQUE=1]=\"OPAQUE\"}(A||(A={}));export{A as Transparency};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{BindType as r}from\"../../../../webgl/BindType.js\";import{Uniform as o}from\"../../../../webgl/Uniform.js\";class e extends o{constructor(o,e){super(o,\"int\",r.Draw,((r,s,t)=>r.setUniform1i(o,e(s,t))))}}export{e as IntegerDrawUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{neverReached as o}from\"../../../../../../../core/compilerUtils.js\";import{packFloatRGBA as e}from\"../../../../../../../core/floatRGBA.js\";import{DecodeSymbolColor as r}from\"./DecodeSymbolColor.glsl.js\";import{ShaderOutput as t}from\"../../../../core/shaderLibrary/ShaderOutput.js\";import{RgbaFloatEncoding as n}from\"../../../../core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";import{Float4DrawUniform as a}from\"../../../../core/shaderModules/Float4DrawUniform.js\";import{glsl as d,If as l}from\"../../../../core/shaderModules/glsl.js\";import{IntegerDrawUniform as c}from\"../../../../core/shaderModules/IntegerDrawUniform.js\";import{Texture2DDrawUniform as i}from\"../../../../core/shaderModules/Texture2DDrawUniform.js\";import{olidEnabled as s}from\"../../../../effects/geometry/olidUtils.js\";import{VertexAttribute as x}from\"../../../../lib/VertexAttribute.js\";var C;!function(o){o[o.Uniform=0]=\"Uniform\",o[o.Varying=1]=\"Varying\",o[o.COUNT=2]=\"COUNT\"}(C||(C={}));const m=429496.7296;function f(o,r){e(o/m*.5+.5,r)}function u(e,r){switch(r.componentData){case C.Varying:return v(e,r);case C.Uniform:return p(e,r);case C.COUNT:return;default:o(r.componentData)}}function v(o,e){const{vertex:a,fragment:l}=o;a.include(n),a.uniforms.add(new i(\"componentColorTex\",(o=>o.componentParameters.texture.texture))),o.attributes.add(x.COMPONENTINDEX,\"float\"),o.varyings.add(\"vExternalColorMixMode\",\"mediump float\"),o.varyings.add(\"vExternalColor\",\"vec4\");const c=e.output===t.ObjectAndLayerIdColor;c&&o.varyings.add(\"vObjectAndLayerIdColor\",\"vec4\"),o.include(r),a.constants.add(\"stride\",\"float\",s()?3:2),a.code.add(d`vec2 getComponentTextureCoordinates(float componentIndex, float typeOffset) {\nfloat index = componentIndex * stride + typeOffset;\nfloat texSize = float(textureSize(componentColorTex, 0).x);\nfloat coordX = mod(index, texSize);\nfloat coordY = floor(index / texSize);\nreturn vec2(coordX, coordY) + 0.5;\n}`),a.code.add(d`\n  vec4 _readComponentColor() {\n    vec2 textureCoordinates = getComponentTextureCoordinates(componentIndex, 0.0);\n    return texelFetch(componentColorTex, ivec2(textureCoordinates), 0);\n   }\n\n  float readElevationOffset() {\n    vec2 textureCoordinates = getComponentTextureCoordinates(componentIndex, 1.0);\n    vec4 encodedElevation = texelFetch(componentColorTex, ivec2(textureCoordinates), 0);\n    return uninterpolatedRGBAToFloat(encodedElevation) * ${d.float(m)};\n  }\n\n  ${c?d`\n          void forwardObjectAndLayerIdColor() {\n            vec2 textureCoordinates = getComponentTextureCoordinates(componentIndex, 2.0);\n            vObjectAndLayerIdColor = texelFetch(componentColorTex, ivec2(textureCoordinates), 0);\n          }`:d`void forwardObjectAndLayerIdColor() {}`}\n\n  vec4 forwardExternalColor(out bool castShadows) {\n    vec4 componentColor = _readComponentColor() * 255.0;\n\n    float shadowFlag = mod(componentColor.b * 255.0, 2.0);\n    componentColor.b -= shadowFlag;\n    castShadows = shadowFlag >= 1.0;\n\n    int decodedColorMixMode;\n    vExternalColor = decodeSymbolColor(componentColor, decodedColorMixMode) * 0.003921568627451; // = 1/255;\n    vExternalColorMixMode = float(decodedColorMixMode) + 0.5; // add 0.5 to avoid interpolation artifacts\n\n    return vExternalColor;\n  }\n`),l.code.add(d`\n  void readExternalColor(out vec4 externalColor, out int externalColorMixMode) {\n    externalColor = vExternalColor;\n    externalColorMixMode = int(vExternalColorMixMode);\n  }\n\n  void outputObjectAndLayerIdColor() {\n     ${c?d`fragColor = vObjectAndLayerIdColor;`:\"\"}\n  }\n`)}function p(o,e){const{vertex:r,fragment:n}=o;o.varyings.add(\"vExternalColor\",\"vec4\"),r.uniforms.add(new a(\"externalColor\",(o=>o.componentParameters.externalColor))).code.add(d`float readElevationOffset() {\nreturn 0.0;\n}\nvoid forwardObjectAndLayerIdColor() {}\nvec4 forwardExternalColor(out bool castShadows) {\nvExternalColor = externalColor;\ncastShadows = true;\nreturn externalColor;\n}`);const i=e.output===t.ObjectAndLayerIdColor;n.uniforms.add(new c(\"externalColorMixMode\",(o=>o.componentParameters.externalColorMixMode))).code.add(d`\n    void readExternalColor(out vec4 color, out int colorMixMode) {\n      color = vExternalColor;\n      colorMixMode = externalColorMixMode;\n    }\n\n    void outputObjectAndLayerIdColor() {\n      ${l(i,\"fragColor = vec4(0, 0, 0, 0);\")}\n    }\n  `)}export{u as ComponentData,C as ComponentDataType,f as encodeElevationOffset,m as maxElevationOffset};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{maxElevationOffset as o}from\"../../../collections/Component/Material/shader/ComponentData.glsl.js\";import{NormalAttribute as e}from\"../../../core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{DoublePrecision as r}from\"../../../core/shaderLibrary/util/DoublePrecision.glsl.js\";import{RgbaFloatEncoding as t}from\"../../../core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";import{Float3DrawUniform as a}from\"../../../core/shaderModules/Float3DrawUniform.js\";import{Float3PassUniform as l}from\"../../../core/shaderModules/Float3PassUniform.js\";import{glsl as n}from\"../../../core/shaderModules/glsl.js\";import{Matrix3DrawUniform as d}from\"../../../core/shaderModules/Matrix3DrawUniform.js\";import{Matrix3PassUniform as m}from\"../../../core/shaderModules/Matrix3PassUniform.js\";import{Matrix4BindUniform as i}from\"../../../core/shaderModules/Matrix4BindUniform.js\";import{Texture2DDrawUniform as s}from\"../../../core/shaderModules/Texture2DDrawUniform.js\";import{VertexAttribute as c}from\"../../../lib/VertexAttribute.js\";function f(f,v){const{vertex:u}=f;u.include(t),f.include(e,v);const{silhouette:x,legacy:p,spherical:w}=v;u.uniforms.add(new s(\"componentDataTex\",(o=>o.componentDataTexture))),f.attributes.add(c.COMPONENTINDEX,\"float\");const M=0,F=1,T=2,h=3,P=8,V=128;u.constants.add(\"lineWidthFractionFactor\",\"float\",8),u.constants.add(\"extensionLengthOffset\",\"float\",128),u.code.add(n`\n    vec2 _componentTextureCoords(float componentIndex, float fieldOffset) {\n      float fieldIndex = ${n.float(h)}  * componentIndex + fieldOffset;\n      float texSize = float(textureSize(componentDataTex, 0).x);\n      float colIndex = mod(fieldIndex, texSize);\n      float rowIndex = floor(fieldIndex / texSize);\n\n      return vec2(colIndex, rowIndex) + 0.5;\n    }\n\n    struct ComponentData {\n      vec4 color;\n      vec3 normal;\n      vec3 normal2;\n      float lineWidth;\n      float extensionLength;\n      float type;\n      float verticalOffset;\n    };\n\n    ComponentData readComponentData() {\n      vec2 colorIndex = _componentTextureCoords(componentIndex, ${n.float(M)});\n      vec2 otherIndex = _componentTextureCoords(componentIndex, ${n.float(F)});\n      vec2 verticalOffsetIndex = _componentTextureCoords(float(componentIndex), ${n.float(T)} );\n      vec3 normal = normalModel();\n      vec3 normal2 = ${x?n`decompressNormal(normal2Compressed)`:n`normal`};\n\n      vec4 colorValue = texelFetch(componentDataTex, ivec2(colorIndex), 0);\n      vec4 otherValue = texelFetch(componentDataTex, ivec2(otherIndex), 0);\n      float verticalOffset = uninterpolatedRGBAToFloat(texelFetch(componentDataTex, ivec2(verticalOffsetIndex), 0)) * ${n.float(o)};\n\n      return ComponentData(\n        vec4(colorValue.rgb, colorValue.a * otherValue.w), // otherValue.w stores separate opacity\n        normal, normal2,\n        otherValue.x * (255.0 / ${n.float(P)} ),\n        otherValue.y * 255.0 - ${n.float(V)},\n        -(otherValue.z * 255.0) + 0.5, // SOLID (=0/255) needs to be > 0.0, SKETCHY (=1/255) needs to be <= 0;\n        verticalOffset\n      );\n    }\n  `),p?u.code.add(n`vec3 _modelToWorldNormal(vec3 normal) {\nreturn (model * vec4(normal, 0.0)).xyz;\n}\nvec3 _modelToViewNormal(vec3 normal) {\nreturn (localView * model * vec4(normal, 0.0)).xyz;\n}`):(u.uniforms.add(new d(\"transformNormalGlobalFromModel\",(o=>o.transformNormalGlobalFromModel))),u.code.add(n`vec3 _modelToWorldNormal(vec3 normal) {\nreturn transformNormalGlobalFromModel * normal;\n}`)),x?(f.attributes.add(c.NORMAL2COMPRESSED,\"vec2\"),u.code.add(n`vec3 worldNormal(ComponentData data) {\nreturn _modelToWorldNormal(normalize(data.normal + data.normal2));\n}`)):u.code.add(n`vec3 worldNormal(ComponentData data) {\nreturn _modelToWorldNormal(data.normal);\n}`),p?u.code.add(n`void worldAndViewFromModelPosition(vec3 modelPos, float verticalOffset, out vec3 worldPos, out vec3 viewPos) {\nworldPos = (model * vec4(modelPos, 1.0)).xyz;\nviewPos = (localView * vec4(worldPos, 1.0)).xyz;\n}`):(u.include(r,v),u.uniforms.add(new m(\"transformViewFromCameraRelativeRS\",(o=>o.transformViewFromCameraRelativeRS)),new d(\"transformWorldFromModelRS\",(o=>o.transformWorldFromModelRS)),new a(\"transformWorldFromModelTL\",(o=>o.transformWorldFromModelTL)),new a(\"transformWorldFromModelTH\",(o=>o.transformWorldFromModelTH)),new l(\"transformWorldFromViewTL\",(o=>o.transformWorldFromViewTL)),new l(\"transformWorldFromViewTH\",(o=>o.transformWorldFromViewTH))),u.code.add(n`\n      void worldAndViewFromModelPosition(vec3 modelPos, float verticalOffset, out vec3 worldPos, out vec3 viewPos) {\n        vec3 rotatedModelPosition = transformWorldFromModelRS * modelPos;\n\n        vec3 transformCameraRelativeFromModel = dpAdd(\n          transformWorldFromModelTL,\n          transformWorldFromModelTH,\n          -transformWorldFromViewTL,\n          -transformWorldFromViewTH\n        );\n\n        worldPos = transformCameraRelativeFromModel + rotatedModelPosition;\n\n        if (verticalOffset != 0.0) {\n          vec3 vUp = ${w?\"normalize(transformWorldFromModelTL + rotatedModelPosition);\":\"vec3(0.0, 0.0, 1.0);\"}\n          worldPos += verticalOffset * vUp;\n        }\n\n        viewPos = transformViewFromCameraRelativeRS * worldPos;\n      }\n    `)),u.uniforms.add(new i(\"transformProjFromView\",(o=>o.camera.projectionMatrix))).code.add(n`vec4 projFromViewPosition(vec3 position) {\nreturn transformProjFromView * vec4(position, 1.0);\n}`),u.code.add(n`float calculateExtensionLength(float extensionLength, float lineLength) {\nreturn extensionLength / (log2(max(1.0, 256.0 / lineLength)) * 0.2 + 1.0);\n}`)}function v(o){return o===u.Sketch||o===u.Mixed}var u,x;!function(o){o[o.Solid=0]=\"Solid\",o[o.Sketch=1]=\"Sketch\",o[o.Mixed=2]=\"Mixed\",o[o.COUNT=3]=\"COUNT\"}(u||(u={})),function(o){o[o.REGULAR=0]=\"REGULAR\",o[o.SILHOUETTE=1]=\"SILHOUETTE\"}(x||(x={}));export{x as EdgeSilhouette,u as EdgeType,f as EdgeUtil,v as usesSketchLogic};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"../../../../Color.js\";import\"../../../../core/has.js\";import{pt2px as n}from\"../../../../core/screenUtils.js\";import{fromValues as r,fromArray as t}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{isExtrudeSymbol3DLayer as o,isFillSymbol3DLayer as i}from\"./layerUtils.js\";import{Transparency as s}from\"../../webgl-engine/lib/edgeRendering/interfaces.js\";import{EdgeType as l}from\"../../webgl-engine/shaders/sources/edgeRenderer/EdgeUtil.glsl.js\";function c(e){return e&&e.enabled&&(o(e)||i(e))&&null!=e.edges}function u(e){return e&&e.enabled&&e.edges||null}function a(e,n){return f(u(e),n)}function f(o,i){if(null==o)return null;const s=null!=o.color?t(e.toUnitRGBA(o.color)):r(0,0,0,0),l=n(o.size),c=n(o.extensionLength);switch(o.type){case\"solid\":return g({color:s,size:l,extensionLength:c,...i});case\"sketch\":return p({color:s,size:l,extensionLength:c,...i});default:return}}function g(e){return{...m,...e,type:l.Solid}}function p(e){return{...d,...e,type:l.Sketch}}const m={color:r(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:s.OPAQUE,hasSlicePlane:!1},d={color:r(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:s.OPAQUE,hasSlicePlane:!1};export{a as createMaterial,f as createMaterialFromEdges,g as createSolidEdgeMaterial,c as hasEdges};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nfunction t(t){return\"fill\"===t.type}function e(t){return\"extrude\"===t.type}export{e as isExtrudeSymbol3DLayer,t as isFillSymbol3DLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../../../core/mathUtils.js\";var n;function e(t){switch(t){case\"multiply\":default:return n.Multiply;case\"ignore\":return n.Ignore;case\"replace\":return n.Replace;case\"tint\":return n.Tint}}function r(e,r,a){if(null==e||r===n.Ignore)return a[0]=255,a[1]=255,a[2]=255,void(a[3]=255);const c=t(Math.round(e[3]*i),0,i),p=0===c||r===n.Tint?0:r===n.Replace?u:l;a[0]=t(Math.round(e[0]*o),0,o),a[1]=t(Math.round(e[1]*o),0,o),a[2]=t(Math.round(e[2]*o),0,o),a[3]=c+p}!function(t){t[t.Multiply=1]=\"Multiply\",t[t.Ignore=2]=\"Ignore\",t[t.Replace=3]=\"Replace\",t[t.Tint=4]=\"Tint\"}(n||(n={}));const o=255,i=85,u=i,l=2*i;export{n as ColorMixModeEnum,r as encodeSymbolColor,e as parseColorMixMode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{neverReached as e}from\"../../../../../../core/compilerUtils.js\";import{glsl as r}from\"../../shaderModules/glsl.js\";import{VertexAttribute as o}from\"../../../lib/VertexAttribute.js\";function t(t,i){switch(i.normalType){case a.Compressed:t.attributes.add(o.NORMALCOMPRESSED,\"vec2\"),t.vertex.code.add(r`vec3 decompressNormal(vec2 normal) {\nfloat z = 1.0 - abs(normal.x) - abs(normal.y);\nreturn vec3(normal + sign(normal) * min(z, 0.0), z);\n}\nvec3 normalModel() {\nreturn decompressNormal(normalCompressed);\n}`);break;case a.Attribute:t.attributes.add(o.NORMAL,\"vec3\"),t.vertex.code.add(r`vec3 normalModel() {\nreturn normal;\n}`);break;case a.ScreenDerivative:t.fragment.code.add(r`vec3 screenDerivativeNormal(vec3 positionView) {\nreturn normalize(cross(dFdx(positionView), dFdy(positionView)));\n}`);break;default:e(i.normalType);case a.COUNT:}}var a;!function(e){e[e.Attribute=0]=\"Attribute\",e[e.Compressed=1]=\"Compressed\",e[e.ScreenDerivative=2]=\"ScreenDerivative\",e[e.COUNT=3]=\"COUNT\"}(a||(a={}));export{t as NormalAttribute,a as NormalType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{ColorMixModeEnum as o}from\"../../../../../layers/support/symbolColorUtils.js\";import{glsl as l}from\"../../../../core/shaderModules/glsl.js\";function a(a){a.vertex.code.add(l`\n    vec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {\n      float symbolAlpha = 0.0;\n\n      const float maxTint = 85.0;\n      const float maxReplace = 170.0;\n      const float scaleAlpha = 3.0;\n\n      if (symbolColor.a > maxReplace) {\n        colorMixMode = ${l.int(o.Multiply)};\n        symbolAlpha = scaleAlpha * (symbolColor.a - maxReplace);\n      } else if (symbolColor.a > maxTint) {\n        colorMixMode = ${l.int(o.Replace)};\n        symbolAlpha = scaleAlpha * (symbolColor.a - maxTint);\n      } else if (symbolColor.a > 0.0) {\n        colorMixMode = ${l.int(o.Tint)};\n        symbolAlpha = scaleAlpha * symbolColor.a;\n      } else {\n        colorMixMode = ${l.int(o.Multiply)};\n        symbolAlpha = 0.0;\n      }\n\n      return vec4(symbolColor.r, symbolColor.g, symbolColor.b, symbolAlpha);\n    }\n  `)}export{a as DecodeSymbolColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../shaderModules/glsl.js\";function t(t){t.code.add(o`const float MAX_RGBA_FLOAT =\n255.0 / 256.0 +\n255.0 / 256.0 / 256.0 +\n255.0 / 256.0 / 256.0 / 256.0 +\n255.0 / 256.0 / 256.0 / 256.0 / 256.0;\nconst vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\nvec4 float2rgba(const float value) {\nfloat valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);\nvec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);\nconst float toU8AsFloat = 1.0 / 255.0;\nreturn fixedPointU8 * toU8AsFloat;\n}`),t.code.add(o`const vec4 RGBA_TO_FLOAT_FACTORS = vec4(\n255.0 / (256.0),\n255.0 / (256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgbaTofloat(vec4 rgba) {\nreturn dot(rgba, RGBA_TO_FLOAT_FACTORS);\n}`),t.code.add(o`const vec4 uninterpolatedRGBAToFloatFactors = vec4(\n1.0 / 256.0,\n1.0 / 256.0 / 256.0,\n1.0 / 256.0 / 256.0 / 256.0,\n1.0 / 256.0 / 256.0 / 256.0 / 256.0\n);\nfloat uninterpolatedRGBAToFloat(vec4 rgba) {\nreturn (dot(round(rgba * 255.0), uninterpolatedRGBAToFloatFactors) - 0.5) * 2.0;\n}`)}export{t as RgbaFloatEncoding};\n"],"names":["o","e","constructor","super","r","Draw","s","t","setUniform4fv","A","TRANSPARENT","OPAQUE","C","Uniform","Varying","COUNT","u","x","c","enabled","type","i","edges","a","n","color","toUnitRGBA","l","size","extensionLength","g","_objectSpread","d","Sketch","p","f","m","Solid","Mixed","REGULAR","SILHOUETTE","opacity","objectTransparency","hasSlicePlane","Multiply","Ignore","Replace","Tint","Math","round","normalType","Compressed","attributes","add","NORMALCOMPRESSED","vertex","code","_templateObject","_taggedTemplateLiteral","Attribute","NORMAL","_templateObject2","ScreenDerivative","fragment","_templateObject3","int"],"sourceRoot":""}